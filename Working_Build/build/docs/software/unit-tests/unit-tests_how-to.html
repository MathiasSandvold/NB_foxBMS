<!-- https://stackoverflow.com/a/53329712 -->

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>8.2.5. How to use unit tests &mdash; foxBMS 2 1.5.0 documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/graphviz.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme_overrides.css" type="text/css" />
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
        <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
        <script>mermaid.initialize({startOnLoad:true});</script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="8.2.10. Changing and Extending the Build Environment" href="../build-environment/build-environment_how-to.html" />
    <link rel="prev" title="8.2.4. How to Use Generated Sources from HALCoGen" href="../configuration/without-halcogen_how-to.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> foxBMS 2
            <img src="../../_static/foxbms250px.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                1.5.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">General Information</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../general/releases.html">1. Releases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../general/changelog.html">2. Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../general/motivation.html">3. Motivation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../general/safety/safety.html">4. Safety</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../general/license.html">5. License</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../general/team.html">6. Team</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../introduction/abbreviations-definitions.html">1. Abbreviations and Definitions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../introduction/naming-conventions.html">2. Naming Conventions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../introduction/bms-overview.html">3. The foxBMS 2 Platform</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../introduction/use-case.html">4. Use Case</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../getting-started/getting-started.html">1. Getting Started with foxBMS 2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting-started/repository-structure.html">2. Repository Structure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting-started/software-installation.html">3. Software Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting-started/workspace.html">4. Creating a Workspace</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting-started/first-steps-on-hardware.html">5. First Steps on Hardware</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Software Documentation</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../configuration/configuration.html">1. Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../build/build.html">2. Building the Application</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview/sw-overview.html">3. Software Structure Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/modules.html">4. Software Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="unit-tests.html">5. Unit Tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="../build-process/build-process.html">6. Build Process</a></li>
<li class="toctree-l1"><a class="reference internal" href="../build-environment/build-environment.html">7. Build Environment</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../how-to/how-to.html">8. How-to</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../modules/driver/can/can_how-to.html">8.1.1. How to Use the CAN Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modules/engine/diag/diag_how-to.html">8.1.2. How to Use the Diagnosis Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modules/engine/database/database_how-to.html">8.1.3. How to Use the Database Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modules/task/ftask/ftask_how-to.html">8.1.4. How to Use the FTASK Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modules/main/fassert_how-to.html">8.1.5. How to Use assertions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modules/driver/afe/adding-a-new-ic_how-to.html">8.2.1. How to Implement an Analog Front-End Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modules/driver/ts/adding-a-new-ts_how-to.html">8.2.2. How to Implement a New Temperature Sensor Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../developer-manual/style-guide/state-machines_how-to.html">8.2.3. How to Write State Machines</a></li>
<li class="toctree-l2"><a class="reference internal" href="../configuration/without-halcogen_how-to.html">8.2.4. How to Use Generated Sources from HALCoGen</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">8.2.5. How to use unit tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="#guidelines-for-the-unit-test-skeleton">8.2.6. Guidelines for the Unit Test Skeleton</a></li>
<li class="toctree-l2"><a class="reference internal" href="#result">8.2.7. Result</a></li>
<li class="toctree-l2"><a class="reference internal" href="#how-to-exclude-files-from-unit-tests">8.2.8. How to exclude files from unit tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="#using-ceedling-directly">8.2.9. Using ceedling directly</a></li>
<li class="toctree-l2"><a class="reference internal" href="../build-environment/build-environment_how-to.html">8.2.10. Changing and Extending the Build Environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="../build-process/library-project_how-to.html">8.2.11. How to Build A Library and Link it in a foxBMS 2 Project</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../linker-script/linker-script.html">9. Linker Script</a></li>
<li class="toctree-l1"><a class="reference internal" href="../architecture/architecture.html">10. Software Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/overview.html">11. API</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Hardware Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../hardware/hardware.html">1. Hardware</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hardware/design-resources.html">2. Design Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hardware/connectors.html">3. Connectors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hardware/master.html">4. Master Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hardware/slaves.html">5. Slaves Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hardware/interfaces.html">6. Interfaces Overview</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">System Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../system/system-introduction.html">1. System Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../system/system-voltage-and-current-monitoring.html">2. System Voltage And Current Monitoring</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Tools Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../tools/dbc.html">1. DBC File</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/gui/gui.html">2. foxBMS 2 GUI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/waf-tools/waf-tools.html">3. Waf Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/debugger/debug-application.html">4. Debugging the Application</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/halcogen/halcogen.html">5. HALCoGen tool documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/static-analysis/axivion.html">6. Axivion Bauhaus Suite</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Developer Manual</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../developer-manual/preface.html">1. Preface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developer-manual/style-guide/style-guide.html">2. Style Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developer-manual/software-developer-manual.html">3. Software Developer Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developer-manual/hardware-developer-manual.html">4. Hardware Developer Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developer-manual/public-release-process.html">5. Public Release Process</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Miscellaneous Information</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../misc/acknowledgements.html">1. Acknowledgements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../misc/indices-and-tables.html">2. Indices and Tables</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../misc/bibliography.html">3. Bibliography</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">foxBMS 2</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../how-to/how-to.html"><span class="section-number">8. </span>How-to</a> &raquo;</li>
      <li><span class="section-number">8.2.5. </span>How to use unit tests</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/software/unit-tests/unit-tests_how-to.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">

           <div itemprop="articleBody">
             
  <div class="section" id="how-to-use-unit-tests">
<span id="id1"></span><h1><span class="section-number">8.2.5. </span>How to use unit tests<a class="headerlink" href="#how-to-use-unit-tests" title="Permalink to this headline"></a></h1>
<p>Verify that the unit testing framework is work is working as expected:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">waf build_unit_test</span>
<span class="go">waf build_unit_test --coverage</span>
</pre></div>
</div>
<p>Typical usage and more information on the unit tests can be found in
<a class="reference internal" href="unit-tests.html#unit-tests"><span class="std std-ref">Unit tests</span></a>.</p>
</div>
<div class="section" id="guidelines-for-the-unit-test-skeleton">
<h1><span class="section-number">8.2.6. </span>Guidelines for the Unit Test Skeleton<a class="headerlink" href="#guidelines-for-the-unit-test-skeleton" title="Permalink to this headline"></a></h1>
<p>In this example a driver that resides in <cite>src/app/driver/abc/abc.c</cite> and
<cite>src/app/driver/abc/abc.h</cite> is added and therefore the accompanying unit tests
need to be added also.
The module <cite>abc.c</cite> implements the public function
<cite>extern uint8_t ABC_DoThis(void)</cite> and the static function
<cite>static uint8_t ABC_DoSomethingElse(uint8_t someArgument)</cite>.
Therefore, there are now two functions that need to be united tested.</p>
<p>At first the accompanying unit test file needs to be created in
<cite>tests/unit/app/driver/abc/test_abc.c</cite> (notice the prefix <cite>test</cite>) based on the
template in <cite>conf/tpl/test_c.c</cite>.
The helper script <cite>tools/utils/generate_missing_test_files.py</cite> can be used to
automatically create the file.</p>
<div class="section" id="public-extern-function-tests">
<h2><span class="section-number">8.2.6.1. </span>Public/Extern Function Tests<a class="headerlink" href="#public-extern-function-tests" title="Permalink to this headline"></a></h2>
<ol class="arabic simple">
<li><p>Add a function <cite>uint8_t testABC_DoThis()</cite> in the appropriate section in the
test file <cite>tests/unit/app/driver/abc/test_abc.c</cite>.
This function implements the tests for <cite>ABC_DoThis()</cite>.
The prefix <cite>test</cite> (<strong>no</strong> trailing underscore) is required for ceedling to
detect the function as a <em>test</em>-function.</p></li>
<li><p>Write the test code.</p></li>
</ol>
</div>
<div class="section" id="static-function-tests">
<h2><span class="section-number">8.2.6.2. </span>Static Function Tests<a class="headerlink" href="#static-function-tests" title="Permalink to this headline"></a></h2>
<ol class="arabic">
<li><p>Static functions are not seen by other translation units, therefore the
static functions must be made callable from other modules by creating a
wrapper.
For this example the wrapper will be
<cite>extern uint8_t TEST_ABC_DoSomethingElse(uint8_t someArgument)</cite> (notice
the <cite>TEST_</cite> prefix followed by the name of the static function).</p></li>
<li><p>The declaration of the wrapper needs to be placed in the appropriate section
in the header of the driver (<cite>src/app/driver/abc/abc.h</cite>).</p></li>
<li><p>The definition of the wrapper needs to be placed in the appropriate section
in the source of the driver (<cite>src/app/driver/abc/abc.c</cite>).
The only thing this wrapper needs to do, is to verbatim pass all arguments
to the original function (i.e., the static function) and return its result.
The definition of the wrapper looks therefore like this</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="k">extern</span><span class="w"> </span><span class="kt">uint8_t</span><span class="w"> </span><span class="nf">testABC_DoSomethingElse</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">someArgument</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="linenos">2</span><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">ABC_DoSomethingElse</span><span class="p">(</span><span class="n">someArgument</span><span class="p">);</span><span class="w"></span>
<span class="linenos">3</span><span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</li>
<li><p>Add a function <cite>void testABC_DoSomethingElse(void)</cite> in the appropriate
section in the test file <cite>tests/unit/app/driver/abc/test_abc.c</cite>.
This function implements the tests for <cite>ABC_DoSomethingElse()</cite>.
The prefix <cite>test</cite> (<strong>no</strong> trailing underscore) is required for ceedling to
detect the function as a <em>test</em>-function.
Note: The <cite>TEST_</cite> prefix of the <em>externalization</em> wrapper is removed and not
part of the test function name.</p></li>
<li><p>Write test code.</p></li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><cite>void</cite>-returning functions that are externalized shall use
<cite>return &lt;FunctionCall&gt;</cite> nevertheless, as this makes the intention of the
wrapper even more clear.</p>
</div>
</div>
</div>
<div class="section" id="result">
<h1><span class="section-number">8.2.7. </span>Result<a class="headerlink" href="#result" title="Permalink to this headline"></a></h1>
<div class="literal-block-wrapper docutils container" id="id2">
<div class="code-block-caption"><span class="caption-number">Listing 8.45 </span><span class="caption-text">Header of the <cite>abc</cite>-driver (<cite>src/app/driver/abc/abc.h</cite>)</span><a class="headerlink" href="#id2" title="Permalink to this code"></a></div>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="cm">/*========== Extern Function Prototypes =====================================*/</span><span class="w"></span>
<span class="linenos">2</span><span class="k">extern</span><span class="w"> </span><span class="kt">uint8_t</span><span class="w"> </span><span class="nf">ABC_DoThis</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span><span class="w"></span>
<span class="linenos">3</span>
<span class="linenos">4</span><span class="cm">/*========== Externalized Static Functions Prototypes (Unit Test) ===========*/</span><span class="w"></span>
<span class="linenos">5</span><span class="cp">#ifdef UNITY_UNIT_TEST</span>
<span class="linenos">6</span><span class="k">extern</span><span class="w"> </span><span class="kt">uint8_t</span><span class="w"> </span><span class="nf">TEST_ABC_DoSomethingElse</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">someArgument</span><span class="p">);</span><span class="w"></span>
<span class="linenos">7</span><span class="cp">#endif</span>
</pre></div>
</div>
</div>
<p>The wrapper function <cite>TEST_ABC_DoSomethingElse</cite> needs to be put inside the
<cite>UNITY_UNIT_TEST</cite> guard, so that it is not build during target builds.</p>
<div class="literal-block-wrapper docutils container" id="id3">
<div class="code-block-caption"><span class="caption-number">Listing 8.46 </span><span class="caption-text">Implementation of the <cite>abc</cite>-driver (<cite>src/app/driver/abc/abc.c</cite>)</span><a class="headerlink" href="#id3" title="Permalink to this code"></a></div>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="cm">/*========== Static Function Prototypes =====================================*/</span><span class="w"></span>
<span class="linenos"> 2</span><span class="k">static</span><span class="w"> </span><span class="kt">uint8_t</span><span class="w"> </span><span class="nf">ABC_DoSomethingElse</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">someArgument</span><span class="p">);</span><span class="w"></span>
<span class="linenos"> 3</span>
<span class="linenos"> 4</span><span class="cm">/*========== Static Function Implementations ================================*/</span><span class="w"></span>
<span class="linenos"> 5</span><span class="k">static</span><span class="w"> </span><span class="kt">uint8_t</span><span class="w"> </span><span class="nf">ABC_DoSomethingElse</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">someArgument</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 6</span><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">someArgument</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 7</span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 8</span>
<span class="linenos"> 9</span><span class="cm">/*========== Extern Function Implementations ================================*/</span><span class="w"></span>
<span class="linenos">10</span><span class="k">extern</span><span class="w"> </span><span class="kt">uint8_t</span><span class="w"> </span><span class="nf">ABC_DoThis</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="linenos">11</span><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">1u</span><span class="p">;</span><span class="w"></span>
<span class="linenos">12</span><span class="p">}</span><span class="w"></span>
<span class="linenos">13</span>
<span class="linenos">14</span><span class="cm">/*========== Externalized Static Function Implementations (Unit Test) =======*/</span><span class="w"></span>
<span class="linenos">15</span><span class="cp">#ifdef UNITY_UNIT_TEST</span>
<span class="linenos">16</span><span class="k">extern</span><span class="w"> </span><span class="kt">uint8_t</span><span class="w"> </span><span class="nf">TEST_ABC_DoSomethingElse</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">someArgument</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="linenos">17</span><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">ABC_DoSomethingElse</span><span class="p">(</span><span class="n">someArgument</span><span class="p">);</span><span class="w"></span>
<span class="linenos">18</span><span class="p">}</span><span class="w"></span>
<span class="linenos">19</span><span class="cp">#endif</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id4">
<div class="code-block-caption"><span class="caption-number">Listing 8.47 </span><span class="caption-text">Implementation of the <cite>abc</cite>-driver test
(<cite>tests/unit/app/driver/abc/test_abc.c</cite>)</span><a class="headerlink" href="#id4" title="Permalink to this code"></a></div>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="kt">void</span><span class="w"> </span><span class="nf">testABC_DoThis</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="linenos">2</span><span class="w">    </span><span class="cm">/* test code */</span><span class="w"></span>
<span class="linenos">3</span><span class="w">    </span><span class="n">ABC_DoThis</span><span class="p">();</span><span class="w"></span>
<span class="linenos">4</span><span class="p">};</span><span class="w"></span>
<span class="linenos">5</span>
<span class="linenos">6</span><span class="kt">void</span><span class="w"> </span><span class="nf">testABC_DoSomethingElse</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="linenos">7</span><span class="w">    </span><span class="cm">/* test code */</span><span class="w"></span>
<span class="linenos">8</span><span class="w">    </span><span class="n">TEST_ABC_DoSomethingElse</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span><span class="w"></span>
<span class="linenos">9</span><span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="how-to-exclude-files-from-unit-tests">
<h1><span class="section-number">8.2.8. </span>How to exclude files from unit tests<a class="headerlink" href="#how-to-exclude-files-from-unit-tests" title="Permalink to this headline"></a></h1>
<p>Normally, all files should be covered by a (at least empty) unit test.
If a certain file is not meant to be covered by unit tests, it has to be
excluded in several locations in order to suppress checking mechanisms in the
toolchain.</p>
<p>The configuration of ceedling is stored in a file called <code class="docutils literal notranslate"><span class="pre">project.yml</span></code>.
In this file the files that will not receive any coverage must be added to
<code class="docutils literal notranslate"><span class="pre">:uncovered_ignore_list:</span></code>.
Otherwise, ceedling will report uncovered files.</p>
<p>Additionally, the main wscript contains a mechanism that checks that every
file has a corresponding test file in the proper location.
Untested files have to be added to <code class="docutils literal notranslate"><span class="pre">excl</span></code> in <code class="docutils literal notranslate"><span class="pre">check_test_files(ctx)</span></code>.</p>
</div>
<div class="section" id="using-ceedling-directly">
<h1><span class="section-number">8.2.9. </span>Using ceedling directly<a class="headerlink" href="#using-ceedling-directly" title="Permalink to this headline"></a></h1>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Ceedling (the unit test runner that is used by this project) is wrapped by
the waf-toolchain.
The toolchain makes sure that the path handed to ceedling contains the
necessary applications and files, so without the wrapper extensive
knowledge of the project structure is helpful.</p>
<p>That being said, it is normally not necessary to directly execute ceedling
as the wrapper handles this.</p>
</div>
<p>The waf-script of this project executes always the complete unit test-suite.
This can take some time.
When developing or debugging a unit test, it might be beneficial to have finer
control over which test is executed.</p>
<p>For this and especially for debugging the unit test integration it is possible
to directly access ceedling.
It is therefore necessary for the shell from which ceedling is run that all
dependencies are available.
Especially, it is necessary that it is possible to find ceedling from the
current <code class="docutils literal notranslate"><span class="pre">PATH</span></code> of the shell in which this is attempted.
This will not be covered in this manual.</p>
<p>Once such a shell is available it also has to be made sure that all files that
are generated or adapted on-the-fly are available in the <code class="docutils literal notranslate"><span class="pre">build</span></code>-directory.
This can be ensured by executing the waf-task <code class="docutils literal notranslate"><span class="pre">build_unit_test</span></code> just until
ceedling is run by it.
After this step (it does not matter whether the task completes or is imported
after it has generated the dependencies) the following example can be executed.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp"># </span>go to the build directory of ceedling, assuming the current directory is
<span class="gp"># </span>the project root <span class="o">(</span>IMPORTANT, otherwise it will not work correctly<span class="o">)</span>
<span class="hll"><span class="go">cd build/unit_test/</span>
</span>
<span class="gp"># </span>interact directly with ceedling <span class="o">(</span>refer to ceedling manual <span class="k">for</span> details<span class="o">)</span>
<span class="gp"># </span>this line executes test_plausibility.c with coverage
<span class="hll"><span class="go">ceedling gcov:test_plausibility.c</span>
</span>
<span class="gp"># </span>should the current shell not be able to directly follow the ceedling.cmd
<span class="gp"># </span>file, it might be necessary to access the vendored ceedling directly:
<span class="hll"><span class="go">ruby ../../tools/vendor/ceedling/bin/ceedling gcov:test_plausibility.c</span>
</span></pre></div>
</div>
</div>


           </div>
          </div>
<a href="https://github.com/foxBMS/foxbms-2">
    <img style="position: absolute; top: 0; right: 0; border: 0;"
        src="../../_static/forkme.png" alt="Fork me on GitHub">
</a>

          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../configuration/without-halcogen_how-to.html" class="btn btn-neutral float-left" title="8.2.4. How to Use Generated Sources from HALCoGen" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../build-environment/build-environment_how-to.html" class="btn btn-neutral float-right" title="8.2.10. Changing and Extending the Build Environment" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2010 - 2023, Fraunhofer-Gesellschaft zur Foerderung der angewandten Forschung e.V. All rights reserved. See license section for further information.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>