<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>foxBMS: sps.c Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="style-sheet-file.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="foxbms250px.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">foxBMS
   &#160;<span id="projectnumber">1.5.0</span>
   </div>
   <div id="projectbrief">The foxBMS Battery Management System API Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('sps_8c_source.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">sps.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="sps_8c.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> * @copyright &amp;copy; 2010 - 2023, Fraunhofer-Gesellschaft zur Foerderung der angewandten Forschung e.V.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> * All rights reserved.</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> * SPDX-License-Identifier: BSD-3-Clause</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> * Redistribution and use in source and binary forms, with or without</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> * modification, are permitted provided that the following conditions are met:</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> * 1. Redistributions of source code must retain the above copyright notice, this</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> *    list of conditions and the following disclaimer.</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> * 2. Redistributions in binary form must reproduce the above copyright notice,</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> *    this list of conditions and the following disclaimer in the documentation</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> *    and/or other materials provided with the distribution.</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"> * 3. Neither the name of the copyright holder nor the names of its</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment"> *    contributors may be used to endorse or promote products derived from</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment"> *    this software without specific prior written permission.</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment"> * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment"> * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment"> * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment"> * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment"> * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment"> * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment"> * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment"> * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment"> * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="comment"> * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="comment"> * We kindly request you to use one or more of the following phrases to refer to</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="comment"> * foxBMS in your hardware, software, documentation or advertising materials:</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="comment"> * - &amp;Prime;This product uses parts of foxBMS&amp;reg;&amp;Prime;</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="comment"> * - &amp;Prime;This product includes parts of foxBMS&amp;reg;&amp;Prime;</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="comment"> * - &amp;Prime;This product is derived from foxBMS&amp;reg;&amp;Prime;</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="comment"> * @file    sps.c</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="comment"> * @author  foxBMS Team</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="comment"> * @date    2020-10-14 (date of creation)</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="comment"> * @updated 2023-02-03 (date of last update)</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="comment"> * @version v1.5.0</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="comment"> * @ingroup DRIVERS</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="comment"> * @prefix  SPS</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="comment"> * @brief   Driver for the smart power switches.</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160; </div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="comment">/*========== Includes =======================================================*/</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="general_8h.html">general.h</a>&quot;</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160; </div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="sps_8h.html">sps.h</a>&quot;</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160; </div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="database_8h.html">database.h</a>&quot;</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="io_8h.html">io.h</a>&quot;</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="mcu_8h.html">mcu.h</a>&quot;</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="os_8h.html">os.h</a>&quot;</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="pex_8h.html">pex.h</a>&quot;</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="spi_8h.html">spi.h</a>&quot;</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160; </div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="preprocessor">#include &lt;math.h&gt;</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="preprocessor">#include &lt;stdint.h&gt;</span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160; </div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="comment">/*========== Macros and Definitions =========================================*/</span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160; </div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="comment">/*========== Static Constant and Variable Definitions =======================*/</span><span class="comment"></span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="comment">/** state indicator of the state-machine */</span></div>
<div class="line"><a name="l00074"></a><span class="lineno"><a class="line" href="sps_8c.html#aa8e216a46ef6baaf22533059cf1af40b">   74</a></span>&#160;<span class="keyword">static</span> <a class="code" href="sps__cfg_8h.html#aead43b6ba741393f75cf0d4581fb7352">SPS_STATE_e</a> <a class="code" href="sps_8c.html#aa8e216a46ef6baaf22533059cf1af40b">sps_state</a> = <a class="code" href="sps__cfg_8h.html#aead43b6ba741393f75cf0d4581fb7352ad9094b68f7667003ebe3f713118f0d56">SPS_START</a>;</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="comment">/** timer for the state-machine */</span></div>
<div class="line"><a name="l00077"></a><span class="lineno"><a class="line" href="sps_8c.html#a909ae018ea80e7fe77d9467535aa6064">   77</a></span>&#160;<span class="keyword">static</span> uint8_t <a class="code" href="sps_8c.html#a909ae018ea80e7fe77d9467535aa6064">sps_timer</a> = 0;</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="comment">/** SPI buffer:</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="comment"> *  Tx part used to issue a write or read register command</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="comment"> *  Rx part is unused</span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="comment"> * @{</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00084"></a><span class="lineno"><a class="line" href="sps_8c.html#a9cd448ef6691417f41dbc970bd187c0f">   84</a></span>&#160;<span class="keyword">static</span> uint16_t <a class="code" href="sps_8c.html#a9cd448ef6691417f41dbc970bd187c0f">sps_spiTxRegisterBuffer</a>[<a class="code" href="sps__cfg_8h.html#a19a847c5bb138b8589f4fb980d428368">SPS_SPI_BUFFERSIZE</a>] = {0};</div>
<div class="line"><a name="l00085"></a><span class="lineno"><a class="line" href="sps_8c.html#a469394c3b1a16344fa2059b12b5fd1f8">   85</a></span>&#160;<span class="keyword">static</span> uint16_t <a class="code" href="sps_8c.html#a469394c3b1a16344fa2059b12b5fd1f8">sps_spiRxRegisterBuffer</a>[<a class="code" href="sps__cfg_8h.html#a19a847c5bb138b8589f4fb980d428368">SPS_SPI_BUFFERSIZE</a>] = {0};<span class="comment"></span></div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="comment">/**@}*/</span></div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="comment">/** SPI buffer:</span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="comment"> *  Tx part used to write to contactor output control register</span></div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="comment"> *  Rx part used to read answer from former read register command</span></div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="comment"> *  When a read register command was issued on the MOSI line,</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="comment"> *  the answers comes during the next command (read or write)</span></div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="comment"> *  on the MISO line</span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="comment"> *  (data sheet figure 6 page 9 in data sheet Rev. 2 - 11 September 2019)</span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="comment"> *  In the SPS driver, there are always two communications with the SPS IC</span></div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="comment"> *  each time the state machine is triggered:</span></div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="comment"> *  - first a register access (read or write)</span></div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="comment"> *  - then a write access to the channel output control register</span></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="comment"> *  This way, the channel outputs are switched each time the state machine</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="comment"> *  is triggered, and during the second access, if a read access was done</span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="comment"> *  before, the answer comes during the second access.</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="comment"> * @{</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00106"></a><span class="lineno"><a class="line" href="sps_8c.html#aad3d92feddb41e5253ba90a4e8a8646c">  106</a></span>&#160;<span class="keyword">static</span> uint16_t <a class="code" href="sps_8c.html#aad3d92feddb41e5253ba90a4e8a8646c">sps_spiTxWriteToChannelChannelControlRegister</a>[<a class="code" href="sps__cfg_8h.html#a19a847c5bb138b8589f4fb980d428368">SPS_SPI_BUFFERSIZE</a>] = {0};</div>
<div class="line"><a name="l00107"></a><span class="lineno"><a class="line" href="sps_8c.html#aba7afd3b8547adb7b798970df097448e">  107</a></span>&#160;<span class="keyword">static</span> uint16_t <a class="code" href="sps_8c.html#aba7afd3b8547adb7b798970df097448e">sps_spiRxReadAnswerDuringChannelControl</a>[<a class="code" href="sps__cfg_8h.html#a19a847c5bb138b8589f4fb980d428368">SPS_SPI_BUFFERSIZE</a>]       = {0};<span class="comment"></span></div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="comment">/**@}*/</span></div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="comment">/** amount of ticks to wait when toggling the reset */</span></div>
<div class="line"><a name="l00111"></a><span class="lineno"><a class="line" href="sps_8c.html#a0ca442a39de1cdb6a3707f0d648edf03">  111</a></span>&#160;<span class="preprocessor">#define SPS_RESET_WAIT_TIME_TICKS (5u)</span></div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160; </div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="comment">/*========== Extern Constant and Variable Definitions =======================*/</span></div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160; </div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="comment">/*========== Static Function Prototypes =====================================*/</span></div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="comment"> * @brief   Assemble a general command to the SPS ICs</span></div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="comment"> * @details For each call of the #SPS_Ctrl() function two transactions are</span></div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="comment"> *          sent. For details please read the documentation of #SPS_Transmit().</span></div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="comment"> *          This function has to be called before the transaction in order to</span></div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="comment"> *          update the TX buffer with a general command to the SPS chips in the</span></div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="comment"> *          daisy-chain. The actual command (and with that registers) that</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="comment"> *          shall be accessed and sent is controlled by the parameter that is</span></div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="comment"> *          passed on with this function. *</span></div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<span class="comment"> * @param[in]   action  decides which command should be used</span></div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="sps_8c.html#ad2fe38c253e1b0b76ac5b013a6ca9529">SPS_SetCommandTxBuffer</a>(<span class="keyword">const</span> <a class="code" href="sps__cfg_8h.html#a76b6b23c38d5458d28e42a7d6d0066e3">SPS_ACTION_e</a> action);</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<span class="comment"> * @brief   Assemble an update to the channel state of the SPS ICs</span></div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="comment"> * @details For each call of the #SPS_Ctrl() function two transactions are</span></div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="comment"> *          sent. For details please read the documentation of #SPS_Transmit().</span></div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="comment"> *          This function has to be called before the transaction in order to</span></div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="comment"> *          update the TX buffer with a channel configuration to the SPS chips</span></div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<span class="comment"> *          in the daisy-chain. The actual contactor or channel state is taken</span></div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="comment"> *          from the current state of the array #sps_channelStatus.</span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="sps_8c.html#a961f9c1c70ea7658911b9d91c209b0a0">SPS_SetContactorsTxBuffer</a>(<span class="keywordtype">void</span>);</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="comment"> * @brief   Transmit all assembled messages for one timeframe</span></div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;<span class="comment"> * @details This function leverages the fact that the SPS are connected in a</span></div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;<span class="comment"> *          &quot;daisy-chain&quot;. This way the chain acts as a large shift register.</span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;<span class="comment"> *          When sending a message into the chain it is clocked in until every</span></div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<span class="comment"> *          chip in the chain as its message. Then chip-select is released and</span></div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;<span class="comment"> *          the messages parsed. The answer is then assembled by the chip in</span></div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="comment"> *          its register and clocked out and received by the master with the</span></div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="comment"> *          next transmission.</span></div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;<span class="comment"> *          This function sends out a general command to each chip that has</span></div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;<span class="comment"> *          been assembled with #SPS_SetCommandTxBuffer(). The clocked out</span></div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="comment"> *          information that is received of this transaction is stored in a</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<span class="comment"> *          separate buffer and is the answer from the last transaction of the</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<span class="comment"> *          timeframe before the current one.</span></div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;<span class="comment"> *          After this transaction the answer to the general command is</span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;<span class="comment"> *          retrieved and the transmission is used to clock in an update of the</span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;<span class="comment"> *          state of the contactor channels. This update has been assembled</span></div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;<span class="comment"> *          before the call of this function with the function</span></div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;<span class="comment"> *          #SPS_SetContactorsTxBuffer().</span></div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;<span class="comment"> * @returns returns STD_OK if both transactions have been successful</span></div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;<span class="keyword">static</span> <a class="code" href="fstd__types_8h.html#a15c0d7d047c476ea033586165d49d398">STD_RETURN_TYPE_e</a> <a class="code" href="sps_8c.html#a3b0b5c63417cabc94688fd3cf78cd94c">SPS_Transmit</a>(<span class="keywordtype">void</span>);</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;<span class="comment"> * @brief   Read the current measurements for a specific output</span></div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;<span class="comment"> *          for all SPS ICs of the daisy-chain.</span></div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;<span class="comment"> * @details A read command must be issued for all SPS ICs in the daisy chain</span></div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;<span class="comment"> *          first. There is one register to read for each output.</span></div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;<span class="comment"> *          This funcion i used to retrieve the answer on the MISO line</span></div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;<span class="comment"> *          after the write command to the contactors output registers</span></div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;<span class="comment"> *          was made.</span></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;<span class="comment"> *          The result is written to SPS_CoilCurrent[].</span></div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;<span class="comment"> * @param[in]   outputAllDevices    Output (1 to 4) to be read. Value between</span></div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;<span class="comment"> *                                  1-4 instead of 0-3 to match numbering</span></div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;<span class="comment"> *                                  in data sheet.</span></div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;<span class="comment"> * @return  TODO</span></div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="sps_8c.html#a42bcd905bbbb0fd532ae59e3fd60faff">SPS_GlobalReadCurrent</a>(<span class="keyword">const</span> uint8_t outputAllDevices);</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;<span class="comment">/** initialize the IO ports for the contactor driver */</span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="sps_8c.html#a1d5464ca2118b329b74b051e73400a9e">SPS_InitializeIo</a>(<span class="keywordtype">void</span>);</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;<span class="comment">/** Init TX buffers with 0 */</span></div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="sps_8c.html#a6f00c269d0e20b749d8c7a9867ff4ba4">SPS_InitializeBuffers</a>(<span class="keywordtype">void</span>);<span class="comment"></span></div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;<span class="comment"> * @brief   Sets the SPI Tx buffer for a register read access</span></div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;<span class="comment"> *          for all SPS ICs of the daisy-chain.</span></div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;<span class="comment"> * @details The same command is issued for all SPS ICs in the daisy chain.</span></div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;<span class="comment"> *          This means that the same register is read</span></div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;<span class="comment"> *          to all SPS ICs in the daisy chain.</span></div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;<span class="comment"> * @param[in]   address             address of register accessed</span></div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;<span class="comment"> * @param[in]   controlOrDiagnostic type of read access,</span></div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;<span class="comment"> *                                  #SPS_READ_DIAGNOSTIC_REGISTER for diagnostic</span></div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;<span class="comment"> *                                  register, #SPS_READ_CONTROL_REGISTER for</span></div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;<span class="comment"> *                                  control register.</span></div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;<span class="comment"> * @param[out]  pSpiTxBuffer        Tx buffer used for the transmission</span></div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="sps_8c.html#a42c6ab326377a351def20a0d748afb4e">SPS_GlobalRegisterRead</a>(</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <span class="keyword">const</span> uint16_t address,</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    <span class="keyword">const</span> <a class="code" href="sps__cfg_8h.html#a66952ad6881dbb03ff90c23a8c14304b">SPS_READ_TYPE_e</a> controlOrDiagnostic,</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    uint16_t *pSpiTxBuffer);</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;<span class="comment"> * @brief   Sets the SPI Tx buffer for a register write access</span></div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;<span class="comment"> *          for all SPS ICs of the daisy-chain.</span></div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;<span class="comment"> * @details The same command is issued for all SPS ICs in the daisy chain.</span></div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;<span class="comment"> *          This means that the same value is written</span></div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;<span class="comment"> *          to all SPS ICs in the daisy chain.</span></div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;<span class="comment"> *          The current value in register is overwritten by writeData.</span></div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;<span class="comment"> * @param[in]   address         address of register accessed</span></div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;<span class="comment"> * @param[in]   writeData       data to write</span></div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;<span class="comment"> * @param[out]  pSpiTxBuffer    Tx buffer used for the transmission</span></div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="sps_8c.html#a7cfb82ab6fb733aaa092a2731ebb62b5">SPS_GlobalRegisterWrite</a>(<span class="keyword">const</span> uint16_t address, uint8_t writeData, uint16_t *pSpiTxBuffer);</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;<span class="comment"> * @brief   Sets the SPI Tx buffer for a register write access</span></div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;<span class="comment"> *          for a specific single SPS ICs in the daisy-chain.</span></div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;<span class="comment"> * @details The same command is issued for all SPS ICs in the daisy chain.</span></div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;<span class="comment"> *          This means that the same value is written</span></div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;<span class="comment"> *          to all SPS ICs in the daisy chain.</span></div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;<span class="comment"> *          This function does not set the Tx buffer to 0.</span></div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;<span class="comment"> *          This must be done manually.</span></div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;<span class="comment"> * @param[in]   device          device number in the daisy-chain to be written to.</span></div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;<span class="comment"> * @param[in]   address         address of register accessed</span></div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;<span class="comment"> * @param[in]   writeData       data to write. In case of read access, this</span></div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;<span class="comment"> *                              field is ignored and can be set to 0u.</span></div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;<span class="comment"> * @param[in]   writeType       defines whether the value in register should be</span></div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;<span class="comment"> *                              replaced by writeData, or or-ed with writeType,</span></div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;<span class="comment"> *                              or and-ed with writeData</span></div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;<span class="comment"> * @param[out]  pSpiTxBuffer    Tx buffer used for the transmission</span></div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="sps_8c.html#a5aa51bd041468fa63d6992cbcb57ad3a">SPS_SingleDeviceRegisterWrite</a>(</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    uint8_t device,</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    <span class="keyword">const</span> uint16_t address,</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    uint8_t writeData,</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    <a class="code" href="sps__cfg_8h.html#ab5684209f8940ad4a557daf5940f2000">SPS_WRITE_TYPE_e</a> writeType,</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    uint16_t *pSpiTxBuffer);</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;<span class="comment"> * @brief   Request the functional state of a channel</span></div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;<span class="comment"> * @details Pass a value of #SPS_CHANNEL_FUNCTION_e and a channel index number</span></div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;<span class="comment"> *          in order to request this state.</span></div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;<span class="comment"> * @param[in]   channelIndex    number of the channel that should be accessed;</span></div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;<span class="comment"> *                              do not confuse with contactor channel!</span></div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;<span class="comment"> * @param[in]   channelFunction requested functional state of the channel</span></div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="sps_8c.html#acbea831bc7b455fd71f259e3a9e4c0aa">SPS_RequestChannelState</a>(<a class="code" href="sps__types_8h.html#a3be98d4db19326a7c9d2b88106f9bb5c">SPS_CHANNEL_INDEX</a> channelIndex, <a class="code" href="sps__cfg_8h.html#a772a675a1df78516b3f94fc1bffe9f9b">SPS_CHANNEL_FUNCTION_e</a> channelFunction);</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160; </div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;<span class="comment">/*========== Static Function Implementations ================================*/</span></div>
<div class="line"><a name="l00256"></a><span class="lineno"><a class="line" href="sps_8c.html#a1d5464ca2118b329b74b051e73400a9e">  256</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="sps_8c.html#a1d5464ca2118b329b74b051e73400a9e">SPS_InitializeIo</a>(<span class="keywordtype">void</span>) {<span class="comment"></span></div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;<span class="comment">    /** Pin to drive reset line of SPS ICs */</span></div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    <a class="code" href="sps__cfg_8h.html#a51009665d17ba14eff56de758964abd0">SPS_RESET_GIO_PORT_DIR</a> |= (uint32)((uint32)1u &lt;&lt; <a class="code" href="sps__cfg_8h.html#acb787370c3be5234db896a6b3e0822dc">SPS_RESET_PIN</a>);<span class="comment"></span></div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;<span class="comment">    /** Pin to drive Chip Select line of SPS ICs */</span></div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    <a class="code" href="spi__cfg_8h.html#ada96dfd415aaa9bd52a00db0bfc4a8d7">SPI_SPS_CS_GIOPORT_DIR</a> |= (uint32)((uint32)1u &lt;&lt; <a class="code" href="spi__cfg_8h.html#af3a362a0506f568e7a64f0d6e5dd1a8b">SPI_SPS_CS_PIN</a>);</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160; </div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    <span class="comment">/* set feedback enable as output */</span></div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    <a class="code" href="general_8h.html#aa1d7e443c417cd6a08c53ae102c9d6be">GEN_SET_BIT</a>(<a class="code" href="sps__cfg_8h.html#a04d85020d971bab09525b81d24f9d472">SPS_FEEDBACK_GIO_PORT_DIR</a>, <a class="code" href="sps__cfg_8h.html#af051e3fa16bf75f35ec7627a1467105c">SPS_FEEDBACK_PIN</a>);</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    <span class="comment">/* enable output on feedback enable */</span></div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    <a class="code" href="io_8c.html#a7bfc1c1b5a7779778a23ad040043a169">IO_PinSet</a>(&amp;<a class="code" href="sps__cfg_8h.html#a4e3fb9083189caf75823eddee29484cb">SPS_FEEDBACK_GIO_PORT</a>, <a class="code" href="sps__cfg_8h.html#af051e3fa16bf75f35ec7627a1467105c">SPS_FEEDBACK_PIN</a>);</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;}</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160; </div>
<div class="line"><a name="l00268"></a><span class="lineno"><a class="line" href="sps_8c.html#a42c6ab326377a351def20a0d748afb4e">  268</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="sps_8c.html#a42c6ab326377a351def20a0d748afb4e">SPS_GlobalRegisterRead</a>(</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    <span class="keyword">const</span> uint16_t address,</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    <span class="keyword">const</span> <a class="code" href="sps__cfg_8h.html#a66952ad6881dbb03ff90c23a8c14304b">SPS_READ_TYPE_e</a> controlOrDiagnostic,</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    uint16_t *pSpiTxBuffer) {</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    <a class="code" href="fassert_8h.html#a2852c8164c3a4a492aa798e59180996d">FAS_ASSERT</a>(pSpiTxBuffer != <a class="code" href="fstd__types_8h.html#a530f11a96e508d171d28564c8dc20942">NULL_PTR</a>);</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    <span class="keywordflow">if</span> (controlOrDiagnostic == <a class="code" href="sps__cfg_8h.html#a66952ad6881dbb03ff90c23a8c14304ba06cd0748e818f9663dc5ee08c0df7fd5">SPS_READ_DIAGNOSTIC_REGISTER</a>) {</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;        <span class="keywordflow">for</span> (uint8_t i = 0u; i &lt; <a class="code" href="sps__cfg_8h.html#a19a847c5bb138b8589f4fb980d428368">SPS_SPI_BUFFERSIZE</a>; i++) {</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;            <span class="comment">/* R/W bit = 0 to read */</span></div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;            pSpiTxBuffer[i] = (address &lt;&lt; <a class="code" href="sps__cfg_8h.html#ab4755dce2c87f40fad9cbfce1046f84c">SPS_ADDRESS_BIT_START</a>); <span class="comment">/* Register address */</span></div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;        }</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (controlOrDiagnostic == <a class="code" href="sps__cfg_8h.html#a66952ad6881dbb03ff90c23a8c14304ba8185311b4cacfc4b46e7c43d60085f36">SPS_READ_CONTROL_REGISTER</a>) {</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;        <span class="keywordflow">for</span> (uint8_t i = 0u; i &lt; <a class="code" href="sps__cfg_8h.html#a19a847c5bb138b8589f4fb980d428368">SPS_SPI_BUFFERSIZE</a>; i++) {</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;            pSpiTxBuffer[i] = (address &lt;&lt; <a class="code" href="sps__cfg_8h.html#ab4755dce2c87f40fad9cbfce1046f84c">SPS_ADDRESS_BIT_START</a>) |          <span class="comment">/* Register address */</span></div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;                              ((uint16_t)1u &lt;&lt; <a class="code" href="sps__cfg_8h.html#ac509de4c0f0842d856654e1336840c99">SPS_DIAG_CTRL_BIT_POSITION</a>); <span class="comment">/* Select diagnostic register */</span></div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;        }</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;        <span class="comment">/* Invalid access type */</span></div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;        <a class="code" href="fassert_8h.html#a2852c8164c3a4a492aa798e59180996d">FAS_ASSERT</a>(<a class="code" href="fassert_8h.html#a75272b106cfd6946edcd4b19f7e8f40f">FAS_TRAP</a>);</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    }</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;}</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160; </div>
<div class="line"><a name="l00289"></a><span class="lineno"><a class="line" href="sps_8c.html#a7cfb82ab6fb733aaa092a2731ebb62b5">  289</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="sps_8c.html#a7cfb82ab6fb733aaa092a2731ebb62b5">SPS_GlobalRegisterWrite</a>(<span class="keyword">const</span> uint16_t address, uint8_t writeData, uint16_t *pSpiTxBuffer) {</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    <a class="code" href="fassert_8h.html#a2852c8164c3a4a492aa798e59180996d">FAS_ASSERT</a>(pSpiTxBuffer != <a class="code" href="fstd__types_8h.html#a530f11a96e508d171d28564c8dc20942">NULL_PTR</a>);</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    <span class="keywordflow">for</span> (uint8_t i = 0u; i &lt; <a class="code" href="sps__cfg_8h.html#a19a847c5bb138b8589f4fb980d428368">SPS_SPI_BUFFERSIZE</a>; i++) {</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;        pSpiTxBuffer[i] = ((uint16_t)1u &lt;&lt; <a class="code" href="sps__cfg_8h.html#a96afab9c1222ec3a0513de27369fbd5c">SPS_RW_BIT_POSITION</a>) | <span class="comment">/* R/W bit = 1 to write */</span></div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;                          (address &lt;&lt; <a class="code" href="sps__cfg_8h.html#ab4755dce2c87f40fad9cbfce1046f84c">SPS_ADDRESS_BIT_START</a>) |    <span class="comment">/* Register address */</span></div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;                          (writeData);                            <span class="comment">/* Data to write */</span></div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    }</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;}</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160; </div>
<div class="line"><a name="l00298"></a><span class="lineno"><a class="line" href="sps_8c.html#a5aa51bd041468fa63d6992cbcb57ad3a">  298</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="sps_8c.html#a5aa51bd041468fa63d6992cbcb57ad3a">SPS_SingleDeviceRegisterWrite</a>(</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    uint8_t device,</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    <span class="keyword">const</span> uint16_t address,</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    uint8_t writeData,</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    <a class="code" href="sps__cfg_8h.html#ab5684209f8940ad4a557daf5940f2000">SPS_WRITE_TYPE_e</a> writeType,</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    uint16_t *pSpiTxBuffer) {</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    <a class="code" href="fassert_8h.html#a2852c8164c3a4a492aa798e59180996d">FAS_ASSERT</a>(pSpiTxBuffer != <a class="code" href="fstd__types_8h.html#a530f11a96e508d171d28564c8dc20942">NULL_PTR</a>);</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    <span class="comment">/* The index (SPS_SPI_BUFFERSIZE - 1 - device) is used because the devices</span></div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;<span class="comment">       in the daisy-chain are accessed like a shift register. The first message</span></div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;<span class="comment">       sent to the daisy-chain will arrive to the last device and the last</span></div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;<span class="comment">       message will arrive to the first device. To communicate with</span></div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;<span class="comment">       devices 0-1-2 in the daisy-chain, the sequence 2-1-0 has to be sent.</span></div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    <span class="comment">/* Keep the previous data which lies in the lower 8 bits */</span></div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    uint8_t preceedingWriteData = (uint8_t)((pSpiTxBuffer[(<a class="code" href="sps__cfg_8h.html#a19a847c5bb138b8589f4fb980d428368">SPS_SPI_BUFFERSIZE</a> - 1u - device)]) &amp; 0xFFu);</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    <span class="comment">/* Clear write data which will be replaced */</span></div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    pSpiTxBuffer[(<a class="code" href="sps__cfg_8h.html#a19a847c5bb138b8589f4fb980d428368">SPS_SPI_BUFFERSIZE</a> - 1u - device)] &amp;= 0xFF00u;</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    <span class="comment">/* Write R/W bit and address in the higher 8 bits */</span></div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    pSpiTxBuffer[(<a class="code" href="sps__cfg_8h.html#a19a847c5bb138b8589f4fb980d428368">SPS_SPI_BUFFERSIZE</a> - 1u - device)] = (uint16_t)(</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;        ((uint16_t)1u &lt;&lt; <a class="code" href="sps__cfg_8h.html#a96afab9c1222ec3a0513de27369fbd5c">SPS_RW_BIT_POSITION</a>) | <span class="comment">/* R/W bit = 1 to write */</span></div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;        (address &lt;&lt; <a class="code" href="sps__cfg_8h.html#ab4755dce2c87f40fad9cbfce1046f84c">SPS_ADDRESS_BIT_START</a>));    <span class="comment">/* Register address */</span></div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160; </div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    <span class="keywordflow">if</span> (writeType == <a class="code" href="sps__cfg_8h.html#ab5684209f8940ad4a557daf5940f2000aa005c5250bd7f4416cb541a163b4358e">SPS_replaceCurrentValue</a>) {</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;        pSpiTxBuffer[(<a class="code" href="sps__cfg_8h.html#a19a847c5bb138b8589f4fb980d428368">SPS_SPI_BUFFERSIZE</a> - 1u - device)] |= (uint16_t)writeData; <span class="comment">/* Data to write */</span></div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (writeType == <a class="code" href="sps__cfg_8h.html#ab5684209f8940ad4a557daf5940f2000a74e8ab6c1744e3332cc7aa44086c23af">SPS_orWithCurrentValue</a>) {</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;        pSpiTxBuffer[(<a class="code" href="sps__cfg_8h.html#a19a847c5bb138b8589f4fb980d428368">SPS_SPI_BUFFERSIZE</a> - 1u - device)] |=</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;            ((uint16_t)preceedingWriteData | (uint16_t)writeData); <span class="comment">/* Data to write */</span></div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (writeType == <a class="code" href="sps__cfg_8h.html#ab5684209f8940ad4a557daf5940f2000a4852b850ae0ab59c279617e22012757a">SPS_andWithCurrentValue</a>) {</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;        pSpiTxBuffer[(<a class="code" href="sps__cfg_8h.html#a19a847c5bb138b8589f4fb980d428368">SPS_SPI_BUFFERSIZE</a> - 1u - device)] |=</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;            ((uint16_t)preceedingWriteData &amp; (uint16_t)writeData); <span class="comment">/* Data to write */</span></div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;        <span class="comment">/* Invalid write type */</span></div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;        <a class="code" href="fassert_8h.html#a2852c8164c3a4a492aa798e59180996d">FAS_ASSERT</a>(<a class="code" href="fassert_8h.html#a75272b106cfd6946edcd4b19f7e8f40f">FAS_TRAP</a>);</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    }</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;}</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160; </div>
<div class="line"><a name="l00334"></a><span class="lineno"><a class="line" href="sps_8c.html#ad2fe38c253e1b0b76ac5b013a6ca9529">  334</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="sps_8c.html#ad2fe38c253e1b0b76ac5b013a6ca9529">SPS_SetCommandTxBuffer</a>(<span class="keyword">const</span> <a class="code" href="sps__cfg_8h.html#a76b6b23c38d5458d28e42a7d6d0066e3">SPS_ACTION_e</a> action) {</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    <span class="keywordflow">switch</span> (action) {</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="sps__cfg_8h.html#a76b6b23c38d5458d28e42a7d6d0066e3ae732d443069c2bc23c48e521e237f377">SPS_ACTION_CONFIGURE_CONTROL_REGISTER</a>:</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;            <a class="code" href="sps_8c.html#a7cfb82ab6fb733aaa092a2731ebb62b5">SPS_GlobalRegisterWrite</a>(</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;                <a class="code" href="sps__cfg_8h.html#a17c0232507d950b74d2bf9320d27280d">SPS_GLOBAL_CONTROL_REGISTER_ADDRESS</a>,</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;                <span class="comment">/* transition to Normal mode and set drive strength to strong (This is required for high speed!) */</span></div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;                (<a class="code" href="sps__cfg_8h.html#a23a2845ab7c14dcb86c1d379be18dce7">SPS_NORMAL_MODE</a> &lt;&lt; <a class="code" href="sps__cfg_8h.html#a67cc38d2157a691ae28ae894630ea9ab">SPS_MODE_BIT_START</a>) | (<a class="code" href="sps__cfg_8h.html#a2f33a8f43fcd966ca8255f5e28ccc29c">SPS_STRONG_DRIVE</a> &lt;&lt; <a class="code" href="sps__cfg_8h.html#a57257c0aabedd55719e5ded0eb38f760">SPS_DRIVE_STRENGTH_BIT_START</a>),</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;                <a class="code" href="sps_8c.html#a9cd448ef6691417f41dbc970bd187c0f">sps_spiTxRegisterBuffer</a>);</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160; </div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="sps__cfg_8h.html#a76b6b23c38d5458d28e42a7d6d0066e3ab4fd3558cd6caae3a631f5fa282d5525">SPS_ACTION_TRIGGER_CURRENT_MEASUREMENT</a>:</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;            <a class="code" href="sps_8c.html#a7cfb82ab6fb733aaa092a2731ebb62b5">SPS_GlobalRegisterWrite</a>(</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;                <a class="code" href="sps__cfg_8h.html#aea2f18a1c6dea24c5d5c7670a2f8cde6">SPS_C_CONTROL_REGISTER_ADDRESS</a>,</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;                0x000F, <span class="comment">/* Measure all four outputs for current and voltage on demand*/</span></div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;                <a class="code" href="sps_8c.html#a9cd448ef6691417f41dbc970bd187c0f">sps_spiTxRegisterBuffer</a>);</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160; </div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="sps__cfg_8h.html#a76b6b23c38d5458d28e42a7d6d0066e3a9f594af1aa579b9b8943317ced8d3c51">SPS_ACTION_READ_CURRENT_MEASUREMENT1</a>:</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;            <a class="code" href="sps_8c.html#a42c6ab326377a351def20a0d748afb4e">SPS_GlobalRegisterRead</a>(</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;                <a class="code" href="sps__cfg_8h.html#a1cf3886fd91ddbd7fc6eba0bae39f431">SPS_OD_IOUT1_DIAG_REGISTER_ADDRESS</a>, <a class="code" href="sps__cfg_8h.html#a66952ad6881dbb03ff90c23a8c14304ba06cd0748e818f9663dc5ee08c0df7fd5">SPS_READ_DIAGNOSTIC_REGISTER</a>, <a class="code" href="sps_8c.html#a9cd448ef6691417f41dbc970bd187c0f">sps_spiTxRegisterBuffer</a>);</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160; </div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="sps__cfg_8h.html#a76b6b23c38d5458d28e42a7d6d0066e3a74a81fbd9d1eea1827834643cdf54bb7">SPS_ACTION_READ_CURRENT_MEASUREMENT2</a>:</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;            <a class="code" href="sps_8c.html#a42c6ab326377a351def20a0d748afb4e">SPS_GlobalRegisterRead</a>(</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;                <a class="code" href="sps__cfg_8h.html#a68ca3a125ff5f0e26b70a06c866649bc">SPS_OD_IOUT2_DIAG_REGISTER_ADDRESS</a>, <a class="code" href="sps__cfg_8h.html#a66952ad6881dbb03ff90c23a8c14304ba06cd0748e818f9663dc5ee08c0df7fd5">SPS_READ_DIAGNOSTIC_REGISTER</a>, <a class="code" href="sps_8c.html#a9cd448ef6691417f41dbc970bd187c0f">sps_spiTxRegisterBuffer</a>);</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160; </div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="sps__cfg_8h.html#a76b6b23c38d5458d28e42a7d6d0066e3af475469345e6367755c32fed13f3fdf8">SPS_ACTION_READ_CURRENT_MEASUREMENT3</a>:</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;            <a class="code" href="sps_8c.html#a42c6ab326377a351def20a0d748afb4e">SPS_GlobalRegisterRead</a>(</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;                <a class="code" href="sps__cfg_8h.html#ab0da4fd54ed57610304f15d47036a2cb">SPS_OD_IOUT3_DIAG_REGISTER_ADDRESS</a>, <a class="code" href="sps__cfg_8h.html#a66952ad6881dbb03ff90c23a8c14304ba06cd0748e818f9663dc5ee08c0df7fd5">SPS_READ_DIAGNOSTIC_REGISTER</a>, <a class="code" href="sps_8c.html#a9cd448ef6691417f41dbc970bd187c0f">sps_spiTxRegisterBuffer</a>);</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160; </div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="sps__cfg_8h.html#a76b6b23c38d5458d28e42a7d6d0066e3ad698f1014e8712f5b39908fd8a39b1db">SPS_ACTION_READ_CURRENT_MEASUREMENT4</a>:</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;            <a class="code" href="sps_8c.html#a42c6ab326377a351def20a0d748afb4e">SPS_GlobalRegisterRead</a>(</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;                <a class="code" href="sps__cfg_8h.html#a9d6ab6896c0fca27ebb9e7c3188f56cd">SPS_OD_IOUT4_DIAG_REGISTER_ADDRESS</a>, <a class="code" href="sps__cfg_8h.html#a66952ad6881dbb03ff90c23a8c14304ba06cd0748e818f9663dc5ee08c0df7fd5">SPS_READ_DIAGNOSTIC_REGISTER</a>, <a class="code" href="sps_8c.html#a9cd448ef6691417f41dbc970bd187c0f">sps_spiTxRegisterBuffer</a>);</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160; </div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="sps__cfg_8h.html#a76b6b23c38d5458d28e42a7d6d0066e3ad19a6ce26371cd07b0ddc1e667b9413e">SPS_ACTION_READ_EN_IRQ_PIN</a>:</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;            <a class="code" href="sps_8c.html#a42c6ab326377a351def20a0d748afb4e">SPS_GlobalRegisterRead</a>(</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;                <a class="code" href="sps__cfg_8h.html#a16412f95bac9f0f42a18f1b797528e72">SPS_ISR_IRQ_DIAG_REGISTER_ADDRESS</a>, <a class="code" href="sps__cfg_8h.html#a66952ad6881dbb03ff90c23a8c14304ba06cd0748e818f9663dc5ee08c0df7fd5">SPS_READ_DIAGNOSTIC_REGISTER</a>, <a class="code" href="sps_8c.html#a9cd448ef6691417f41dbc970bd187c0f">sps_spiTxRegisterBuffer</a>);</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160; </div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;            <span class="keywordflow">for</span> (uint8_t i = 0u; i &lt; <a class="code" href="sps__cfg_8h.html#a19a847c5bb138b8589f4fb980d428368">SPS_SPI_BUFFERSIZE</a>; i++) {</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;                <a class="code" href="sps_8c.html#a9cd448ef6691417f41dbc970bd187c0f">sps_spiTxRegisterBuffer</a>[i] = 0x00;</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;            }</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    }</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;}</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160; </div>
<div class="line"><a name="l00384"></a><span class="lineno"><a class="line" href="sps_8c.html#a6f00c269d0e20b749d8c7a9867ff4ba4">  384</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="sps_8c.html#a6f00c269d0e20b749d8c7a9867ff4ba4">SPS_InitializeBuffers</a>(<span class="keywordtype">void</span>) {</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    <span class="keywordflow">for</span> (uint8_t i = 0u; i &lt; <a class="code" href="sps__cfg_8h.html#a19a847c5bb138b8589f4fb980d428368">SPS_SPI_BUFFERSIZE</a>; i++) {</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;        <a class="code" href="sps_8c.html#a9cd448ef6691417f41dbc970bd187c0f">sps_spiTxRegisterBuffer</a>[i] = 0u;</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;        <a class="code" href="sps_8c.html#a5aa51bd041468fa63d6992cbcb57ad3a">SPS_SingleDeviceRegisterWrite</a>(</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;            i,</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;            <a class="code" href="sps__cfg_8h.html#a1463fdf58d92c507cae99105b0ba260d">SPS_OUTPUT_CONTROL_REGISTER_ADDRESS</a>,</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;            0u,                      <span class="comment">/* data to write, output control */</span></div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;            <a class="code" href="sps__cfg_8h.html#ab5684209f8940ad4a557daf5940f2000aa005c5250bd7f4416cb541a163b4358e">SPS_replaceCurrentValue</a>, <span class="comment">/* replace because we want to initialize with 0 */</span></div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;            <a class="code" href="sps_8c.html#aad3d92feddb41e5253ba90a4e8a8646c">sps_spiTxWriteToChannelChannelControlRegister</a>);</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    }</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;}</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160; </div>
<div class="line"><a name="l00396"></a><span class="lineno"><a class="line" href="sps_8c.html#a961f9c1c70ea7658911b9d91c209b0a0">  396</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="sps_8c.html#a961f9c1c70ea7658911b9d91c209b0a0">SPS_SetContactorsTxBuffer</a>(<span class="keywordtype">void</span>) {</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="sps__types_8h.html#a3be98d4db19326a7c9d2b88106f9bb5c">SPS_CHANNEL_INDEX</a> channel = 0u; channel &lt; <a class="code" href="sps__cfg_8h.html#a18e7ce184e9886a8adcab59383686127">SPS_NR_OF_AVAILABLE_SPS_CHANNELS</a>; channel++) {</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;        <a class="code" href="structSPS__CHANNEL__STATE__s.html">SPS_CHANNEL_STATE_s</a> *pChannel = &amp;<a class="code" href="sps__cfg_8c.html#a4b14f4d375070a68dc76dc6a69b0ce37">sps_channelStatus</a>[channel];</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;        <span class="comment">/* If channel state is changed by request, process request */</span></div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;        <span class="keywordflow">if</span> (pChannel-&gt;<a class="code" href="structSPS__CHANNEL__STATE__s.html#a1aad5ce49e68ec11fa0177e89dd92b47">channelRequested</a> != pChannel-&gt;<a class="code" href="structSPS__CHANNEL__STATE__s.html#a7477f1ca16bbf67642f1c9ca002c44c1">channel</a>) {</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;            pChannel-&gt;<a class="code" href="structSPS__CHANNEL__STATE__s.html#a7477f1ca16bbf67642f1c9ca002c44c1">channel</a> = pChannel-&gt;<a class="code" href="structSPS__CHANNEL__STATE__s.html#a1aad5ce49e68ec11fa0177e89dd92b47">channelRequested</a>;</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;<span class="comment">            /**</span></div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;<span class="comment">             * With this computation, the contactor number is linked to the SPS IC</span></div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;<span class="comment">             * position in the daisy-chain which is driving this contactor.</span></div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;<span class="comment">             * Contactor 0-3: SPS IC 0</span></div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;<span class="comment">             * Contactor 4-7: SPS IC 1</span></div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;<span class="comment">             * Contactor 8-11: SPS IC 2</span></div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;<span class="comment">             * ...</span></div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;<span class="comment">             */</span></div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;            uint8_t spsDevicePositionInDaisyChain = channel / <a class="code" href="sps__cfg_8h.html#a8128594a1a94a1cd845fc67a496f83b3">SPS_NR_CONTACTOR_PER_IC</a>;</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160; </div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;            <span class="keywordflow">if</span> (pChannel-&gt;<a class="code" href="structSPS__CHANNEL__STATE__s.html#a1aad5ce49e68ec11fa0177e89dd92b47">channelRequested</a> == <a class="code" href="sps__cfg_8h.html#a772a675a1df78516b3f94fc1bffe9f9ba72f33b2df63ed778bc22b10619a51030">SPS_CHANNEL_ON</a>) {</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;                <a class="code" href="sps_8c.html#a5aa51bd041468fa63d6992cbcb57ad3a">SPS_SingleDeviceRegisterWrite</a>(</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;                    spsDevicePositionInDaisyChain,</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;                    <a class="code" href="sps__cfg_8h.html#a1463fdf58d92c507cae99105b0ba260d">SPS_OUTPUT_CONTROL_REGISTER_ADDRESS</a>,</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;                    1u &lt;&lt; (channel % <a class="code" href="sps__cfg_8h.html#a8128594a1a94a1cd845fc67a496f83b3">SPS_NR_CONTACTOR_PER_IC</a>), <span class="comment">/* data to write, output control */</span></div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;                    <a class="code" href="sps__cfg_8h.html#ab5684209f8940ad4a557daf5940f2000a74e8ab6c1744e3332cc7aa44086c23af">SPS_orWithCurrentValue</a>,                    <span class="comment">/* OR because we want to set additional bits to 1 */</span></div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;                    <a class="code" href="sps_8c.html#aad3d92feddb41e5253ba90a4e8a8646c">sps_spiTxWriteToChannelChannelControlRegister</a>);</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pChannel-&gt;<a class="code" href="structSPS__CHANNEL__STATE__s.html#a1aad5ce49e68ec11fa0177e89dd92b47">channelRequested</a> == <a class="code" href="sps__cfg_8h.html#a772a675a1df78516b3f94fc1bffe9f9baddc53f5d59c41a9cd9d16f7879bef87e">SPS_CHANNEL_OFF</a>) {</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;                uint8_t writeData = (~(1u &lt;&lt; (channel % <a class="code" href="sps__cfg_8h.html#a8128594a1a94a1cd845fc67a496f83b3">SPS_NR_CONTACTOR_PER_IC</a>)) &amp; 0xFFu);</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;                <a class="code" href="sps_8c.html#a5aa51bd041468fa63d6992cbcb57ad3a">SPS_SingleDeviceRegisterWrite</a>(</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;                    spsDevicePositionInDaisyChain,</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;                    <a class="code" href="sps__cfg_8h.html#a1463fdf58d92c507cae99105b0ba260d">SPS_OUTPUT_CONTROL_REGISTER_ADDRESS</a>,</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;                    writeData,               <span class="comment">/* data to write, output control */</span></div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;                    <a class="code" href="sps__cfg_8h.html#ab5684209f8940ad4a557daf5940f2000a4852b850ae0ab59c279617e22012757a">SPS_andWithCurrentValue</a>, <span class="comment">/* AND because we want to set additional bits to 0 */</span></div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;                    <a class="code" href="sps_8c.html#aad3d92feddb41e5253ba90a4e8a8646c">sps_spiTxWriteToChannelChannelControlRegister</a>);</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;                <span class="comment">/* invalid entry in sps_channelStatus! */</span></div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;                <a class="code" href="fassert_8h.html#a2852c8164c3a4a492aa798e59180996d">FAS_ASSERT</a>(<a class="code" href="fassert_8h.html#a75272b106cfd6946edcd4b19f7e8f40f">FAS_TRAP</a>);</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;            }</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;        }</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    }</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;}</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160; </div>
<div class="line"><a name="l00436"></a><span class="lineno"><a class="line" href="sps_8c.html#a3b0b5c63417cabc94688fd3cf78cd94c">  436</a></span>&#160;<span class="keyword">static</span> <a class="code" href="fstd__types_8h.html#a15c0d7d047c476ea033586165d49d398">STD_RETURN_TYPE_e</a> <a class="code" href="sps_8c.html#a3b0b5c63417cabc94688fd3cf78cd94c">SPS_Transmit</a>(<span class="keywordtype">void</span>) {</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    <a class="code" href="fstd__types_8h.html#a15c0d7d047c476ea033586165d49d398">STD_RETURN_TYPE_e</a> retVal1 = <a class="code" href="spi_8c.html#ac84bc8424de860e2cd89fea2e89dd89a">SPI_TransmitReceiveData</a>(</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;        &amp;<a class="code" href="spi__cfg_8c.html#ae777d1f7b7054adb0a2d4b5862297dd6">spi_spsInterface</a>, <a class="code" href="sps_8c.html#a9cd448ef6691417f41dbc970bd187c0f">sps_spiTxRegisterBuffer</a>, <a class="code" href="sps_8c.html#a469394c3b1a16344fa2059b12b5fd1f8">sps_spiRxRegisterBuffer</a>, <a class="code" href="sps__cfg_8h.html#a19a847c5bb138b8589f4fb980d428368">SPS_SPI_BUFFERSIZE</a>);</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160; </div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    <span class="comment">/* The chip select has to be high for at least 300ns according to data sheet. This code delays</span></div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;<span class="comment">       for the smallest time available in #MCU_Delay_us() which is 1us. After this time we can</span></div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;<span class="comment">       be sure that the SPI interface is able to receive again. */</span></div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    <a class="code" href="mcu_8c.html#a9cd55b20e69a018ff26f46a5c9975647">MCU_Delay_us</a>(1u);</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160; </div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;    <a class="code" href="fstd__types_8h.html#a15c0d7d047c476ea033586165d49d398">STD_RETURN_TYPE_e</a> retVal2 = <a class="code" href="spi_8c.html#ac84bc8424de860e2cd89fea2e89dd89a">SPI_TransmitReceiveData</a>(</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;        &amp;<a class="code" href="spi__cfg_8c.html#ae777d1f7b7054adb0a2d4b5862297dd6">spi_spsInterface</a>,</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;        <a class="code" href="sps_8c.html#aad3d92feddb41e5253ba90a4e8a8646c">sps_spiTxWriteToChannelChannelControlRegister</a>,</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;        <a class="code" href="sps_8c.html#aba7afd3b8547adb7b798970df097448e">sps_spiRxReadAnswerDuringChannelControl</a>,</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;        <a class="code" href="sps__cfg_8h.html#a19a847c5bb138b8589f4fb980d428368">SPS_SPI_BUFFERSIZE</a>);</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160; </div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;    <a class="code" href="fstd__types_8h.html#a15c0d7d047c476ea033586165d49d398">STD_RETURN_TYPE_e</a> retVal = <a class="code" href="fstd__types_8h.html#a15c0d7d047c476ea033586165d49d398a4bf9cb78ab5492c2a541881d4f426bdc">STD_NOT_OK</a>;</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    <span class="keywordflow">if</span> ((retVal1 == <a class="code" href="fstd__types_8h.html#a15c0d7d047c476ea033586165d49d398af8db2ffc453da17ecb1b56a059be0a5f">STD_OK</a>) &amp;&amp; (retVal2 == <a class="code" href="fstd__types_8h.html#a15c0d7d047c476ea033586165d49d398af8db2ffc453da17ecb1b56a059be0a5f">STD_OK</a>)) {</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;        retVal = <a class="code" href="fstd__types_8h.html#a15c0d7d047c476ea033586165d49d398af8db2ffc453da17ecb1b56a059be0a5f">STD_OK</a>;</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    }</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    <span class="keywordflow">return</span> retVal;</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;}</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160; </div>
<div class="line"><a name="l00458"></a><span class="lineno"><a class="line" href="sps_8c.html#a42bcd905bbbb0fd532ae59e3fd60faff">  458</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="sps_8c.html#a42bcd905bbbb0fd532ae59e3fd60faff">SPS_GlobalReadCurrent</a>(<span class="keyword">const</span> uint8_t outputAllDevices) {</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    <span class="comment">/* outputAllDevices has to be 1, 2, 3 or 4 */</span></div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    <a class="code" href="fassert_8h.html#a2852c8164c3a4a492aa798e59180996d">FAS_ASSERT</a>((outputAllDevices &gt; 0u) &amp;&amp; (outputAllDevices &lt;= <a class="code" href="sps__cfg_8h.html#a8128594a1a94a1cd845fc67a496f83b3">SPS_NR_CONTACTOR_PER_IC</a>));</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="sps__types_8h.html#a3be98d4db19326a7c9d2b88106f9bb5c">SPS_CHANNEL_INDEX</a> channel = 0u; channel &lt; <a class="code" href="sps__cfg_8h.html#a18e7ce184e9886a8adcab59383686127">SPS_NR_OF_AVAILABLE_SPS_CHANNELS</a>; channel++) {</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;        <span class="keywordflow">if</span> ((channel % <a class="code" href="sps__cfg_8h.html#a8128594a1a94a1cd845fc67a496f83b3">SPS_NR_CONTACTOR_PER_IC</a>) == (outputAllDevices - 1u)) {</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;            uint8_t buffer_position = channel / <a class="code" href="sps__cfg_8h.html#a8128594a1a94a1cd845fc67a496f83b3">SPS_NR_CONTACTOR_PER_IC</a>;</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;            uint16_t buffer = <a class="code" href="sps_8c.html#aba7afd3b8547adb7b798970df097448e">sps_spiRxReadAnswerDuringChannelControl</a>[(<a class="code" href="sps__cfg_8h.html#a19a847c5bb138b8589f4fb980d428368">SPS_SPI_BUFFERSIZE</a> - 1u - buffer_position)] &amp;</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;                              <a class="code" href="sps__cfg_8h.html#acd2cf1d197687afe98ff180d2d19e787">SPS_BITMASK_DIAGNOSTIC_ONDEMAND_OUTPUT_CURRENT</a>;</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;            <a class="code" href="sps__cfg_8c.html#a4b14f4d375070a68dc76dc6a69b0ce37">sps_channelStatus</a>[channel].<a class="code" href="structSPS__CHANNEL__STATE__s.html#a57e82e7851682f4b0cd8c58fcd3c0e7b">current_mA</a> = (float_t)buffer * <a class="code" href="sps__cfg_8h.html#acb3c681d3dd13198523b6768c8640c8f">SPS_I_MEASUREMENT_LSB_mA</a>;</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;        }</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;    }</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;}</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160; </div>
<div class="line"><a name="l00471"></a><span class="lineno"><a class="line" href="sps_8c.html#acbea831bc7b455fd71f259e3a9e4c0aa">  471</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="sps_8c.html#acbea831bc7b455fd71f259e3a9e4c0aa">SPS_RequestChannelState</a>(<a class="code" href="sps__types_8h.html#a3be98d4db19326a7c9d2b88106f9bb5c">SPS_CHANNEL_INDEX</a> channelIndex, <a class="code" href="sps__cfg_8h.html#a772a675a1df78516b3f94fc1bffe9f9b">SPS_CHANNEL_FUNCTION_e</a> channelFunction) {</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    <a class="code" href="fassert_8h.html#a2852c8164c3a4a492aa798e59180996d">FAS_ASSERT</a>(channelIndex &lt; <a class="code" href="sps__cfg_8h.html#a18e7ce184e9886a8adcab59383686127">SPS_NR_OF_AVAILABLE_SPS_CHANNELS</a>);</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;    <a class="code" href="fassert_8h.html#a2852c8164c3a4a492aa798e59180996d">FAS_ASSERT</a>((channelFunction == <a class="code" href="sps__cfg_8h.html#a772a675a1df78516b3f94fc1bffe9f9baddc53f5d59c41a9cd9d16f7879bef87e">SPS_CHANNEL_OFF</a>) || (channelFunction == <a class="code" href="sps__cfg_8h.html#a772a675a1df78516b3f94fc1bffe9f9ba72f33b2df63ed778bc22b10619a51030">SPS_CHANNEL_ON</a>));</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160; </div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    <a class="code" href="os__freertos_8c.html#ab8517d65da4e4805a64eda3fbec933de">OS_EnterTaskCritical</a>();</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;    <a class="code" href="sps__cfg_8c.html#a4b14f4d375070a68dc76dc6a69b0ce37">sps_channelStatus</a>[channelIndex].<a class="code" href="structSPS__CHANNEL__STATE__s.html#a1aad5ce49e68ec11fa0177e89dd92b47">channelRequested</a> = channelFunction;</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;    <a class="code" href="os__freertos_8c.html#a83489428a970d8f77f122f41f4b6bc0a">OS_ExitTaskCritical</a>();</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;}</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160; </div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;<span class="comment">/*========== Extern Function Implementations ================================*/</span></div>
<div class="line"><a name="l00481"></a><span class="lineno"><a class="line" href="sps_8c.html#a4d6b349b73c22a06820874713c1cfa1f">  481</a></span>&#160;<span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="sps_8c.html#a4d6b349b73c22a06820874713c1cfa1f">SPS_Ctrl</a>(<span class="keywordtype">void</span>) {</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="sps_8c.html#a909ae018ea80e7fe77d9467535aa6064">sps_timer</a> &gt; 0u) {</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;        <a class="code" href="sps_8c.html#a909ae018ea80e7fe77d9467535aa6064">sps_timer</a>--;</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    }</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    <a class="code" href="fstd__types_8h.html#a15c0d7d047c476ea033586165d49d398">STD_RETURN_TYPE_e</a> transmitRetval = <a class="code" href="fstd__types_8h.html#a15c0d7d047c476ea033586165d49d398a4bf9cb78ab5492c2a541881d4f426bdc">STD_NOT_OK</a>;</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160; </div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="sps_8c.html#a909ae018ea80e7fe77d9467535aa6064">sps_timer</a> == 0u) {</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;        <span class="keywordflow">switch</span> (<a class="code" href="sps_8c.html#aa8e216a46ef6baaf22533059cf1af40b">sps_state</a>) {</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="sps__cfg_8h.html#aead43b6ba741393f75cf0d4581fb7352ad9094b68f7667003ebe3f713118f0d56">SPS_START</a>:</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;                <span class="comment">/* set SPI speed to low speed in order to safely reach the all SPS */</span></div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;                <a class="code" href="spi__cfg_8c.html#a05ff5a51b7b9b82a1835c63ea30ea7cd">SPI_SpsInterfaceSwitchToLowSpeed</a>(&amp;<a class="code" href="spi__cfg_8c.html#ae777d1f7b7054adb0a2d4b5862297dd6">spi_spsInterface</a>);</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;                <a class="code" href="sps_8c.html#a6f00c269d0e20b749d8c7a9867ff4ba4">SPS_InitializeBuffers</a>();</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;                <a class="code" href="sps_8c.html#aa8e216a46ef6baaf22533059cf1af40b">sps_state</a> = <a class="code" href="sps__cfg_8h.html#aead43b6ba741393f75cf0d4581fb7352a67855b5304ac653c76e47d9ec3d02687">SPS_RESET_LOW</a>;</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160; </div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="sps__cfg_8h.html#aead43b6ba741393f75cf0d4581fb7352a67855b5304ac653c76e47d9ec3d02687">SPS_RESET_LOW</a>:</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;                <a class="code" href="io_8c.html#a9a2db1f5acc298fe408a8af231de55ad">IO_PinReset</a>(&amp;<a class="code" href="sps__cfg_8h.html#ab672122970f8d58299bb81318be44245">SPS_RESET_GIO_PORT</a>, <a class="code" href="sps__cfg_8h.html#acb787370c3be5234db896a6b3e0822dc">SPS_RESET_PIN</a>);</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;                <a class="code" href="sps_8c.html#aa8e216a46ef6baaf22533059cf1af40b">sps_state</a> = <a class="code" href="sps__cfg_8h.html#aead43b6ba741393f75cf0d4581fb7352aebdf3601d6032dd83e5ddaf45f27e4e3">SPS_RESET_HIGH</a>;</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;                <a class="code" href="sps_8c.html#a909ae018ea80e7fe77d9467535aa6064">sps_timer</a> = <a class="code" href="sps_8c.html#a0ca442a39de1cdb6a3707f0d648edf03">SPS_RESET_WAIT_TIME_TICKS</a>;</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160; </div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="sps__cfg_8h.html#aead43b6ba741393f75cf0d4581fb7352aebdf3601d6032dd83e5ddaf45f27e4e3">SPS_RESET_HIGH</a>:</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;                <a class="code" href="io_8c.html#a7bfc1c1b5a7779778a23ad040043a169">IO_PinSet</a>(&amp;<a class="code" href="sps__cfg_8h.html#ab672122970f8d58299bb81318be44245">SPS_RESET_GIO_PORT</a>, <a class="code" href="sps__cfg_8h.html#acb787370c3be5234db896a6b3e0822dc">SPS_RESET_PIN</a>);</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;                <a class="code" href="sps_8c.html#aa8e216a46ef6baaf22533059cf1af40b">sps_state</a> = <a class="code" href="sps__cfg_8h.html#aead43b6ba741393f75cf0d4581fb7352a1918ff1943ea1614d344e9f7f7dc8dcf">SPS_CONFIGURE_CONTROL_REGISTER</a>;</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;                <a class="code" href="sps_8c.html#a909ae018ea80e7fe77d9467535aa6064">sps_timer</a> = <a class="code" href="sps_8c.html#a0ca442a39de1cdb6a3707f0d648edf03">SPS_RESET_WAIT_TIME_TICKS</a>;</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160; </div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="sps__cfg_8h.html#aead43b6ba741393f75cf0d4581fb7352a1918ff1943ea1614d344e9f7f7dc8dcf">SPS_CONFIGURE_CONTROL_REGISTER</a>:</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;                <a class="code" href="sps_8c.html#ad2fe38c253e1b0b76ac5b013a6ca9529">SPS_SetCommandTxBuffer</a>(<a class="code" href="sps__cfg_8h.html#a76b6b23c38d5458d28e42a7d6d0066e3ae732d443069c2bc23c48e521e237f377">SPS_ACTION_CONFIGURE_CONTROL_REGISTER</a>);</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;                <a class="code" href="sps_8c.html#a961f9c1c70ea7658911b9d91c209b0a0">SPS_SetContactorsTxBuffer</a>();</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;                transmitRetval = <a class="code" href="sps_8c.html#a3b0b5c63417cabc94688fd3cf78cd94c">SPS_Transmit</a>();</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;                <span class="keywordflow">if</span> (transmitRetval == <a class="code" href="fstd__types_8h.html#a15c0d7d047c476ea033586165d49d398af8db2ffc453da17ecb1b56a059be0a5f">STD_OK</a>) {</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;                    <a class="code" href="sps_8c.html#aa8e216a46ef6baaf22533059cf1af40b">sps_state</a> = <a class="code" href="sps__cfg_8h.html#aead43b6ba741393f75cf0d4581fb7352a0e780e5f86343edd9d8d6daf508135be">SPS_TRIGGER_CURRENT_MEASUREMENT</a>;</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;                    <span class="comment">/* we have successfully configured the control registers to</span></div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;<span class="comment">                       strong drive mode and can now go to high speed communication */</span></div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;                    <a class="code" href="spi__cfg_8c.html#ac05f356ab006baab3e2d492bfefdb752">SPI_SpsInterfaceSwitchToHighSpeed</a>(&amp;<a class="code" href="spi__cfg_8c.html#ae777d1f7b7054adb0a2d4b5862297dd6">spi_spsInterface</a>);</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;                    <a class="code" href="sps_8c.html#aa8e216a46ef6baaf22533059cf1af40b">sps_state</a> = <a class="code" href="sps__cfg_8h.html#aead43b6ba741393f75cf0d4581fb7352ad9094b68f7667003ebe3f713118f0d56">SPS_START</a>;</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;                }</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160; </div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="sps__cfg_8h.html#aead43b6ba741393f75cf0d4581fb7352a0e780e5f86343edd9d8d6daf508135be">SPS_TRIGGER_CURRENT_MEASUREMENT</a>:</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;                <a class="code" href="sps_8c.html#ad2fe38c253e1b0b76ac5b013a6ca9529">SPS_SetCommandTxBuffer</a>(<a class="code" href="sps__cfg_8h.html#a76b6b23c38d5458d28e42a7d6d0066e3ab4fd3558cd6caae3a631f5fa282d5525">SPS_ACTION_TRIGGER_CURRENT_MEASUREMENT</a>);</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;                <a class="code" href="sps_8c.html#a961f9c1c70ea7658911b9d91c209b0a0">SPS_SetContactorsTxBuffer</a>();</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;                transmitRetval = <a class="code" href="sps_8c.html#a3b0b5c63417cabc94688fd3cf78cd94c">SPS_Transmit</a>();</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;                <span class="keywordflow">if</span> (transmitRetval == <a class="code" href="fstd__types_8h.html#a15c0d7d047c476ea033586165d49d398af8db2ffc453da17ecb1b56a059be0a5f">STD_OK</a>) {</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;                    <a class="code" href="sps_8c.html#aa8e216a46ef6baaf22533059cf1af40b">sps_state</a> = <a class="code" href="sps__cfg_8h.html#aead43b6ba741393f75cf0d4581fb7352a790ed152bba7409c55432741809563b5">SPS_READ_EN_IRQ_PIN</a>;</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;                    <a class="code" href="sps_8c.html#aa8e216a46ef6baaf22533059cf1af40b">sps_state</a> = <a class="code" href="sps__cfg_8h.html#aead43b6ba741393f75cf0d4581fb7352ad9094b68f7667003ebe3f713118f0d56">SPS_START</a>;</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;                }</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160; </div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="sps__cfg_8h.html#aead43b6ba741393f75cf0d4581fb7352a790ed152bba7409c55432741809563b5">SPS_READ_EN_IRQ_PIN</a>:</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;                <a class="code" href="sps_8c.html#ad2fe38c253e1b0b76ac5b013a6ca9529">SPS_SetCommandTxBuffer</a>(<a class="code" href="sps__cfg_8h.html#a76b6b23c38d5458d28e42a7d6d0066e3ad19a6ce26371cd07b0ddc1e667b9413e">SPS_ACTION_READ_EN_IRQ_PIN</a>);</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;                <a class="code" href="sps_8c.html#a961f9c1c70ea7658911b9d91c209b0a0">SPS_SetContactorsTxBuffer</a>();</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;                transmitRetval = <a class="code" href="sps_8c.html#a3b0b5c63417cabc94688fd3cf78cd94c">SPS_Transmit</a>();</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;                <span class="keywordflow">if</span> (transmitRetval == <a class="code" href="fstd__types_8h.html#a15c0d7d047c476ea033586165d49d398af8db2ffc453da17ecb1b56a059be0a5f">STD_OK</a>) {</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;                    <a class="code" href="sps_8c.html#aa8e216a46ef6baaf22533059cf1af40b">sps_state</a> = <a class="code" href="sps__cfg_8h.html#aead43b6ba741393f75cf0d4581fb7352a58c49b7031c51b388153cf74200bc5a6">SPS_READ_MEASURED_CURRENT1</a>;</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;                    <a class="code" href="sps_8c.html#aa8e216a46ef6baaf22533059cf1af40b">sps_state</a> = <a class="code" href="sps__cfg_8h.html#aead43b6ba741393f75cf0d4581fb7352ad9094b68f7667003ebe3f713118f0d56">SPS_START</a>;</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;                }</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160; </div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="sps__cfg_8h.html#aead43b6ba741393f75cf0d4581fb7352a58c49b7031c51b388153cf74200bc5a6">SPS_READ_MEASURED_CURRENT1</a>:</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;                <a class="code" href="sps_8c.html#ad2fe38c253e1b0b76ac5b013a6ca9529">SPS_SetCommandTxBuffer</a>(<a class="code" href="sps__cfg_8h.html#a76b6b23c38d5458d28e42a7d6d0066e3a9f594af1aa579b9b8943317ced8d3c51">SPS_ACTION_READ_CURRENT_MEASUREMENT1</a>);</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;                <a class="code" href="sps_8c.html#a961f9c1c70ea7658911b9d91c209b0a0">SPS_SetContactorsTxBuffer</a>();</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;                transmitRetval = <a class="code" href="sps_8c.html#a3b0b5c63417cabc94688fd3cf78cd94c">SPS_Transmit</a>();</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;                <span class="keywordflow">if</span> (transmitRetval == <a class="code" href="fstd__types_8h.html#a15c0d7d047c476ea033586165d49d398af8db2ffc453da17ecb1b56a059be0a5f">STD_OK</a>) {</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;                    <a class="code" href="sps_8c.html#aa8e216a46ef6baaf22533059cf1af40b">sps_state</a> = <a class="code" href="sps__cfg_8h.html#aead43b6ba741393f75cf0d4581fb7352a402823bbf0913cce2e9d66e997e70ce0">SPS_READ_MEASURED_CURRENT2</a>;</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;                    <a class="code" href="sps_8c.html#aa8e216a46ef6baaf22533059cf1af40b">sps_state</a> = <a class="code" href="sps__cfg_8h.html#aead43b6ba741393f75cf0d4581fb7352ad9094b68f7667003ebe3f713118f0d56">SPS_START</a>;</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;                }</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;                <a class="code" href="sps_8c.html#a42bcd905bbbb0fd532ae59e3fd60faff">SPS_GlobalReadCurrent</a>(1u);</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160; </div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="sps__cfg_8h.html#aead43b6ba741393f75cf0d4581fb7352a402823bbf0913cce2e9d66e997e70ce0">SPS_READ_MEASURED_CURRENT2</a>:</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;                <a class="code" href="sps_8c.html#ad2fe38c253e1b0b76ac5b013a6ca9529">SPS_SetCommandTxBuffer</a>(<a class="code" href="sps__cfg_8h.html#a76b6b23c38d5458d28e42a7d6d0066e3a74a81fbd9d1eea1827834643cdf54bb7">SPS_ACTION_READ_CURRENT_MEASUREMENT2</a>);</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;                <a class="code" href="sps_8c.html#a961f9c1c70ea7658911b9d91c209b0a0">SPS_SetContactorsTxBuffer</a>();</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;                transmitRetval = <a class="code" href="sps_8c.html#a3b0b5c63417cabc94688fd3cf78cd94c">SPS_Transmit</a>();</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;                <span class="keywordflow">if</span> (transmitRetval == <a class="code" href="fstd__types_8h.html#a15c0d7d047c476ea033586165d49d398af8db2ffc453da17ecb1b56a059be0a5f">STD_OK</a>) {</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;                    <a class="code" href="sps_8c.html#aa8e216a46ef6baaf22533059cf1af40b">sps_state</a> = <a class="code" href="sps__cfg_8h.html#aead43b6ba741393f75cf0d4581fb7352aac2a758c2b3dfdaf99fe80b582ca9554">SPS_READ_MEASURED_CURRENT3</a>;</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;                    <a class="code" href="sps_8c.html#aa8e216a46ef6baaf22533059cf1af40b">sps_state</a> = <a class="code" href="sps__cfg_8h.html#aead43b6ba741393f75cf0d4581fb7352ad9094b68f7667003ebe3f713118f0d56">SPS_START</a>;</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;                }</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;                <a class="code" href="sps_8c.html#a42bcd905bbbb0fd532ae59e3fd60faff">SPS_GlobalReadCurrent</a>(2u);</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160; </div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="sps__cfg_8h.html#aead43b6ba741393f75cf0d4581fb7352aac2a758c2b3dfdaf99fe80b582ca9554">SPS_READ_MEASURED_CURRENT3</a>:</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;                <a class="code" href="sps_8c.html#ad2fe38c253e1b0b76ac5b013a6ca9529">SPS_SetCommandTxBuffer</a>(<a class="code" href="sps__cfg_8h.html#a76b6b23c38d5458d28e42a7d6d0066e3af475469345e6367755c32fed13f3fdf8">SPS_ACTION_READ_CURRENT_MEASUREMENT3</a>);</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;                <a class="code" href="sps_8c.html#a961f9c1c70ea7658911b9d91c209b0a0">SPS_SetContactorsTxBuffer</a>();</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;                transmitRetval = <a class="code" href="sps_8c.html#a3b0b5c63417cabc94688fd3cf78cd94c">SPS_Transmit</a>();</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;                <span class="keywordflow">if</span> (transmitRetval == <a class="code" href="fstd__types_8h.html#a15c0d7d047c476ea033586165d49d398af8db2ffc453da17ecb1b56a059be0a5f">STD_OK</a>) {</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;                    <a class="code" href="sps_8c.html#aa8e216a46ef6baaf22533059cf1af40b">sps_state</a> = <a class="code" href="sps__cfg_8h.html#aead43b6ba741393f75cf0d4581fb7352adde86f2ec619a62275a4e79233b89a2c">SPS_READ_MEASURED_CURRENT4</a>;</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;                    <a class="code" href="sps_8c.html#aa8e216a46ef6baaf22533059cf1af40b">sps_state</a> = <a class="code" href="sps__cfg_8h.html#aead43b6ba741393f75cf0d4581fb7352ad9094b68f7667003ebe3f713118f0d56">SPS_START</a>;</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;                }</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;                <a class="code" href="sps_8c.html#a42bcd905bbbb0fd532ae59e3fd60faff">SPS_GlobalReadCurrent</a>(3u);</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160; </div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="sps__cfg_8h.html#aead43b6ba741393f75cf0d4581fb7352adde86f2ec619a62275a4e79233b89a2c">SPS_READ_MEASURED_CURRENT4</a>:</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;                <a class="code" href="sps_8c.html#ad2fe38c253e1b0b76ac5b013a6ca9529">SPS_SetCommandTxBuffer</a>(<a class="code" href="sps__cfg_8h.html#a76b6b23c38d5458d28e42a7d6d0066e3ad698f1014e8712f5b39908fd8a39b1db">SPS_ACTION_READ_CURRENT_MEASUREMENT4</a>);</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;                <a class="code" href="sps_8c.html#a961f9c1c70ea7658911b9d91c209b0a0">SPS_SetContactorsTxBuffer</a>();</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;                transmitRetval = <a class="code" href="sps_8c.html#a3b0b5c63417cabc94688fd3cf78cd94c">SPS_Transmit</a>();</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;                <span class="keywordflow">if</span> (transmitRetval == <a class="code" href="fstd__types_8h.html#a15c0d7d047c476ea033586165d49d398af8db2ffc453da17ecb1b56a059be0a5f">STD_OK</a>) {</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;                    <a class="code" href="sps_8c.html#aa8e216a46ef6baaf22533059cf1af40b">sps_state</a> = <a class="code" href="sps__cfg_8h.html#aead43b6ba741393f75cf0d4581fb7352a0e780e5f86343edd9d8d6daf508135be">SPS_TRIGGER_CURRENT_MEASUREMENT</a>;</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;                    <a class="code" href="sps_8c.html#aa8e216a46ef6baaf22533059cf1af40b">sps_state</a> = <a class="code" href="sps__cfg_8h.html#aead43b6ba741393f75cf0d4581fb7352ad9094b68f7667003ebe3f713118f0d56">SPS_START</a>;</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;                }</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;                <a class="code" href="sps_8c.html#a42bcd905bbbb0fd532ae59e3fd60faff">SPS_GlobalReadCurrent</a>(4u);</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;            <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;                <a class="code" href="fassert_8h.html#a2852c8164c3a4a492aa798e59180996d">FAS_ASSERT</a>(<a class="code" href="fassert_8h.html#a75272b106cfd6946edcd4b19f7e8f40f">FAS_TRAP</a>);</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;                <span class="keywordflow">break</span>; <span class="comment">/* LCOV_EXCL_LINE */</span></div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;        }</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;    }</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;}</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160; </div>
<div class="line"><a name="l00598"></a><span class="lineno"><a class="line" href="sps_8c.html#a128f703730c477c2c83c2aaaad02f233">  598</a></span>&#160;<span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="sps_8c.html#a128f703730c477c2c83c2aaaad02f233">SPS_Initialize</a>(<span class="keywordtype">void</span>) {</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;    <a class="code" href="sps_8c.html#a1d5464ca2118b329b74b051e73400a9e">SPS_InitializeIo</a>();</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;}</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160; </div>
<div class="line"><a name="l00602"></a><span class="lineno"><a class="line" href="sps_8c.html#a9cb3cd911b7a454365ab9c3cec7319a1">  602</a></span>&#160;<span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="sps_8c.html#a9cb3cd911b7a454365ab9c3cec7319a1">SPS_RequestContactorState</a>(<a class="code" href="sps__types_8h.html#a3be98d4db19326a7c9d2b88106f9bb5c">SPS_CHANNEL_INDEX</a> channelIndex, <a class="code" href="sps__cfg_8h.html#a772a675a1df78516b3f94fc1bffe9f9b">SPS_CHANNEL_FUNCTION_e</a> channelFunction) {</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;    <a class="code" href="fassert_8h.html#a2852c8164c3a4a492aa798e59180996d">FAS_ASSERT</a>(channelIndex &lt; <a class="code" href="sps__cfg_8h.html#a18e7ce184e9886a8adcab59383686127">SPS_NR_OF_AVAILABLE_SPS_CHANNELS</a>);</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;    <span class="comment">/* AXIVION Routine Generic-MissingParameterAssert: channelFunction: parameter accepts all defined enums */</span></div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;    <span class="comment">/* Allow only contactor related SPS outputs to be operated with this function */</span></div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;    <span class="keyword">const</span> <a class="code" href="sps__types_8h.html#a7ad6cca1dfd30b9fbc61ee82eb37c87f">SPS_CHANNEL_AFFILIATION_e</a> channelAffiliation = <a class="code" href="sps_8c.html#a12055277c605a27340a3938e6f84523a">SPS_GetChannelAffiliation</a>(channelIndex);</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;    <a class="code" href="fassert_8h.html#a2852c8164c3a4a492aa798e59180996d">FAS_ASSERT</a>(<a class="code" href="sps__types_8h.html#a7ad6cca1dfd30b9fbc61ee82eb37c87fa3dc358411b424ef8781918c9febde267">SPS_AFF_CONTACTOR</a> == channelAffiliation);</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;    <a class="code" href="sps_8c.html#acbea831bc7b455fd71f259e3a9e4c0aa">SPS_RequestChannelState</a>(channelIndex, channelFunction);</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;}</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160; </div>
<div class="line"><a name="l00611"></a><span class="lineno"><a class="line" href="sps_8c.html#af418145217797b02ca824f60042e51bf">  611</a></span>&#160;<span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="sps_8c.html#af418145217797b02ca824f60042e51bf">SPS_RequestGeneralIoState</a>(<a class="code" href="sps__types_8h.html#a3be98d4db19326a7c9d2b88106f9bb5c">SPS_CHANNEL_INDEX</a> channelIndex, <a class="code" href="sps__cfg_8h.html#a772a675a1df78516b3f94fc1bffe9f9b">SPS_CHANNEL_FUNCTION_e</a> channelFunction) {</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;    <a class="code" href="fassert_8h.html#a2852c8164c3a4a492aa798e59180996d">FAS_ASSERT</a>(channelIndex &lt; <a class="code" href="sps__cfg_8h.html#a18e7ce184e9886a8adcab59383686127">SPS_NR_OF_AVAILABLE_SPS_CHANNELS</a>);</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;    <span class="comment">/* AXIVION Routine Generic-MissingParameterAssert: channelFunction: parameter accepts all defined enums */</span></div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;    <span class="comment">/* Allow only general IO related SPS outputs to be operated with this function */</span></div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;    <span class="keyword">const</span> <a class="code" href="sps__types_8h.html#a7ad6cca1dfd30b9fbc61ee82eb37c87f">SPS_CHANNEL_AFFILIATION_e</a> channelAffiliation = <a class="code" href="sps_8c.html#a12055277c605a27340a3938e6f84523a">SPS_GetChannelAffiliation</a>(channelIndex);</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;    <a class="code" href="fassert_8h.html#a2852c8164c3a4a492aa798e59180996d">FAS_ASSERT</a>(<a class="code" href="sps__types_8h.html#a7ad6cca1dfd30b9fbc61ee82eb37c87fa8d053a10379fc16e9ff579856635408f">SPS_AFF_GENERAL_IO</a> == channelAffiliation);</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;    <a class="code" href="sps_8c.html#acbea831bc7b455fd71f259e3a9e4c0aa">SPS_RequestChannelState</a>(channelIndex, channelFunction);</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;}</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160; </div>
<div class="line"><a name="l00620"></a><span class="lineno"><a class="line" href="sps_8c.html#a9c3bf6cc3ba07d1d11d34f03ec8c4f8e">  620</a></span>&#160;<span class="keyword">extern</span> <a class="code" href="contactor__cfg_8h.html#ac32566e8b4866ea092225de350dd9969">CONT_ELECTRICAL_STATE_TYPE_e</a> <a class="code" href="sps_8c.html#a9c3bf6cc3ba07d1d11d34f03ec8c4f8e">SPS_GetChannelCurrentFeedback</a>(<span class="keyword">const</span> <a class="code" href="sps__types_8h.html#a3be98d4db19326a7c9d2b88106f9bb5c">SPS_CHANNEL_INDEX</a> channelIndex) {</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;    <a class="code" href="fassert_8h.html#a2852c8164c3a4a492aa798e59180996d">FAS_ASSERT</a>(channelIndex &lt; <a class="code" href="sps__cfg_8h.html#a18e7ce184e9886a8adcab59383686127">SPS_NR_OF_AVAILABLE_SPS_CHANNELS</a>);</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160; </div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;    <a class="code" href="contactor__cfg_8h.html#ac32566e8b4866ea092225de350dd9969">CONT_ELECTRICAL_STATE_TYPE_e</a> channelFeedback = <a class="code" href="contactor__cfg_8h.html#ac32566e8b4866ea092225de350dd9969abf21f522aaba8c0b43c6987c3f82fdf9">CONT_SWITCH_OFF</a>;</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160; </div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;    <a class="code" href="os__freertos_8c.html#ab8517d65da4e4805a64eda3fbec933de">OS_EnterTaskCritical</a>();</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    float_t channelCurrent_mA = <a class="code" href="sps__cfg_8c.html#a4b14f4d375070a68dc76dc6a69b0ce37">sps_channelStatus</a>[channelIndex].<a class="code" href="structSPS__CHANNEL__STATE__s.html#a57e82e7851682f4b0cd8c58fcd3c0e7b">current_mA</a>;</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;    <a class="code" href="os__freertos_8c.html#a83489428a970d8f77f122f41f4b6bc0a">OS_ExitTaskCritical</a>();</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160; </div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;    <span class="keywordflow">if</span> (channelCurrent_mA &gt; <a class="code" href="sps__cfg_8c.html#a4b14f4d375070a68dc76dc6a69b0ce37">sps_channelStatus</a>[channelIndex].thresholdFeedbackOn_mA) {</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;        channelFeedback = <a class="code" href="contactor__cfg_8h.html#ac32566e8b4866ea092225de350dd9969a8f07393113924b8b78cde8ce58a864cd">CONT_SWITCH_ON</a>;</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;    }</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160; </div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;    <span class="keywordflow">return</span> channelFeedback;</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;}</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160; </div>
<div class="line"><a name="l00636"></a><span class="lineno"><a class="line" href="sps_8c.html#a033367817569ec2519c57fed158ef2a3">  636</a></span>&#160;<span class="keyword">extern</span> <a class="code" href="contactor__cfg_8h.html#ac32566e8b4866ea092225de350dd9969">CONT_ELECTRICAL_STATE_TYPE_e</a> <a class="code" href="sps_8c.html#a033367817569ec2519c57fed158ef2a3">SPS_GetChannelPexFeedback</a>(<span class="keyword">const</span> <a class="code" href="sps__types_8h.html#a3be98d4db19326a7c9d2b88106f9bb5c">SPS_CHANNEL_INDEX</a> channelIndex, <span class="keywordtype">bool</span> normallyOpen) {</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;    <a class="code" href="fassert_8h.html#a2852c8164c3a4a492aa798e59180996d">FAS_ASSERT</a>(channelIndex &lt; <a class="code" href="sps__cfg_8h.html#a18e7ce184e9886a8adcab59383686127">SPS_NR_OF_AVAILABLE_SPS_CHANNELS</a>);</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;    <a class="code" href="fassert_8h.html#a2852c8164c3a4a492aa798e59180996d">FAS_ASSERT</a>((normallyOpen == <span class="keyword">true</span>) || (normallyOpen == <span class="keyword">false</span>));</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160; </div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;    <a class="code" href="structSPS__CHANNEL__FEEDBACK__MAPPING__s.html">SPS_CHANNEL_FEEDBACK_MAPPING_s</a> channelMapping = <a class="code" href="sps__cfg_8c.html#aa37d7f71a950ea5bc83699f578173be1">sps_kChannelFeedbackMapping</a>[channelIndex];</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;    uint8_t pinState                              = <a class="code" href="pex_8c.html#a6a7f4e6a2f532e9093c7be8498032590">PEX_GetPin</a>(channelMapping.<a class="code" href="structSPS__CHANNEL__FEEDBACK__MAPPING__s.html#a0714c740e152817f5d26278bffc3c8b3">pexDevice</a>, channelMapping.<a class="code" href="structSPS__CHANNEL__FEEDBACK__MAPPING__s.html#a9720c686544ca1621fb0fcf588b871cd">pexChannel</a>);</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160; </div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;    <a class="code" href="contactor__cfg_8h.html#ac32566e8b4866ea092225de350dd9969">CONT_ELECTRICAL_STATE_TYPE_e</a> channelFeedback = <a class="code" href="contactor__cfg_8h.html#ac32566e8b4866ea092225de350dd9969abf21f522aaba8c0b43c6987c3f82fdf9">CONT_SWITCH_OFF</a>;</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;    <span class="keywordflow">if</span> (normallyOpen == <span class="keyword">true</span>) {</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;        <span class="comment">/* contactor is on if pinstate is high */</span></div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;        <span class="keywordflow">if</span> (pinState != <a class="code" href="pex_8h.html#a3d244484a37a5322926a806afb81e1be">PEX_PIN_LOW</a>) {</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;            channelFeedback = <a class="code" href="contactor__cfg_8h.html#ac32566e8b4866ea092225de350dd9969a8f07393113924b8b78cde8ce58a864cd">CONT_SWITCH_ON</a>;</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;        }</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;        <span class="comment">/* contactor is on if pinstate is low */</span></div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;        <span class="keywordflow">if</span> (pinState != <a class="code" href="pex_8h.html#a695ca155109f8d5e99ef544b2bc21a6e">PEX_PIN_HIGH</a>) {</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;            channelFeedback = <a class="code" href="contactor__cfg_8h.html#ac32566e8b4866ea092225de350dd9969a8f07393113924b8b78cde8ce58a864cd">CONT_SWITCH_ON</a>;</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;        }</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;    }</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160; </div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;    <span class="keywordflow">return</span> channelFeedback;</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;}</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160; </div>
<div class="line"><a name="l00659"></a><span class="lineno"><a class="line" href="sps_8c.html#a12055277c605a27340a3938e6f84523a">  659</a></span>&#160;<span class="keyword">extern</span> <a class="code" href="sps__types_8h.html#a7ad6cca1dfd30b9fbc61ee82eb37c87f">SPS_CHANNEL_AFFILIATION_e</a> <a class="code" href="sps_8c.html#a12055277c605a27340a3938e6f84523a">SPS_GetChannelAffiliation</a>(<a class="code" href="sps__types_8h.html#a3be98d4db19326a7c9d2b88106f9bb5c">SPS_CHANNEL_INDEX</a> channelIndex) {</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;    <a class="code" href="fassert_8h.html#a2852c8164c3a4a492aa798e59180996d">FAS_ASSERT</a>(channelIndex &lt; <a class="code" href="sps__cfg_8h.html#a18e7ce184e9886a8adcab59383686127">SPS_NR_OF_AVAILABLE_SPS_CHANNELS</a>);</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="sps__cfg_8c.html#a4b14f4d375070a68dc76dc6a69b0ce37">sps_channelStatus</a>[channelIndex].<a class="code" href="structSPS__CHANNEL__STATE__s.html#acdcd2c5d56c9fa30fb3abbff37ab2650">affiliation</a>;</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;}</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160; </div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;<span class="comment">/*========== Externalized Static Function Implementations (Unit Test) =======*/</span></div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;<span class="preprocessor">#ifdef UNITY_UNIT_TEST</span></div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">void</span> TEST_SPS_RequestChannelState(<a class="code" href="sps__types_8h.html#a3be98d4db19326a7c9d2b88106f9bb5c">SPS_CHANNEL_INDEX</a> channelIndex, <a class="code" href="sps__cfg_8h.html#a772a675a1df78516b3f94fc1bffe9f9b">SPS_CHANNEL_FUNCTION_e</a> channelFunction) {</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;    <a class="code" href="sps_8c.html#acbea831bc7b455fd71f259e3a9e4c0aa">SPS_RequestChannelState</a>(channelIndex, channelFunction);</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;}</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;<span class="keyword">extern</span> <a class="code" href="sps__cfg_8h.html#aead43b6ba741393f75cf0d4581fb7352">SPS_STATE_e</a> TEST_SPS_GetSpsState(<span class="keywordtype">void</span>) {</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="sps_8c.html#aa8e216a46ef6baaf22533059cf1af40b">sps_state</a>;</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;}</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">void</span> TEST_SPS_SetSpsState(<span class="keyword">const</span> <a class="code" href="sps__cfg_8h.html#aead43b6ba741393f75cf0d4581fb7352">SPS_STATE_e</a> newState) {</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;    <a class="code" href="sps_8c.html#aa8e216a46ef6baaf22533059cf1af40b">sps_state</a> = newState;</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;}</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;<span class="keyword">extern</span> uint8_t TEST_SPS_GetSpsTimer(<span class="keywordtype">void</span>) {</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="sps_8c.html#a909ae018ea80e7fe77d9467535aa6064">sps_timer</a>;</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;}</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">void</span> TEST_SPS_SetSpsTimer(<span class="keyword">const</span> uint8_t newTimer) {</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;    <a class="code" href="sps_8c.html#a909ae018ea80e7fe77d9467535aa6064">sps_timer</a> = newTimer;</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;}</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="ttc" id="acontactor__cfg_8h_html_ac32566e8b4866ea092225de350dd9969"><div class="ttname"><a href="contactor__cfg_8h.html#ac32566e8b4866ea092225de350dd9969">CONT_ELECTRICAL_STATE_TYPE_e</a></div><div class="ttdeci">CONT_ELECTRICAL_STATE_TYPE_e</div><div class="ttdef"><b>Definition:</b> <a href="contactor__cfg_8h_source.html#l00070">contactor_cfg.h:70</a></div></div>
<div class="ttc" id="acontactor__cfg_8h_html_ac32566e8b4866ea092225de350dd9969a8f07393113924b8b78cde8ce58a864cd"><div class="ttname"><a href="contactor__cfg_8h.html#ac32566e8b4866ea092225de350dd9969a8f07393113924b8b78cde8ce58a864cd">CONT_SWITCH_ON</a></div><div class="ttdeci">@ CONT_SWITCH_ON</div><div class="ttdef"><b>Definition:</b> <a href="contactor__cfg_8h_source.html#l00072">contactor_cfg.h:72</a></div></div>
<div class="ttc" id="acontactor__cfg_8h_html_ac32566e8b4866ea092225de350dd9969abf21f522aaba8c0b43c6987c3f82fdf9"><div class="ttname"><a href="contactor__cfg_8h.html#ac32566e8b4866ea092225de350dd9969abf21f522aaba8c0b43c6987c3f82fdf9">CONT_SWITCH_OFF</a></div><div class="ttdeci">@ CONT_SWITCH_OFF</div><div class="ttdef"><b>Definition:</b> <a href="contactor__cfg_8h_source.html#l00071">contactor_cfg.h:71</a></div></div>
<div class="ttc" id="adatabase_8h_html"><div class="ttname"><a href="database_8h.html">database.h</a></div><div class="ttdoc">Database module header.</div></div>
<div class="ttc" id="afassert_8h_html_a2852c8164c3a4a492aa798e59180996d"><div class="ttname"><a href="fassert_8h.html#a2852c8164c3a4a492aa798e59180996d">FAS_ASSERT</a></div><div class="ttdeci">#define FAS_ASSERT(x)</div><div class="ttdoc">Assertion macro that asserts that x is true.</div><div class="ttdef"><b>Definition:</b> <a href="fassert_8h_source.html#l00254">fassert.h:254</a></div></div>
<div class="ttc" id="afassert_8h_html_a75272b106cfd6946edcd4b19f7e8f40f"><div class="ttname"><a href="fassert_8h.html#a75272b106cfd6946edcd4b19f7e8f40f">FAS_TRAP</a></div><div class="ttdeci">#define FAS_TRAP</div><div class="ttdoc">Define that evaluates to essential boolean false thus tripping an assert.</div><div class="ttdef"><b>Definition:</b> <a href="fassert_8h_source.html#l00129">fassert.h:129</a></div></div>
<div class="ttc" id="afstd__types_8h_html_a15c0d7d047c476ea033586165d49d398"><div class="ttname"><a href="fstd__types_8h.html#a15c0d7d047c476ea033586165d49d398">STD_RETURN_TYPE_e</a></div><div class="ttdeci">STD_RETURN_TYPE_e</div><div class="ttdef"><b>Definition:</b> <a href="fstd__types_8h_source.html#l00082">fstd_types.h:82</a></div></div>
<div class="ttc" id="afstd__types_8h_html_a15c0d7d047c476ea033586165d49d398a4bf9cb78ab5492c2a541881d4f426bdc"><div class="ttname"><a href="fstd__types_8h.html#a15c0d7d047c476ea033586165d49d398a4bf9cb78ab5492c2a541881d4f426bdc">STD_NOT_OK</a></div><div class="ttdeci">@ STD_NOT_OK</div><div class="ttdef"><b>Definition:</b> <a href="fstd__types_8h_source.html#l00084">fstd_types.h:84</a></div></div>
<div class="ttc" id="afstd__types_8h_html_a15c0d7d047c476ea033586165d49d398af8db2ffc453da17ecb1b56a059be0a5f"><div class="ttname"><a href="fstd__types_8h.html#a15c0d7d047c476ea033586165d49d398af8db2ffc453da17ecb1b56a059be0a5f">STD_OK</a></div><div class="ttdeci">@ STD_OK</div><div class="ttdef"><b>Definition:</b> <a href="fstd__types_8h_source.html#l00083">fstd_types.h:83</a></div></div>
<div class="ttc" id="afstd__types_8h_html_a530f11a96e508d171d28564c8dc20942"><div class="ttname"><a href="fstd__types_8h.html#a530f11a96e508d171d28564c8dc20942">NULL_PTR</a></div><div class="ttdeci">#define NULL_PTR</div><div class="ttdoc">Null pointer.</div><div class="ttdef"><b>Definition:</b> <a href="fstd__types_8h_source.html#l00077">fstd_types.h:77</a></div></div>
<div class="ttc" id="ageneral_8h_html"><div class="ttname"><a href="general_8h.html">general.h</a></div><div class="ttdoc">General macros and definitions for the whole platform.</div></div>
<div class="ttc" id="ageneral_8h_html_aa1d7e443c417cd6a08c53ae102c9d6be"><div class="ttname"><a href="general_8h.html#aa1d7e443c417cd6a08c53ae102c9d6be">GEN_SET_BIT</a></div><div class="ttdeci">#define GEN_SET_BIT(register, bit)</div><div class="ttdoc">sets a bit to 1u</div><div class="ttdef"><b>Definition:</b> <a href="general_8h_source.html#l00072">general.h:72</a></div></div>
<div class="ttc" id="aio_8c_html_a7bfc1c1b5a7779778a23ad040043a169"><div class="ttname"><a href="io_8c.html#a7bfc1c1b5a7779778a23ad040043a169">IO_PinSet</a></div><div class="ttdeci">void IO_PinSet(volatile uint32_t *pRegisterAddress, uint32_t pin)</div><div class="ttdoc">Set pin by writing in pin output register.</div><div class="ttdef"><b>Definition:</b> <a href="io_8c_source.html#l00091">io.c:91</a></div></div>
<div class="ttc" id="aio_8c_html_a9a2db1f5acc298fe408a8af231de55ad"><div class="ttname"><a href="io_8c.html#a9a2db1f5acc298fe408a8af231de55ad">IO_PinReset</a></div><div class="ttdeci">void IO_PinReset(volatile uint32_t *pRegisterAddress, uint32_t pin)</div><div class="ttdoc">Reset pin by writing in pin output register.</div><div class="ttdef"><b>Definition:</b> <a href="io_8c_source.html#l00098">io.c:98</a></div></div>
<div class="ttc" id="aio_8h_html"><div class="ttname"><a href="io_8h.html">io.h</a></div><div class="ttdoc">Header for the driver for the IO module.</div></div>
<div class="ttc" id="amcu_8c_html_a9cd55b20e69a018ff26f46a5c9975647"><div class="ttname"><a href="mcu_8c.html#a9cd55b20e69a018ff26f46a5c9975647">MCU_Delay_us</a></div><div class="ttdeci">void MCU_Delay_us(uint32_t delay_us)</div><div class="ttdoc">Wait blocking a certain time in microseconds.</div><div class="ttdef"><b>Definition:</b> <a href="mcu_8c_source.html#l00089">mcu.c:89</a></div></div>
<div class="ttc" id="amcu_8h_html"><div class="ttname"><a href="mcu_8h.html">mcu.h</a></div><div class="ttdoc">Headers for the driver for the MCU module.</div></div>
<div class="ttc" id="aos_8h_html"><div class="ttname"><a href="os_8h.html">os.h</a></div><div class="ttdoc">Declaration of the OS wrapper interface.</div></div>
<div class="ttc" id="aos__freertos_8c_html_a83489428a970d8f77f122f41f4b6bc0a"><div class="ttname"><a href="os__freertos_8c.html#a83489428a970d8f77f122f41f4b6bc0a">OS_ExitTaskCritical</a></div><div class="ttdeci">void OS_ExitTaskCritical(void)</div><div class="ttdoc">Exit Critical interface function for use in FreeRTOS-Tasks and FreeRTOS-ISR.</div><div class="ttdef"><b>Definition:</b> <a href="os__freertos_8c_source.html#l00138">os_freertos.c:138</a></div></div>
<div class="ttc" id="aos__freertos_8c_html_ab8517d65da4e4805a64eda3fbec933de"><div class="ttname"><a href="os__freertos_8c.html#ab8517d65da4e4805a64eda3fbec933de">OS_EnterTaskCritical</a></div><div class="ttdeci">void OS_EnterTaskCritical(void)</div><div class="ttdoc">Enter Critical interface function for use in FreeRTOS-Tasks and FreeRTOS-ISR.</div><div class="ttdef"><b>Definition:</b> <a href="os__freertos_8c_source.html#l00134">os_freertos.c:134</a></div></div>
<div class="ttc" id="apex_8c_html_a6a7f4e6a2f532e9093c7be8498032590"><div class="ttname"><a href="pex_8c.html#a6a7f4e6a2f532e9093c7be8498032590">PEX_GetPin</a></div><div class="ttdeci">uint8_t PEX_GetPin(uint8_t portExpander, uint8_t pin)</div><div class="ttdoc">get pin state of port expander pins.</div><div class="ttdef"><b>Definition:</b> <a href="pex_8c_source.html#l00366">pex.c:366</a></div></div>
<div class="ttc" id="apex_8h_html"><div class="ttname"><a href="pex_8h.html">pex.h</a></div><div class="ttdoc">Header for the driver for the NXP PCA9539 port expander module.</div></div>
<div class="ttc" id="apex_8h_html_a3d244484a37a5322926a806afb81e1be"><div class="ttname"><a href="pex_8h.html#a3d244484a37a5322926a806afb81e1be">PEX_PIN_LOW</a></div><div class="ttdeci">#define PEX_PIN_LOW</div><div class="ttdef"><b>Definition:</b> <a href="pex_8h_source.html#l00067">pex.h:67</a></div></div>
<div class="ttc" id="apex_8h_html_a695ca155109f8d5e99ef544b2bc21a6e"><div class="ttname"><a href="pex_8h.html#a695ca155109f8d5e99ef544b2bc21a6e">PEX_PIN_HIGH</a></div><div class="ttdeci">#define PEX_PIN_HIGH</div><div class="ttdef"><b>Definition:</b> <a href="pex_8h_source.html#l00068">pex.h:68</a></div></div>
<div class="ttc" id="aspi_8c_html_ac84bc8424de860e2cd89fea2e89dd89a"><div class="ttname"><a href="spi_8c.html#ac84bc8424de860e2cd89fea2e89dd89a">SPI_TransmitReceiveData</a></div><div class="ttdeci">STD_RETURN_TYPE_e SPI_TransmitReceiveData(SPI_INTERFACE_CONFIG_s *pSpiInterface, uint16 *pTxBuff, uint16 *pRxBuff, uint32 frameLength)</div><div class="ttdoc">Transmits and receives data on SPI without DMA.</div><div class="ttdef"><b>Definition:</b> <a href="spi_8c_source.html#l00220">spi.c:220</a></div></div>
<div class="ttc" id="aspi_8h_html"><div class="ttname"><a href="spi_8h.html">spi.h</a></div><div class="ttdoc">Headers for the driver for the SPI module.</div></div>
<div class="ttc" id="aspi__cfg_8c_html_a05ff5a51b7b9b82a1835c63ea30ea7cd"><div class="ttname"><a href="spi__cfg_8c.html#a05ff5a51b7b9b82a1835c63ea30ea7cd">SPI_SpsInterfaceSwitchToLowSpeed</a></div><div class="ttdeci">void SPI_SpsInterfaceSwitchToLowSpeed(SPI_INTERFACE_CONFIG_s *pSpiSpsInterface)</div><div class="ttdoc">Switch the SPS spi handle to low speed.</div><div class="ttdef"><b>Definition:</b> <a href="spi__cfg_8c_source.html#l00261">spi_cfg.c:261</a></div></div>
<div class="ttc" id="aspi__cfg_8c_html_ac05f356ab006baab3e2d492bfefdb752"><div class="ttname"><a href="spi__cfg_8c.html#ac05f356ab006baab3e2d492bfefdb752">SPI_SpsInterfaceSwitchToHighSpeed</a></div><div class="ttdeci">void SPI_SpsInterfaceSwitchToHighSpeed(SPI_INTERFACE_CONFIG_s *pSpiSpsInterface)</div><div class="ttdoc">Switch the SPS spi handle to high speed.</div><div class="ttdef"><b>Definition:</b> <a href="spi__cfg_8c_source.html#l00256">spi_cfg.c:256</a></div></div>
<div class="ttc" id="aspi__cfg_8c_html_ae777d1f7b7054adb0a2d4b5862297dd6"><div class="ttname"><a href="spi__cfg_8c.html#ae777d1f7b7054adb0a2d4b5862297dd6">spi_spsInterface</a></div><div class="ttdeci">SPI_INTERFACE_CONFIG_s spi_spsInterface</div><div class="ttdef"><b>Definition:</b> <a href="spi__cfg_8c_source.html#l00222">spi_cfg.c:222</a></div></div>
<div class="ttc" id="aspi__cfg_8h_html_ada96dfd415aaa9bd52a00db0bfc4a8d7"><div class="ttname"><a href="spi__cfg_8h.html#ada96dfd415aaa9bd52a00db0bfc4a8d7">SPI_SPS_CS_GIOPORT_DIR</a></div><div class="ttdeci">#define SPI_SPS_CS_GIOPORT_DIR</div><div class="ttdef"><b>Definition:</b> <a href="spi__cfg_8h_source.html#l00151">spi_cfg.h:151</a></div></div>
<div class="ttc" id="aspi__cfg_8h_html_af3a362a0506f568e7a64f0d6e5dd1a8b"><div class="ttname"><a href="spi__cfg_8h.html#af3a362a0506f568e7a64f0d6e5dd1a8b">SPI_SPS_CS_PIN</a></div><div class="ttdeci">#define SPI_SPS_CS_PIN</div><div class="ttdef"><b>Definition:</b> <a href="spi__cfg_8h_source.html#l00152">spi_cfg.h:152</a></div></div>
<div class="ttc" id="asps_8c_html_a033367817569ec2519c57fed158ef2a3"><div class="ttname"><a href="sps_8c.html#a033367817569ec2519c57fed158ef2a3">SPS_GetChannelPexFeedback</a></div><div class="ttdeci">CONT_ELECTRICAL_STATE_TYPE_e SPS_GetChannelPexFeedback(const SPS_CHANNEL_INDEX channelIndex, bool normallyOpen)</div><div class="ttdoc">Get the feedback state of a channel.</div><div class="ttdef"><b>Definition:</b> <a href="sps_8c_source.html#l00636">sps.c:636</a></div></div>
<div class="ttc" id="asps_8c_html_a0ca442a39de1cdb6a3707f0d648edf03"><div class="ttname"><a href="sps_8c.html#a0ca442a39de1cdb6a3707f0d648edf03">SPS_RESET_WAIT_TIME_TICKS</a></div><div class="ttdeci">#define SPS_RESET_WAIT_TIME_TICKS</div><div class="ttdef"><b>Definition:</b> <a href="sps_8c_source.html#l00111">sps.c:111</a></div></div>
<div class="ttc" id="asps_8c_html_a12055277c605a27340a3938e6f84523a"><div class="ttname"><a href="sps_8c.html#a12055277c605a27340a3938e6f84523a">SPS_GetChannelAffiliation</a></div><div class="ttdeci">SPS_CHANNEL_AFFILIATION_e SPS_GetChannelAffiliation(SPS_CHANNEL_INDEX channelIndex)</div><div class="ttdoc">Returns the channel affiliation.</div><div class="ttdef"><b>Definition:</b> <a href="sps_8c_source.html#l00659">sps.c:659</a></div></div>
<div class="ttc" id="asps_8c_html_a128f703730c477c2c83c2aaaad02f233"><div class="ttname"><a href="sps_8c.html#a128f703730c477c2c83c2aaaad02f233">SPS_Initialize</a></div><div class="ttdeci">void SPS_Initialize(void)</div><div class="ttdoc">Initialize IOs for the SPS driver.</div><div class="ttdef"><b>Definition:</b> <a href="sps_8c_source.html#l00598">sps.c:598</a></div></div>
<div class="ttc" id="asps_8c_html_a1d5464ca2118b329b74b051e73400a9e"><div class="ttname"><a href="sps_8c.html#a1d5464ca2118b329b74b051e73400a9e">SPS_InitializeIo</a></div><div class="ttdeci">static void SPS_InitializeIo(void)</div><div class="ttdef"><b>Definition:</b> <a href="sps_8c_source.html#l00256">sps.c:256</a></div></div>
<div class="ttc" id="asps_8c_html_a3b0b5c63417cabc94688fd3cf78cd94c"><div class="ttname"><a href="sps_8c.html#a3b0b5c63417cabc94688fd3cf78cd94c">SPS_Transmit</a></div><div class="ttdeci">static STD_RETURN_TYPE_e SPS_Transmit(void)</div><div class="ttdoc">Transmit all assembled messages for one timeframe.</div><div class="ttdef"><b>Definition:</b> <a href="sps_8c_source.html#l00436">sps.c:436</a></div></div>
<div class="ttc" id="asps_8c_html_a42bcd905bbbb0fd532ae59e3fd60faff"><div class="ttname"><a href="sps_8c.html#a42bcd905bbbb0fd532ae59e3fd60faff">SPS_GlobalReadCurrent</a></div><div class="ttdeci">static void SPS_GlobalReadCurrent(const uint8_t outputAllDevices)</div><div class="ttdoc">Read the current measurements for a specific output for all SPS ICs of the daisy-chain.</div><div class="ttdef"><b>Definition:</b> <a href="sps_8c_source.html#l00458">sps.c:458</a></div></div>
<div class="ttc" id="asps_8c_html_a42c6ab326377a351def20a0d748afb4e"><div class="ttname"><a href="sps_8c.html#a42c6ab326377a351def20a0d748afb4e">SPS_GlobalRegisterRead</a></div><div class="ttdeci">static void SPS_GlobalRegisterRead(const uint16_t address, const SPS_READ_TYPE_e controlOrDiagnostic, uint16_t *pSpiTxBuffer)</div><div class="ttdoc">Sets the SPI Tx buffer for a register read access for all SPS ICs of the daisy-chain.</div><div class="ttdef"><b>Definition:</b> <a href="sps_8c_source.html#l00268">sps.c:268</a></div></div>
<div class="ttc" id="asps_8c_html_a469394c3b1a16344fa2059b12b5fd1f8"><div class="ttname"><a href="sps_8c.html#a469394c3b1a16344fa2059b12b5fd1f8">sps_spiRxRegisterBuffer</a></div><div class="ttdeci">static uint16_t sps_spiRxRegisterBuffer[SPS_SPI_BUFFERSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="sps_8c_source.html#l00085">sps.c:85</a></div></div>
<div class="ttc" id="asps_8c_html_a4d6b349b73c22a06820874713c1cfa1f"><div class="ttname"><a href="sps_8c.html#a4d6b349b73c22a06820874713c1cfa1f">SPS_Ctrl</a></div><div class="ttdeci">void SPS_Ctrl(void)</div><div class="ttdoc">Control function for the CONT driver state machine.</div><div class="ttdef"><b>Definition:</b> <a href="sps_8c_source.html#l00481">sps.c:481</a></div></div>
<div class="ttc" id="asps_8c_html_a5aa51bd041468fa63d6992cbcb57ad3a"><div class="ttname"><a href="sps_8c.html#a5aa51bd041468fa63d6992cbcb57ad3a">SPS_SingleDeviceRegisterWrite</a></div><div class="ttdeci">static void SPS_SingleDeviceRegisterWrite(uint8_t device, const uint16_t address, uint8_t writeData, SPS_WRITE_TYPE_e writeType, uint16_t *pSpiTxBuffer)</div><div class="ttdoc">Sets the SPI Tx buffer for a register write access for a specific single SPS ICs in the daisy-chain.</div><div class="ttdef"><b>Definition:</b> <a href="sps_8c_source.html#l00298">sps.c:298</a></div></div>
<div class="ttc" id="asps_8c_html_a6f00c269d0e20b749d8c7a9867ff4ba4"><div class="ttname"><a href="sps_8c.html#a6f00c269d0e20b749d8c7a9867ff4ba4">SPS_InitializeBuffers</a></div><div class="ttdeci">static void SPS_InitializeBuffers(void)</div><div class="ttdef"><b>Definition:</b> <a href="sps_8c_source.html#l00384">sps.c:384</a></div></div>
<div class="ttc" id="asps_8c_html_a7cfb82ab6fb733aaa092a2731ebb62b5"><div class="ttname"><a href="sps_8c.html#a7cfb82ab6fb733aaa092a2731ebb62b5">SPS_GlobalRegisterWrite</a></div><div class="ttdeci">static void SPS_GlobalRegisterWrite(const uint16_t address, uint8_t writeData, uint16_t *pSpiTxBuffer)</div><div class="ttdoc">Sets the SPI Tx buffer for a register write access for all SPS ICs of the daisy-chain.</div><div class="ttdef"><b>Definition:</b> <a href="sps_8c_source.html#l00289">sps.c:289</a></div></div>
<div class="ttc" id="asps_8c_html_a909ae018ea80e7fe77d9467535aa6064"><div class="ttname"><a href="sps_8c.html#a909ae018ea80e7fe77d9467535aa6064">sps_timer</a></div><div class="ttdeci">static uint8_t sps_timer</div><div class="ttdef"><b>Definition:</b> <a href="sps_8c_source.html#l00077">sps.c:77</a></div></div>
<div class="ttc" id="asps_8c_html_a961f9c1c70ea7658911b9d91c209b0a0"><div class="ttname"><a href="sps_8c.html#a961f9c1c70ea7658911b9d91c209b0a0">SPS_SetContactorsTxBuffer</a></div><div class="ttdeci">static void SPS_SetContactorsTxBuffer(void)</div><div class="ttdoc">Assemble an update to the channel state of the SPS ICs.</div><div class="ttdef"><b>Definition:</b> <a href="sps_8c_source.html#l00396">sps.c:396</a></div></div>
<div class="ttc" id="asps_8c_html_a9c3bf6cc3ba07d1d11d34f03ec8c4f8e"><div class="ttname"><a href="sps_8c.html#a9c3bf6cc3ba07d1d11d34f03ec8c4f8e">SPS_GetChannelCurrentFeedback</a></div><div class="ttdeci">CONT_ELECTRICAL_STATE_TYPE_e SPS_GetChannelCurrentFeedback(const SPS_CHANNEL_INDEX channelIndex)</div><div class="ttdoc">Get feedback value.</div><div class="ttdef"><b>Definition:</b> <a href="sps_8c_source.html#l00620">sps.c:620</a></div></div>
<div class="ttc" id="asps_8c_html_a9cb3cd911b7a454365ab9c3cec7319a1"><div class="ttname"><a href="sps_8c.html#a9cb3cd911b7a454365ab9c3cec7319a1">SPS_RequestContactorState</a></div><div class="ttdeci">void SPS_RequestContactorState(SPS_CHANNEL_INDEX channelIndex, SPS_CHANNEL_FUNCTION_e channelFunction)</div><div class="ttdoc">Request state of a contactor.</div><div class="ttdef"><b>Definition:</b> <a href="sps_8c_source.html#l00602">sps.c:602</a></div></div>
<div class="ttc" id="asps_8c_html_a9cd448ef6691417f41dbc970bd187c0f"><div class="ttname"><a href="sps_8c.html#a9cd448ef6691417f41dbc970bd187c0f">sps_spiTxRegisterBuffer</a></div><div class="ttdeci">static uint16_t sps_spiTxRegisterBuffer[SPS_SPI_BUFFERSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="sps_8c_source.html#l00084">sps.c:84</a></div></div>
<div class="ttc" id="asps_8c_html_aa8e216a46ef6baaf22533059cf1af40b"><div class="ttname"><a href="sps_8c.html#aa8e216a46ef6baaf22533059cf1af40b">sps_state</a></div><div class="ttdeci">static SPS_STATE_e sps_state</div><div class="ttdef"><b>Definition:</b> <a href="sps_8c_source.html#l00074">sps.c:74</a></div></div>
<div class="ttc" id="asps_8c_html_aad3d92feddb41e5253ba90a4e8a8646c"><div class="ttname"><a href="sps_8c.html#aad3d92feddb41e5253ba90a4e8a8646c">sps_spiTxWriteToChannelChannelControlRegister</a></div><div class="ttdeci">static uint16_t sps_spiTxWriteToChannelChannelControlRegister[SPS_SPI_BUFFERSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="sps_8c_source.html#l00106">sps.c:106</a></div></div>
<div class="ttc" id="asps_8c_html_aba7afd3b8547adb7b798970df097448e"><div class="ttname"><a href="sps_8c.html#aba7afd3b8547adb7b798970df097448e">sps_spiRxReadAnswerDuringChannelControl</a></div><div class="ttdeci">static uint16_t sps_spiRxReadAnswerDuringChannelControl[SPS_SPI_BUFFERSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="sps_8c_source.html#l00107">sps.c:107</a></div></div>
<div class="ttc" id="asps_8c_html_acbea831bc7b455fd71f259e3a9e4c0aa"><div class="ttname"><a href="sps_8c.html#acbea831bc7b455fd71f259e3a9e4c0aa">SPS_RequestChannelState</a></div><div class="ttdeci">static void SPS_RequestChannelState(SPS_CHANNEL_INDEX channelIndex, SPS_CHANNEL_FUNCTION_e channelFunction)</div><div class="ttdoc">Request the functional state of a channel.</div><div class="ttdef"><b>Definition:</b> <a href="sps_8c_source.html#l00471">sps.c:471</a></div></div>
<div class="ttc" id="asps_8c_html_ad2fe38c253e1b0b76ac5b013a6ca9529"><div class="ttname"><a href="sps_8c.html#ad2fe38c253e1b0b76ac5b013a6ca9529">SPS_SetCommandTxBuffer</a></div><div class="ttdeci">static void SPS_SetCommandTxBuffer(const SPS_ACTION_e action)</div><div class="ttdoc">Assemble a general command to the SPS ICs.</div><div class="ttdef"><b>Definition:</b> <a href="sps_8c_source.html#l00334">sps.c:334</a></div></div>
<div class="ttc" id="asps_8c_html_af418145217797b02ca824f60042e51bf"><div class="ttname"><a href="sps_8c.html#af418145217797b02ca824f60042e51bf">SPS_RequestGeneralIoState</a></div><div class="ttdeci">void SPS_RequestGeneralIoState(SPS_CHANNEL_INDEX channelIndex, SPS_CHANNEL_FUNCTION_e channelFunction)</div><div class="ttdoc">Request state of a general IO.</div><div class="ttdef"><b>Definition:</b> <a href="sps_8c_source.html#l00611">sps.c:611</a></div></div>
<div class="ttc" id="asps_8h_html"><div class="ttname"><a href="sps_8h.html">sps.h</a></div><div class="ttdoc">Headers for the driver for the smart power switches.</div></div>
<div class="ttc" id="asps__cfg_8c_html_a4b14f4d375070a68dc76dc6a69b0ce37"><div class="ttname"><a href="sps__cfg_8c.html#a4b14f4d375070a68dc76dc6a69b0ce37">sps_channelStatus</a></div><div class="ttdeci">SPS_CHANNEL_STATE_s sps_channelStatus[SPS_NR_OF_AVAILABLE_SPS_CHANNELS]</div><div class="ttdef"><b>Definition:</b> <a href="sps__cfg_8c_source.html#l00068">sps_cfg.c:68</a></div></div>
<div class="ttc" id="asps__cfg_8c_html_aa37d7f71a950ea5bc83699f578173be1"><div class="ttname"><a href="sps__cfg_8c.html#aa37d7f71a950ea5bc83699f578173be1">sps_kChannelFeedbackMapping</a></div><div class="ttdeci">const SPS_CHANNEL_FEEDBACK_MAPPING_s sps_kChannelFeedbackMapping[SPS_NR_OF_AVAILABLE_SPS_CHANNELS]</div><div class="ttdef"><b>Definition:</b> <a href="sps__cfg_8c_source.html#l00085">sps_cfg.c:85</a></div></div>
<div class="ttc" id="asps__cfg_8h_html_a04d85020d971bab09525b81d24f9d472"><div class="ttname"><a href="sps__cfg_8h.html#a04d85020d971bab09525b81d24f9d472">SPS_FEEDBACK_GIO_PORT_DIR</a></div><div class="ttdeci">#define SPS_FEEDBACK_GIO_PORT_DIR</div><div class="ttdef"><b>Definition:</b> <a href="sps__cfg_8h_source.html#l00077">sps_cfg.h:77</a></div></div>
<div class="ttc" id="asps__cfg_8h_html_a1463fdf58d92c507cae99105b0ba260d"><div class="ttname"><a href="sps__cfg_8h.html#a1463fdf58d92c507cae99105b0ba260d">SPS_OUTPUT_CONTROL_REGISTER_ADDRESS</a></div><div class="ttdeci">#define SPS_OUTPUT_CONTROL_REGISTER_ADDRESS</div><div class="ttdef"><b>Definition:</b> <a href="sps__cfg_8h_source.html#l00122">sps_cfg.h:122</a></div></div>
<div class="ttc" id="asps__cfg_8h_html_a16412f95bac9f0f42a18f1b797528e72"><div class="ttname"><a href="sps__cfg_8h.html#a16412f95bac9f0f42a18f1b797528e72">SPS_ISR_IRQ_DIAG_REGISTER_ADDRESS</a></div><div class="ttdeci">#define SPS_ISR_IRQ_DIAG_REGISTER_ADDRESS</div><div class="ttdef"><b>Definition:</b> <a href="sps__cfg_8h_source.html#l00126">sps_cfg.h:126</a></div></div>
<div class="ttc" id="asps__cfg_8h_html_a17c0232507d950b74d2bf9320d27280d"><div class="ttname"><a href="sps__cfg_8h.html#a17c0232507d950b74d2bf9320d27280d">SPS_GLOBAL_CONTROL_REGISTER_ADDRESS</a></div><div class="ttdeci">#define SPS_GLOBAL_CONTROL_REGISTER_ADDRESS</div><div class="ttdef"><b>Definition:</b> <a href="sps__cfg_8h_source.html#l00121">sps_cfg.h:121</a></div></div>
<div class="ttc" id="asps__cfg_8h_html_a18e7ce184e9886a8adcab59383686127"><div class="ttname"><a href="sps__cfg_8h.html#a18e7ce184e9886a8adcab59383686127">SPS_NR_OF_AVAILABLE_SPS_CHANNELS</a></div><div class="ttdeci">#define SPS_NR_OF_AVAILABLE_SPS_CHANNELS</div><div class="ttdef"><b>Definition:</b> <a href="sps__cfg_8h_source.html#l00102">sps_cfg.h:102</a></div></div>
<div class="ttc" id="asps__cfg_8h_html_a19a847c5bb138b8589f4fb980d428368"><div class="ttname"><a href="sps__cfg_8h.html#a19a847c5bb138b8589f4fb980d428368">SPS_SPI_BUFFERSIZE</a></div><div class="ttdeci">#define SPS_SPI_BUFFERSIZE</div><div class="ttdef"><b>Definition:</b> <a href="sps__cfg_8h_source.html#l00118">sps_cfg.h:118</a></div></div>
<div class="ttc" id="asps__cfg_8h_html_a1cf3886fd91ddbd7fc6eba0bae39f431"><div class="ttname"><a href="sps__cfg_8h.html#a1cf3886fd91ddbd7fc6eba0bae39f431">SPS_OD_IOUT1_DIAG_REGISTER_ADDRESS</a></div><div class="ttdeci">#define SPS_OD_IOUT1_DIAG_REGISTER_ADDRESS</div><div class="ttdef"><b>Definition:</b> <a href="sps__cfg_8h_source.html#l00128">sps_cfg.h:128</a></div></div>
<div class="ttc" id="asps__cfg_8h_html_a23a2845ab7c14dcb86c1d379be18dce7"><div class="ttname"><a href="sps__cfg_8h.html#a23a2845ab7c14dcb86c1d379be18dce7">SPS_NORMAL_MODE</a></div><div class="ttdeci">#define SPS_NORMAL_MODE</div><div class="ttdef"><b>Definition:</b> <a href="sps__cfg_8h_source.html#l00150">sps_cfg.h:150</a></div></div>
<div class="ttc" id="asps__cfg_8h_html_a2f33a8f43fcd966ca8255f5e28ccc29c"><div class="ttname"><a href="sps__cfg_8h.html#a2f33a8f43fcd966ca8255f5e28ccc29c">SPS_STRONG_DRIVE</a></div><div class="ttdeci">#define SPS_STRONG_DRIVE</div><div class="ttdef"><b>Definition:</b> <a href="sps__cfg_8h_source.html#l00152">sps_cfg.h:152</a></div></div>
<div class="ttc" id="asps__cfg_8h_html_a4e3fb9083189caf75823eddee29484cb"><div class="ttname"><a href="sps__cfg_8h.html#a4e3fb9083189caf75823eddee29484cb">SPS_FEEDBACK_GIO_PORT</a></div><div class="ttdeci">#define SPS_FEEDBACK_GIO_PORT</div><div class="ttdef"><b>Definition:</b> <a href="sps__cfg_8h_source.html#l00076">sps_cfg.h:76</a></div></div>
<div class="ttc" id="asps__cfg_8h_html_a51009665d17ba14eff56de758964abd0"><div class="ttname"><a href="sps__cfg_8h.html#a51009665d17ba14eff56de758964abd0">SPS_RESET_GIO_PORT_DIR</a></div><div class="ttdeci">#define SPS_RESET_GIO_PORT_DIR</div><div class="ttdef"><b>Definition:</b> <a href="sps__cfg_8h_source.html#l00071">sps_cfg.h:71</a></div></div>
<div class="ttc" id="asps__cfg_8h_html_a57257c0aabedd55719e5ded0eb38f760"><div class="ttname"><a href="sps__cfg_8h.html#a57257c0aabedd55719e5ded0eb38f760">SPS_DRIVE_STRENGTH_BIT_START</a></div><div class="ttdeci">#define SPS_DRIVE_STRENGTH_BIT_START</div><div class="ttdef"><b>Definition:</b> <a href="sps__cfg_8h_source.html#l00161">sps_cfg.h:161</a></div></div>
<div class="ttc" id="asps__cfg_8h_html_a66952ad6881dbb03ff90c23a8c14304b"><div class="ttname"><a href="sps__cfg_8h.html#a66952ad6881dbb03ff90c23a8c14304b">SPS_READ_TYPE_e</a></div><div class="ttdeci">SPS_READ_TYPE_e</div><div class="ttdef"><b>Definition:</b> <a href="sps__cfg_8h_source.html#l00180">sps_cfg.h:180</a></div></div>
<div class="ttc" id="asps__cfg_8h_html_a66952ad6881dbb03ff90c23a8c14304ba06cd0748e818f9663dc5ee08c0df7fd5"><div class="ttname"><a href="sps__cfg_8h.html#a66952ad6881dbb03ff90c23a8c14304ba06cd0748e818f9663dc5ee08c0df7fd5">SPS_READ_DIAGNOSTIC_REGISTER</a></div><div class="ttdeci">@ SPS_READ_DIAGNOSTIC_REGISTER</div><div class="ttdef"><b>Definition:</b> <a href="sps__cfg_8h_source.html#l00181">sps_cfg.h:181</a></div></div>
<div class="ttc" id="asps__cfg_8h_html_a66952ad6881dbb03ff90c23a8c14304ba8185311b4cacfc4b46e7c43d60085f36"><div class="ttname"><a href="sps__cfg_8h.html#a66952ad6881dbb03ff90c23a8c14304ba8185311b4cacfc4b46e7c43d60085f36">SPS_READ_CONTROL_REGISTER</a></div><div class="ttdeci">@ SPS_READ_CONTROL_REGISTER</div><div class="ttdef"><b>Definition:</b> <a href="sps__cfg_8h_source.html#l00182">sps_cfg.h:182</a></div></div>
<div class="ttc" id="asps__cfg_8h_html_a67cc38d2157a691ae28ae894630ea9ab"><div class="ttname"><a href="sps__cfg_8h.html#a67cc38d2157a691ae28ae894630ea9ab">SPS_MODE_BIT_START</a></div><div class="ttdeci">#define SPS_MODE_BIT_START</div><div class="ttdef"><b>Definition:</b> <a href="sps__cfg_8h_source.html#l00159">sps_cfg.h:159</a></div></div>
<div class="ttc" id="asps__cfg_8h_html_a68ca3a125ff5f0e26b70a06c866649bc"><div class="ttname"><a href="sps__cfg_8h.html#a68ca3a125ff5f0e26b70a06c866649bc">SPS_OD_IOUT2_DIAG_REGISTER_ADDRESS</a></div><div class="ttdeci">#define SPS_OD_IOUT2_DIAG_REGISTER_ADDRESS</div><div class="ttdef"><b>Definition:</b> <a href="sps__cfg_8h_source.html#l00129">sps_cfg.h:129</a></div></div>
<div class="ttc" id="asps__cfg_8h_html_a76b6b23c38d5458d28e42a7d6d0066e3"><div class="ttname"><a href="sps__cfg_8h.html#a76b6b23c38d5458d28e42a7d6d0066e3">SPS_ACTION_e</a></div><div class="ttdeci">SPS_ACTION_e</div><div class="ttdef"><b>Definition:</b> <a href="sps__cfg_8h_source.html#l00226">sps_cfg.h:226</a></div></div>
<div class="ttc" id="asps__cfg_8h_html_a76b6b23c38d5458d28e42a7d6d0066e3a74a81fbd9d1eea1827834643cdf54bb7"><div class="ttname"><a href="sps__cfg_8h.html#a76b6b23c38d5458d28e42a7d6d0066e3a74a81fbd9d1eea1827834643cdf54bb7">SPS_ACTION_READ_CURRENT_MEASUREMENT2</a></div><div class="ttdeci">@ SPS_ACTION_READ_CURRENT_MEASUREMENT2</div><div class="ttdef"><b>Definition:</b> <a href="sps__cfg_8h_source.html#l00230">sps_cfg.h:230</a></div></div>
<div class="ttc" id="asps__cfg_8h_html_a76b6b23c38d5458d28e42a7d6d0066e3a9f594af1aa579b9b8943317ced8d3c51"><div class="ttname"><a href="sps__cfg_8h.html#a76b6b23c38d5458d28e42a7d6d0066e3a9f594af1aa579b9b8943317ced8d3c51">SPS_ACTION_READ_CURRENT_MEASUREMENT1</a></div><div class="ttdeci">@ SPS_ACTION_READ_CURRENT_MEASUREMENT1</div><div class="ttdef"><b>Definition:</b> <a href="sps__cfg_8h_source.html#l00229">sps_cfg.h:229</a></div></div>
<div class="ttc" id="asps__cfg_8h_html_a76b6b23c38d5458d28e42a7d6d0066e3ab4fd3558cd6caae3a631f5fa282d5525"><div class="ttname"><a href="sps__cfg_8h.html#a76b6b23c38d5458d28e42a7d6d0066e3ab4fd3558cd6caae3a631f5fa282d5525">SPS_ACTION_TRIGGER_CURRENT_MEASUREMENT</a></div><div class="ttdeci">@ SPS_ACTION_TRIGGER_CURRENT_MEASUREMENT</div><div class="ttdef"><b>Definition:</b> <a href="sps__cfg_8h_source.html#l00228">sps_cfg.h:228</a></div></div>
<div class="ttc" id="asps__cfg_8h_html_a76b6b23c38d5458d28e42a7d6d0066e3ad19a6ce26371cd07b0ddc1e667b9413e"><div class="ttname"><a href="sps__cfg_8h.html#a76b6b23c38d5458d28e42a7d6d0066e3ad19a6ce26371cd07b0ddc1e667b9413e">SPS_ACTION_READ_EN_IRQ_PIN</a></div><div class="ttdeci">@ SPS_ACTION_READ_EN_IRQ_PIN</div><div class="ttdef"><b>Definition:</b> <a href="sps__cfg_8h_source.html#l00233">sps_cfg.h:233</a></div></div>
<div class="ttc" id="asps__cfg_8h_html_a76b6b23c38d5458d28e42a7d6d0066e3ad698f1014e8712f5b39908fd8a39b1db"><div class="ttname"><a href="sps__cfg_8h.html#a76b6b23c38d5458d28e42a7d6d0066e3ad698f1014e8712f5b39908fd8a39b1db">SPS_ACTION_READ_CURRENT_MEASUREMENT4</a></div><div class="ttdeci">@ SPS_ACTION_READ_CURRENT_MEASUREMENT4</div><div class="ttdef"><b>Definition:</b> <a href="sps__cfg_8h_source.html#l00232">sps_cfg.h:232</a></div></div>
<div class="ttc" id="asps__cfg_8h_html_a76b6b23c38d5458d28e42a7d6d0066e3ae732d443069c2bc23c48e521e237f377"><div class="ttname"><a href="sps__cfg_8h.html#a76b6b23c38d5458d28e42a7d6d0066e3ae732d443069c2bc23c48e521e237f377">SPS_ACTION_CONFIGURE_CONTROL_REGISTER</a></div><div class="ttdeci">@ SPS_ACTION_CONFIGURE_CONTROL_REGISTER</div><div class="ttdef"><b>Definition:</b> <a href="sps__cfg_8h_source.html#l00227">sps_cfg.h:227</a></div></div>
<div class="ttc" id="asps__cfg_8h_html_a76b6b23c38d5458d28e42a7d6d0066e3af475469345e6367755c32fed13f3fdf8"><div class="ttname"><a href="sps__cfg_8h.html#a76b6b23c38d5458d28e42a7d6d0066e3af475469345e6367755c32fed13f3fdf8">SPS_ACTION_READ_CURRENT_MEASUREMENT3</a></div><div class="ttdeci">@ SPS_ACTION_READ_CURRENT_MEASUREMENT3</div><div class="ttdef"><b>Definition:</b> <a href="sps__cfg_8h_source.html#l00231">sps_cfg.h:231</a></div></div>
<div class="ttc" id="asps__cfg_8h_html_a772a675a1df78516b3f94fc1bffe9f9b"><div class="ttname"><a href="sps__cfg_8h.html#a772a675a1df78516b3f94fc1bffe9f9b">SPS_CHANNEL_FUNCTION_e</a></div><div class="ttdeci">SPS_CHANNEL_FUNCTION_e</div><div class="ttdef"><b>Definition:</b> <a href="sps__cfg_8h_source.html#l00186">sps_cfg.h:186</a></div></div>
<div class="ttc" id="asps__cfg_8h_html_a772a675a1df78516b3f94fc1bffe9f9ba72f33b2df63ed778bc22b10619a51030"><div class="ttname"><a href="sps__cfg_8h.html#a772a675a1df78516b3f94fc1bffe9f9ba72f33b2df63ed778bc22b10619a51030">SPS_CHANNEL_ON</a></div><div class="ttdeci">@ SPS_CHANNEL_ON</div><div class="ttdef"><b>Definition:</b> <a href="sps__cfg_8h_source.html#l00188">sps_cfg.h:188</a></div></div>
<div class="ttc" id="asps__cfg_8h_html_a772a675a1df78516b3f94fc1bffe9f9baddc53f5d59c41a9cd9d16f7879bef87e"><div class="ttname"><a href="sps__cfg_8h.html#a772a675a1df78516b3f94fc1bffe9f9baddc53f5d59c41a9cd9d16f7879bef87e">SPS_CHANNEL_OFF</a></div><div class="ttdeci">@ SPS_CHANNEL_OFF</div><div class="ttdef"><b>Definition:</b> <a href="sps__cfg_8h_source.html#l00187">sps_cfg.h:187</a></div></div>
<div class="ttc" id="asps__cfg_8h_html_a8128594a1a94a1cd845fc67a496f83b3"><div class="ttname"><a href="sps__cfg_8h.html#a8128594a1a94a1cd845fc67a496f83b3">SPS_NR_CONTACTOR_PER_IC</a></div><div class="ttdeci">#define SPS_NR_CONTACTOR_PER_IC</div><div class="ttdef"><b>Definition:</b> <a href="sps__cfg_8h_source.html#l00082">sps_cfg.h:82</a></div></div>
<div class="ttc" id="asps__cfg_8h_html_a96afab9c1222ec3a0513de27369fbd5c"><div class="ttname"><a href="sps__cfg_8h.html#a96afab9c1222ec3a0513de27369fbd5c">SPS_RW_BIT_POSITION</a></div><div class="ttdeci">#define SPS_RW_BIT_POSITION</div><div class="ttdef"><b>Definition:</b> <a href="sps__cfg_8h_source.html#l00139">sps_cfg.h:139</a></div></div>
<div class="ttc" id="asps__cfg_8h_html_a9d6ab6896c0fca27ebb9e7c3188f56cd"><div class="ttname"><a href="sps__cfg_8h.html#a9d6ab6896c0fca27ebb9e7c3188f56cd">SPS_OD_IOUT4_DIAG_REGISTER_ADDRESS</a></div><div class="ttdeci">#define SPS_OD_IOUT4_DIAG_REGISTER_ADDRESS</div><div class="ttdef"><b>Definition:</b> <a href="sps__cfg_8h_source.html#l00131">sps_cfg.h:131</a></div></div>
<div class="ttc" id="asps__cfg_8h_html_ab0da4fd54ed57610304f15d47036a2cb"><div class="ttname"><a href="sps__cfg_8h.html#ab0da4fd54ed57610304f15d47036a2cb">SPS_OD_IOUT3_DIAG_REGISTER_ADDRESS</a></div><div class="ttdeci">#define SPS_OD_IOUT3_DIAG_REGISTER_ADDRESS</div><div class="ttdef"><b>Definition:</b> <a href="sps__cfg_8h_source.html#l00130">sps_cfg.h:130</a></div></div>
<div class="ttc" id="asps__cfg_8h_html_ab4755dce2c87f40fad9cbfce1046f84c"><div class="ttname"><a href="sps__cfg_8h.html#ab4755dce2c87f40fad9cbfce1046f84c">SPS_ADDRESS_BIT_START</a></div><div class="ttdeci">#define SPS_ADDRESS_BIT_START</div><div class="ttdef"><b>Definition:</b> <a href="sps__cfg_8h_source.html#l00145">sps_cfg.h:145</a></div></div>
<div class="ttc" id="asps__cfg_8h_html_ab5684209f8940ad4a557daf5940f2000"><div class="ttname"><a href="sps__cfg_8h.html#ab5684209f8940ad4a557daf5940f2000">SPS_WRITE_TYPE_e</a></div><div class="ttdeci">SPS_WRITE_TYPE_e</div><div class="ttdef"><b>Definition:</b> <a href="sps__cfg_8h_source.html#l00173">sps_cfg.h:173</a></div></div>
<div class="ttc" id="asps__cfg_8h_html_ab5684209f8940ad4a557daf5940f2000a4852b850ae0ab59c279617e22012757a"><div class="ttname"><a href="sps__cfg_8h.html#ab5684209f8940ad4a557daf5940f2000a4852b850ae0ab59c279617e22012757a">SPS_andWithCurrentValue</a></div><div class="ttdeci">@ SPS_andWithCurrentValue</div><div class="ttdef"><b>Definition:</b> <a href="sps__cfg_8h_source.html#l00176">sps_cfg.h:176</a></div></div>
<div class="ttc" id="asps__cfg_8h_html_ab5684209f8940ad4a557daf5940f2000a74e8ab6c1744e3332cc7aa44086c23af"><div class="ttname"><a href="sps__cfg_8h.html#ab5684209f8940ad4a557daf5940f2000a74e8ab6c1744e3332cc7aa44086c23af">SPS_orWithCurrentValue</a></div><div class="ttdeci">@ SPS_orWithCurrentValue</div><div class="ttdef"><b>Definition:</b> <a href="sps__cfg_8h_source.html#l00175">sps_cfg.h:175</a></div></div>
<div class="ttc" id="asps__cfg_8h_html_ab5684209f8940ad4a557daf5940f2000aa005c5250bd7f4416cb541a163b4358e"><div class="ttname"><a href="sps__cfg_8h.html#ab5684209f8940ad4a557daf5940f2000aa005c5250bd7f4416cb541a163b4358e">SPS_replaceCurrentValue</a></div><div class="ttdeci">@ SPS_replaceCurrentValue</div><div class="ttdef"><b>Definition:</b> <a href="sps__cfg_8h_source.html#l00174">sps_cfg.h:174</a></div></div>
<div class="ttc" id="asps__cfg_8h_html_ab672122970f8d58299bb81318be44245"><div class="ttname"><a href="sps__cfg_8h.html#ab672122970f8d58299bb81318be44245">SPS_RESET_GIO_PORT</a></div><div class="ttdeci">#define SPS_RESET_GIO_PORT</div><div class="ttdef"><b>Definition:</b> <a href="sps__cfg_8h_source.html#l00070">sps_cfg.h:70</a></div></div>
<div class="ttc" id="asps__cfg_8h_html_ac509de4c0f0842d856654e1336840c99"><div class="ttname"><a href="sps__cfg_8h.html#ac509de4c0f0842d856654e1336840c99">SPS_DIAG_CTRL_BIT_POSITION</a></div><div class="ttdeci">#define SPS_DIAG_CTRL_BIT_POSITION</div><div class="ttdef"><b>Definition:</b> <a href="sps__cfg_8h_source.html#l00147">sps_cfg.h:147</a></div></div>
<div class="ttc" id="asps__cfg_8h_html_acb3c681d3dd13198523b6768c8640c8f"><div class="ttname"><a href="sps__cfg_8h.html#acb3c681d3dd13198523b6768c8640c8f">SPS_I_MEASUREMENT_LSB_mA</a></div><div class="ttdeci">#define SPS_I_MEASUREMENT_LSB_mA</div><div class="ttdef"><b>Definition:</b> <a href="sps__cfg_8h_source.html#l00164">sps_cfg.h:164</a></div></div>
<div class="ttc" id="asps__cfg_8h_html_acb787370c3be5234db896a6b3e0822dc"><div class="ttname"><a href="sps__cfg_8h.html#acb787370c3be5234db896a6b3e0822dc">SPS_RESET_PIN</a></div><div class="ttdeci">#define SPS_RESET_PIN</div><div class="ttdef"><b>Definition:</b> <a href="sps__cfg_8h_source.html#l00072">sps_cfg.h:72</a></div></div>
<div class="ttc" id="asps__cfg_8h_html_acd2cf1d197687afe98ff180d2d19e787"><div class="ttname"><a href="sps__cfg_8h.html#acd2cf1d197687afe98ff180d2d19e787">SPS_BITMASK_DIAGNOSTIC_ONDEMAND_OUTPUT_CURRENT</a></div><div class="ttdeci">#define SPS_BITMASK_DIAGNOSTIC_ONDEMAND_OUTPUT_CURRENT</div><div class="ttdef"><b>Definition:</b> <a href="sps__cfg_8h_source.html#l00170">sps_cfg.h:170</a></div></div>
<div class="ttc" id="asps__cfg_8h_html_aea2f18a1c6dea24c5d5c7670a2f8cde6"><div class="ttname"><a href="sps__cfg_8h.html#aea2f18a1c6dea24c5d5c7670a2f8cde6">SPS_C_CONTROL_REGISTER_ADDRESS</a></div><div class="ttdeci">#define SPS_C_CONTROL_REGISTER_ADDRESS</div><div class="ttdef"><b>Definition:</b> <a href="sps__cfg_8h_source.html#l00123">sps_cfg.h:123</a></div></div>
<div class="ttc" id="asps__cfg_8h_html_aead43b6ba741393f75cf0d4581fb7352"><div class="ttname"><a href="sps__cfg_8h.html#aead43b6ba741393f75cf0d4581fb7352">SPS_STATE_e</a></div><div class="ttdeci">SPS_STATE_e</div><div class="ttdef"><b>Definition:</b> <a href="sps__cfg_8h_source.html#l00212">sps_cfg.h:212</a></div></div>
<div class="ttc" id="asps__cfg_8h_html_aead43b6ba741393f75cf0d4581fb7352a0e780e5f86343edd9d8d6daf508135be"><div class="ttname"><a href="sps__cfg_8h.html#aead43b6ba741393f75cf0d4581fb7352a0e780e5f86343edd9d8d6daf508135be">SPS_TRIGGER_CURRENT_MEASUREMENT</a></div><div class="ttdeci">@ SPS_TRIGGER_CURRENT_MEASUREMENT</div><div class="ttdef"><b>Definition:</b> <a href="sps__cfg_8h_source.html#l00217">sps_cfg.h:217</a></div></div>
<div class="ttc" id="asps__cfg_8h_html_aead43b6ba741393f75cf0d4581fb7352a1918ff1943ea1614d344e9f7f7dc8dcf"><div class="ttname"><a href="sps__cfg_8h.html#aead43b6ba741393f75cf0d4581fb7352a1918ff1943ea1614d344e9f7f7dc8dcf">SPS_CONFIGURE_CONTROL_REGISTER</a></div><div class="ttdeci">@ SPS_CONFIGURE_CONTROL_REGISTER</div><div class="ttdef"><b>Definition:</b> <a href="sps__cfg_8h_source.html#l00216">sps_cfg.h:216</a></div></div>
<div class="ttc" id="asps__cfg_8h_html_aead43b6ba741393f75cf0d4581fb7352a402823bbf0913cce2e9d66e997e70ce0"><div class="ttname"><a href="sps__cfg_8h.html#aead43b6ba741393f75cf0d4581fb7352a402823bbf0913cce2e9d66e997e70ce0">SPS_READ_MEASURED_CURRENT2</a></div><div class="ttdeci">@ SPS_READ_MEASURED_CURRENT2</div><div class="ttdef"><b>Definition:</b> <a href="sps__cfg_8h_source.html#l00219">sps_cfg.h:219</a></div></div>
<div class="ttc" id="asps__cfg_8h_html_aead43b6ba741393f75cf0d4581fb7352a58c49b7031c51b388153cf74200bc5a6"><div class="ttname"><a href="sps__cfg_8h.html#aead43b6ba741393f75cf0d4581fb7352a58c49b7031c51b388153cf74200bc5a6">SPS_READ_MEASURED_CURRENT1</a></div><div class="ttdeci">@ SPS_READ_MEASURED_CURRENT1</div><div class="ttdef"><b>Definition:</b> <a href="sps__cfg_8h_source.html#l00218">sps_cfg.h:218</a></div></div>
<div class="ttc" id="asps__cfg_8h_html_aead43b6ba741393f75cf0d4581fb7352a67855b5304ac653c76e47d9ec3d02687"><div class="ttname"><a href="sps__cfg_8h.html#aead43b6ba741393f75cf0d4581fb7352a67855b5304ac653c76e47d9ec3d02687">SPS_RESET_LOW</a></div><div class="ttdeci">@ SPS_RESET_LOW</div><div class="ttdef"><b>Definition:</b> <a href="sps__cfg_8h_source.html#l00214">sps_cfg.h:214</a></div></div>
<div class="ttc" id="asps__cfg_8h_html_aead43b6ba741393f75cf0d4581fb7352a790ed152bba7409c55432741809563b5"><div class="ttname"><a href="sps__cfg_8h.html#aead43b6ba741393f75cf0d4581fb7352a790ed152bba7409c55432741809563b5">SPS_READ_EN_IRQ_PIN</a></div><div class="ttdeci">@ SPS_READ_EN_IRQ_PIN</div><div class="ttdef"><b>Definition:</b> <a href="sps__cfg_8h_source.html#l00222">sps_cfg.h:222</a></div></div>
<div class="ttc" id="asps__cfg_8h_html_aead43b6ba741393f75cf0d4581fb7352aac2a758c2b3dfdaf99fe80b582ca9554"><div class="ttname"><a href="sps__cfg_8h.html#aead43b6ba741393f75cf0d4581fb7352aac2a758c2b3dfdaf99fe80b582ca9554">SPS_READ_MEASURED_CURRENT3</a></div><div class="ttdeci">@ SPS_READ_MEASURED_CURRENT3</div><div class="ttdef"><b>Definition:</b> <a href="sps__cfg_8h_source.html#l00220">sps_cfg.h:220</a></div></div>
<div class="ttc" id="asps__cfg_8h_html_aead43b6ba741393f75cf0d4581fb7352ad9094b68f7667003ebe3f713118f0d56"><div class="ttname"><a href="sps__cfg_8h.html#aead43b6ba741393f75cf0d4581fb7352ad9094b68f7667003ebe3f713118f0d56">SPS_START</a></div><div class="ttdeci">@ SPS_START</div><div class="ttdef"><b>Definition:</b> <a href="sps__cfg_8h_source.html#l00213">sps_cfg.h:213</a></div></div>
<div class="ttc" id="asps__cfg_8h_html_aead43b6ba741393f75cf0d4581fb7352adde86f2ec619a62275a4e79233b89a2c"><div class="ttname"><a href="sps__cfg_8h.html#aead43b6ba741393f75cf0d4581fb7352adde86f2ec619a62275a4e79233b89a2c">SPS_READ_MEASURED_CURRENT4</a></div><div class="ttdeci">@ SPS_READ_MEASURED_CURRENT4</div><div class="ttdef"><b>Definition:</b> <a href="sps__cfg_8h_source.html#l00221">sps_cfg.h:221</a></div></div>
<div class="ttc" id="asps__cfg_8h_html_aead43b6ba741393f75cf0d4581fb7352aebdf3601d6032dd83e5ddaf45f27e4e3"><div class="ttname"><a href="sps__cfg_8h.html#aead43b6ba741393f75cf0d4581fb7352aebdf3601d6032dd83e5ddaf45f27e4e3">SPS_RESET_HIGH</a></div><div class="ttdeci">@ SPS_RESET_HIGH</div><div class="ttdef"><b>Definition:</b> <a href="sps__cfg_8h_source.html#l00215">sps_cfg.h:215</a></div></div>
<div class="ttc" id="asps__cfg_8h_html_af051e3fa16bf75f35ec7627a1467105c"><div class="ttname"><a href="sps__cfg_8h.html#af051e3fa16bf75f35ec7627a1467105c">SPS_FEEDBACK_PIN</a></div><div class="ttdeci">#define SPS_FEEDBACK_PIN</div><div class="ttdef"><b>Definition:</b> <a href="sps__cfg_8h_source.html#l00078">sps_cfg.h:78</a></div></div>
<div class="ttc" id="asps__types_8h_html_a3be98d4db19326a7c9d2b88106f9bb5c"><div class="ttname"><a href="sps__types_8h.html#a3be98d4db19326a7c9d2b88106f9bb5c">SPS_CHANNEL_INDEX</a></div><div class="ttdeci">uint8_t SPS_CHANNEL_INDEX</div><div class="ttdef"><b>Definition:</b> <a href="sps__types_8h_source.html#l00065">sps_types.h:65</a></div></div>
<div class="ttc" id="asps__types_8h_html_a7ad6cca1dfd30b9fbc61ee82eb37c87f"><div class="ttname"><a href="sps__types_8h.html#a7ad6cca1dfd30b9fbc61ee82eb37c87f">SPS_CHANNEL_AFFILIATION_e</a></div><div class="ttdeci">SPS_CHANNEL_AFFILIATION_e</div><div class="ttdoc">affiliation type of a sps channel</div><div class="ttdef"><b>Definition:</b> <a href="sps__types_8h_source.html#l00073">sps_types.h:73</a></div></div>
<div class="ttc" id="asps__types_8h_html_a7ad6cca1dfd30b9fbc61ee82eb37c87fa3dc358411b424ef8781918c9febde267"><div class="ttname"><a href="sps__types_8h.html#a7ad6cca1dfd30b9fbc61ee82eb37c87fa3dc358411b424ef8781918c9febde267">SPS_AFF_CONTACTOR</a></div><div class="ttdeci">@ SPS_AFF_CONTACTOR</div><div class="ttdef"><b>Definition:</b> <a href="sps__types_8h_source.html#l00074">sps_types.h:74</a></div></div>
<div class="ttc" id="asps__types_8h_html_a7ad6cca1dfd30b9fbc61ee82eb37c87fa8d053a10379fc16e9ff579856635408f"><div class="ttname"><a href="sps__types_8h.html#a7ad6cca1dfd30b9fbc61ee82eb37c87fa8d053a10379fc16e9ff579856635408f">SPS_AFF_GENERAL_IO</a></div><div class="ttdeci">@ SPS_AFF_GENERAL_IO</div><div class="ttdef"><b>Definition:</b> <a href="sps__types_8h_source.html#l00075">sps_types.h:75</a></div></div>
<div class="ttc" id="astructSPS__CHANNEL__FEEDBACK__MAPPING__s_html"><div class="ttname"><a href="structSPS__CHANNEL__FEEDBACK__MAPPING__s.html">SPS_CHANNEL_FEEDBACK_MAPPING_s</a></div><div class="ttdef"><b>Definition:</b> <a href="sps__cfg_8h_source.html#l00202">sps_cfg.h:202</a></div></div>
<div class="ttc" id="astructSPS__CHANNEL__FEEDBACK__MAPPING__s_html_a0714c740e152817f5d26278bffc3c8b3"><div class="ttname"><a href="structSPS__CHANNEL__FEEDBACK__MAPPING__s.html#a0714c740e152817f5d26278bffc3c8b3">SPS_CHANNEL_FEEDBACK_MAPPING_s::pexDevice</a></div><div class="ttdeci">const uint8_t pexDevice</div><div class="ttdef"><b>Definition:</b> <a href="sps__cfg_8h_source.html#l00203">sps_cfg.h:203</a></div></div>
<div class="ttc" id="astructSPS__CHANNEL__FEEDBACK__MAPPING__s_html_a9720c686544ca1621fb0fcf588b871cd"><div class="ttname"><a href="structSPS__CHANNEL__FEEDBACK__MAPPING__s.html#a9720c686544ca1621fb0fcf588b871cd">SPS_CHANNEL_FEEDBACK_MAPPING_s::pexChannel</a></div><div class="ttdeci">const uint8_t pexChannel</div><div class="ttdef"><b>Definition:</b> <a href="sps__cfg_8h_source.html#l00204">sps_cfg.h:204</a></div></div>
<div class="ttc" id="astructSPS__CHANNEL__STATE__s_html"><div class="ttname"><a href="structSPS__CHANNEL__STATE__s.html">SPS_CHANNEL_STATE_s</a></div><div class="ttdef"><b>Definition:</b> <a href="sps__cfg_8h_source.html#l00192">sps_cfg.h:192</a></div></div>
<div class="ttc" id="astructSPS__CHANNEL__STATE__s_html_a1aad5ce49e68ec11fa0177e89dd92b47"><div class="ttname"><a href="structSPS__CHANNEL__STATE__s.html#a1aad5ce49e68ec11fa0177e89dd92b47">SPS_CHANNEL_STATE_s::channelRequested</a></div><div class="ttdeci">SPS_CHANNEL_FUNCTION_e channelRequested</div><div class="ttdef"><b>Definition:</b> <a href="sps__cfg_8h_source.html#l00193">sps_cfg.h:193</a></div></div>
<div class="ttc" id="astructSPS__CHANNEL__STATE__s_html_a57e82e7851682f4b0cd8c58fcd3c0e7b"><div class="ttname"><a href="structSPS__CHANNEL__STATE__s.html#a57e82e7851682f4b0cd8c58fcd3c0e7b">SPS_CHANNEL_STATE_s::current_mA</a></div><div class="ttdeci">float_t current_mA</div><div class="ttdef"><b>Definition:</b> <a href="sps__cfg_8h_source.html#l00195">sps_cfg.h:195</a></div></div>
<div class="ttc" id="astructSPS__CHANNEL__STATE__s_html_a7477f1ca16bbf67642f1c9ca002c44c1"><div class="ttname"><a href="structSPS__CHANNEL__STATE__s.html#a7477f1ca16bbf67642f1c9ca002c44c1">SPS_CHANNEL_STATE_s::channel</a></div><div class="ttdeci">SPS_CHANNEL_FUNCTION_e channel</div><div class="ttdef"><b>Definition:</b> <a href="sps__cfg_8h_source.html#l00194">sps_cfg.h:194</a></div></div>
<div class="ttc" id="astructSPS__CHANNEL__STATE__s_html_acdcd2c5d56c9fa30fb3abbff37ab2650"><div class="ttname"><a href="structSPS__CHANNEL__STATE__s.html#acdcd2c5d56c9fa30fb3abbff37ab2650">SPS_CHANNEL_STATE_s::affiliation</a></div><div class="ttdeci">const SPS_CHANNEL_AFFILIATION_e affiliation</div><div class="ttdef"><b>Definition:</b> <a href="sps__cfg_8h_source.html#l00197">sps_cfg.h:197</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.10-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_5194e5fea318fda12687127c23f8aba1.html">app</a></li><li class="navelem"><a class="el" href="dir_c032a60ed447cafb6a8dfe00b963b69b.html">driver</a></li><li class="navelem"><a class="el" href="dir_932f86e70c37e905c226ab4d821d07ec.html">sps</a></li><li class="navelem"><a class="el" href="sps_8c.html">sps.c</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.9.1 <a rel="license" href="http://creativecommons.org/licenses/by/4.0/"><img alt="Creative Commons license" style="border-width:0;height:24px" src="https://i.creativecommons.org/l/by/4.0/88x31.png" /></a> </li>
  </ul>
</div>
</body>
</html>
