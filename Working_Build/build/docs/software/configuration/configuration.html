<!-- https://stackoverflow.com/a/53329712 -->

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>1. Configuration &mdash; foxBMS 2 1.5.0 documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/graphviz.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme_overrides.css" type="text/css" />
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
        <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
        <script>mermaid.initialize({startOnLoad:true});</script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="2. Building the Application" href="../build/build.html" />
    <link rel="prev" title="5. First Steps on Hardware" href="../../getting-started/first-steps-on-hardware.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> foxBMS 2
            <img src="../../_static/foxbms250px.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                1.5.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">General Information</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../general/releases.html">1. Releases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../general/changelog.html">2. Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../general/motivation.html">3. Motivation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../general/safety/safety.html">4. Safety</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../general/license.html">5. License</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../general/team.html">6. Team</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../introduction/abbreviations-definitions.html">1. Abbreviations and Definitions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../introduction/naming-conventions.html">2. Naming Conventions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../introduction/bms-overview.html">3. The foxBMS 2 Platform</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../introduction/use-case.html">4. Use Case</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../getting-started/getting-started.html">1. Getting Started with foxBMS 2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting-started/repository-structure.html">2. Repository Structure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting-started/software-installation.html">3. Software Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting-started/workspace.html">4. Creating a Workspace</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting-started/first-steps-on-hardware.html">5. First Steps on Hardware</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Software Documentation</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">1. Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../build/build.html">2. Building the Application</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview/sw-overview.html">3. Software Structure Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/modules.html">4. Software Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../unit-tests/unit-tests.html">5. Unit Tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="../build-process/build-process.html">6. Build Process</a></li>
<li class="toctree-l1"><a class="reference internal" href="../build-environment/build-environment.html">7. Build Environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../how-to/how-to.html">8. How-to</a></li>
<li class="toctree-l1"><a class="reference internal" href="../linker-script/linker-script.html">9. Linker Script</a></li>
<li class="toctree-l1"><a class="reference internal" href="../architecture/architecture.html">10. Software Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/overview.html">11. API</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Hardware Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../hardware/hardware.html">1. Hardware</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hardware/design-resources.html">2. Design Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hardware/connectors.html">3. Connectors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hardware/master.html">4. Master Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hardware/slaves.html">5. Slaves Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hardware/interfaces.html">6. Interfaces Overview</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">System Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../system/system-introduction.html">1. System Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../system/system-voltage-and-current-monitoring.html">2. System Voltage And Current Monitoring</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Tools Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../tools/dbc.html">1. DBC File</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/gui/gui.html">2. foxBMS 2 GUI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/waf-tools/waf-tools.html">3. Waf Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/debugger/debug-application.html">4. Debugging the Application</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/halcogen/halcogen.html">5. HALCoGen tool documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/static-analysis/axivion.html">6. Axivion Bauhaus Suite</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Developer Manual</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../developer-manual/preface.html">1. Preface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developer-manual/style-guide/style-guide.html">2. Style Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developer-manual/software-developer-manual.html">3. Software Developer Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developer-manual/hardware-developer-manual.html">4. Hardware Developer Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developer-manual/public-release-process.html">5. Public Release Process</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Miscellaneous Information</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../misc/acknowledgements.html">1. Acknowledgements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../misc/indices-and-tables.html">2. Indices and Tables</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../misc/bibliography.html">3. Bibliography</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">foxBMS 2</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
      <li><span class="section-number">1. </span>Configuration</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/software/configuration/configuration.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">

           <div itemprop="articleBody">
             
  <div class="section" id="configuration">
<span id="id1"></span><h1><span class="section-number">1. </span>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline"></a></h1>
<p>foxBMS 2 is an embedded system and some parts of the code are near to the
hardware level.
The code relies on a Hardware Abstraction Layer (HAL), which is a set of
functions and definitions acting as an interface between the application and
the underlying hardware.
The HAL must be configured to fit the application and the hardware the software
is running on (e.g., configure IO pins for communication with the outside
world).
This configuration is done through a software called HALCoGen.
This is described in <a class="reference internal" href="#hal-configuration"><span class="std std-ref">HALCoGen</span></a>.</p>
<p>Another point is that foxBMS 2 is a development platform.
As such, many parts of the code must be configured to fit the target
application (e.g., which monitoring IC is used to monitor the battery cells).
This is explained in <a class="reference internal" href="#bms-application"><span class="std std-ref">BMS Application</span></a>.</p>
<div class="section" id="hal-configuration">
<span id="id2"></span><h2><span class="section-number">1.1. </span>HALCoGen<a class="headerlink" href="#hal-configuration" title="Permalink to this headline"></a></h2>
<p>HALCoGen is a graphic user interface used to configure the HAL sources.
It generates sources in form of <code class="docutils literal notranslate"><span class="pre">.h</span></code> and <code class="docutils literal notranslate"><span class="pre">.c</span></code> and <code class="docutils literal notranslate"><span class="pre">.asm</span></code> files.
These HAL sources are generated based on the HALCoGen configuration files
(<code class="docutils literal notranslate"><span class="pre">*.hcg</span></code> and <code class="docutils literal notranslate"><span class="pre">*.dil</span></code>).
foxBMS 2 uses the waf tool <a class="reference internal" href="../../tools/waf-tools/f_hcg.html#waf-tool-halcogen"><span class="std std-ref">HALCoGen</span></a> to automatically run
HALCoGen and create the required sources.
Additional information on the tool can be found in
<a class="reference internal" href="../../tools/halcogen/halcogen.html#halcogen-tool-documentation"><span class="std std-ref">HALCoGen tool documentation</span></a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In some cases it might be beneficial to <strong>not</strong> generate the HAL during the
build step and instead use a generated version of the HAL.
For this use case see <a class="reference internal" href="without-halcogen_how-to.html#how-to-use-generated-sources-from-halcogen"><span class="std std-ref">How to Use Generated Sources from HALCoGen</span></a>.</p>
</div>
<p>HALCoGen ships with its own version of FreeRTOS and generates the
corresponding sources when running the code generator.
As foxBMS 2 uses its different own copy of FreeRTOS, the generated FreeRTOS
files from HALCoGen are removed after the code generator has run.</p>
<p>HALCoGen creates the source file <code class="docutils literal notranslate"><span class="pre">HL_sys_startup.c</span></code> which implements
(a weak implementation of) the function <code class="docutils literal notranslate"><span class="pre">_c_int00</span></code> (the system’s startup
routine). foxBMS 2 provides its own <strong>non</strong>-weak implementation of <code class="docutils literal notranslate"><span class="pre">_c_int00</span></code>
in <code class="docutils literal notranslate"><span class="pre">fstartup.c</span></code>.
The foxBMS 2 implementation of <code class="docutils literal notranslate"><span class="pre">_c_int00</span></code> must be coupled to the the current
HALCoGen configuration.
Most changes in the HALCoGen project do not alter the startup behavior and
no further action needs to be taken into account.
However there are settings that alter the startup behavior.
Such settings need to be ported to <code class="docutils literal notranslate"><span class="pre">fstartup.c</span></code> as this non-weak
implementation of <code class="docutils literal notranslate"><span class="pre">_c_int00</span></code> outweighs the generated, new version of
<code class="docutils literal notranslate"><span class="pre">_c_int00</span></code> in <code class="docutils literal notranslate"><span class="pre">HL_sys_startup.c</span></code>.
Otherwise the startup function used by foxBMS 2 would not reflect the
HALCoGen configuration.
The <a class="reference internal" href="../../tools/waf-tools/f_hcg.html#waf-tool-halcogen"><span class="std std-ref">HALCoGen</span></a> provides a mechanism to detected such changes.
The hash of the current <code class="docutils literal notranslate"><span class="pre">HL_sys_startup.c</span></code> implementation is stored in
<code class="docutils literal notranslate"><span class="pre">src/hal/startup.hash</span></code> and compared to the actual hash of the generated
<code class="docutils literal notranslate"><span class="pre">HL_sys_startup.c</span></code> file.
If these are not the same, the build aborts with the following message:</p>
<div class="literal-block-wrapper docutils container" id="halcogen-configuration-error">
<div class="code-block-caption"><span class="caption-number">Listing 1.1 </span><span class="caption-text">Example error message on hash mismatch of <code class="docutils literal notranslate"><span class="pre">HL_sys_startup.c</span></code></span><a class="headerlink" href="#halcogen-configuration-error" title="Permalink to this code"></a></div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">   C:\Users\vulpes\Documents\foxbms&gt;waf build_bin</span>
<span class="go">   Waf: Entering directory C:\Users\vulpes\Documents\foxbms\build\bin&#39;</span>
<span class="go">   [  2/824] Compiling hcg_compiler: conf\hcg\hcg.hcg conf\hcg\hcg.dil -&gt; build\bin\src\hal\hcg.hcg build\bin\src\hal\hcg.dil build\bin\src\hal\hcg.log build\bin\src\hal\include\config_cpu_clock_hz.h build\bin\src\hal\include\HL_hal_stdtypes.h build\bin\src\hal\include\HL_sys_common.h build\bin\src\hal\include\HL_reg_system.h build\bin\src\hal\include\HL_reg_flash.h build\bin\src\hal\include\HL_reg_l2ramw.h build\bin\src\hal\include\HL_reg_vim.h build\bin\src\hal\include\HL_reg_pbist.h build\bin\src\hal\include\HL_reg_stc.h build\bin\src\hal\include\HL_reg_efc.h build\bin\src\hal\include\HL_reg_pcr.h build\bin\src\hal\include\HL_reg_pmm.h build\bin\src\hal\include\HL_reg_dma.h build\bin\src\hal\include\HL_reg_ccmr5.h build\bin\src\hal\include\HL_sys_core.h build\bin\src\hal\include\HL_system.h build\bin\src\hal\include\HL_sys_mpu.h build\bin\src\hal\include\HL_sys_pmu.h build\bin\src\hal\include\HL_sys_pcr.h build\bin\src\hal\include\HL_sys_pmm.h build\bin\src\hal\include\HL_sys_dma.h build\bin\src\hal\include\HL_reg_epc.h build\bin\src\hal\include\HL_reg_nmpu.h build\bin\src\hal\include\HL_reg_scm.h build\bin\src\hal\include\HL_reg_sdcmmr.h build\bin\src\hal\include\HL_epc.h build\bin\src\hal\include\HL_nmpu.h build\bin\src\hal\include\HL_errata.h build\bin\src\hal\include\HL_errata_SSWF021_45.h build\bin\src\hal\include\HL_errata_SSWF021_45_defs.h build\bin\src\hal\include\HL_sys_vim.h build\bin\src\hal\include\HL_reg_pinmux.h build\bin\src\hal\include\HL_pinmux.h build\bin\src\hal\include\HL_reg_gio.h build\bin\src\hal\include\HL_gio.h build\bin\src\hal\include\HL_reg_esm.h build\bin\src\hal\include\HL_esm.h build\bin\src\hal\include\HL_reg_sci.h build\bin\src\hal\include\HL_sci.h build\bin\src\hal\include\HL_reg_lin.h build\bin\src\hal\include\HL_lin.h build\bin\src\hal\include\HL_reg_mibspi.h build\bin\src\hal\include\HL_mibspi.h build\bin\src\hal\include\HL_reg_spi.h build\bin\src\hal\include\HL_spi.h build\bin\src\hal\include\HL_reg_can.h build\bin\src\hal\include\HL_can.h build\bin\src\hal\include\HL_reg_adc.h build\bin\src\hal\include\HL_adc.h build\bin\src\hal\include\std_nhet.h build\bin\src\hal\include\HL_reg_het.h build\bin\src\hal\include\HL_het.h build\bin\src\hal\include\HL_reg_htu.h build\bin\src\hal\include\HL_htu.h build\bin\src\hal\include\HL_reg_i2c.h build\bin\src\hal\include\HL_i2c.h build\bin\src\hal\include\HL_emac.h build\bin\src\hal\include\HL_hw_emac.h build\bin\src\hal\include\HL_hw_emac_ctrl.h build\bin\src\hal\include\HL_hw_mdio.h build\bin\src\hal\include\HL_hw_reg_access.h build\bin\src\hal\include\HL_mdio.h build\bin\src\hal\include\HL_phy_dp83640.h build\bin\src\hal\include\HL_phy_tlk111.h build\bin\src\hal\include\HL_emac_phyConfig.h build\bin\src\hal\include\HL_reg_dcc.h build\bin\src\hal\include\HL_dcc.h build\bin\src\hal\include\HL_reg_rtp.h build\bin\src\hal\include\HL_rtp.h build\bin\src\hal\include\HL_reg_dmm.h build\bin\src\hal\include\HL_dmm.h build\bin\src\hal\include\HL_reg_emif.h build\bin\src\hal\include\HL_emif.h build\bin\src\hal\include\HL_reg_pom.h build\bin\src\hal\include\HL_pom.h build\bin\src\hal\include\HL_reg_crc.h build\bin\src\hal\include\HL_crc.h build\bin\src\hal\include\HL_reg_etpwm.h build\bin\src\hal\include\HL_etpwm.h build\bin\src\hal\include\HL_reg_ecap.h build\bin\src\hal\include\HL_ecap.h build\bin\src\hal\include\HL_reg_eqep.h build\bin\src\hal\include\HL_eqep.h build\bin\src\hal\include\Device_TMS570LC43.h build\bin\src\hal\include\Device_header.h build\bin\src\hal\include\Device_types.h build\bin\src\hal\include\ti_fee_cfg.h build\bin\src\hal\include\MemMap.h build\bin\src\hal\include\ti_fee_types.h build\bin\src\hal\include\ti_fee.h build\bin\src\hal\include\fee_interface.h build\bin\src\hal\source\HL_sys_pcr.c build\bin\src\hal\source\HL_sys_pmm.c build\bin\src\hal\source\HL_sys_dma.c build\bin\src\hal\source\HL_system.c build\bin\src\hal\source\HL_sys_phantom.c build\bin\src\hal\source\HL_sys_startup.c build\bin\src\hal\source\HL_sys_vim.c build\bin\src\hal\source\HL_notification.c build\bin\src\hal\source\HL_epc.c build\bin\src\hal\source\HL_nmpu.c build\bin\src\hal\source\HL_errata.c build\bin\src\hal\source\HL_errata_SSWF021_45.c build\bin\src\hal\source\HL_sys_core.asm build\bin\src\hal\source\HL_sys_intvecs.asm build\bin\src\hal\source\HL_sys_mpu.asm build\bin\src\hal\source\HL_sys_pmu.asm build\bin\src\hal\source\HL_pinmux.c build\bin\src\hal\source\HL_gio.c build\bin\src\hal\source\HL_esm.c build\bin\src\hal\source\HL_sci.c build\bin\src\hal\source\HL_lin.c build\bin\src\hal\source\HL_spi.c build\bin\src\hal\source\HL_can.c build\bin\src\hal\source\HL_adc.c build\bin\src\hal\source\HL_het.c build\bin\src\hal\source\HL_i2c.c build\bin\src\hal\source\HL_emac.c build\bin\src\hal\source\HL_mdio.c build\bin\src\hal\source\HL_phy_dp83640.c build\bin\src\hal\source\HL_phy_tlk111.c build\bin\src\hal\source\HL_dcc.c build\bin\src\hal\source\HL_emif.c build\bin\src\hal\source\HL_pom.c build\bin\src\hal\source\HL_crc.c build\bin\src\hal\source\HL_etpwm.c build\bin\src\hal\source\HL_ecap.c build\bin\src\hal\source\HL_eqep.c build\bin\src\hal\source\Device_TMS570LC43.c build\bin\src\hal\source\ti_fee_cfg.c build\bin\src\hal\source\ti_fee_Info.c build\bin\src\hal\source\ti_fee_ini.c build\bin\src\hal\source\ti_fee_main.c build\bin\src\hal\source\ti_fee_read.c build\bin\src\hal\source\ti_fee_writeSync.c build\bin\src\hal\source\ti_fee_writeAsync.c build\bin\src\hal\source\ti_fee_util.c build\bin\src\hal\source\ti_fee_cancel.c build\bin\src\hal\source\ti_fee_format.c build\bin\src\hal\source\ti_fee_eraseimmediateblock.c build\bin\src\hal\source\ti_fee_invalidateblock.c build\bin\src\hal\source\ti_fee_shutdown.c build\bin\src\hal\source\Fapi_UserDefinedFunctions.c build\bin\src\hal\source\ti_fee_readSync.c build\bin\src\hal\source\HL_ajsm.asm</span>
<span class="go">   Waf: Leaving directory C:\Users\vulpes\Documents\foxbms\build\bin&#39;</span>
<span class="go">   Build failed</span>
<span class="go">   Traceback (most recent call last):</span>
<span class="go">     File &quot;C:\Users\vulpes\Documents\foxbms\tools\waf3-2.0.22-1241519b19b496207abef1f72bbf61c2\waflib\Task.py&quot;, line 180, in process</span>
<span class="go">       ret=self.run()</span>
<span class="go">     File &quot;C:\Users\vulpes\Documents\foxbms\tools\waf-tools\f_hcg.py&quot;, line 260, in run</span>
<span class="go">       &quot;The auto-generated file &#39;HL_sys_startup.c&#39; has changed due to &quot;</span>
<span class="go">     File &quot;C:\Users\vulpes\Documents\foxbms\tools\waf3-2.0.22-1241519b19b496207abef1f72bbf61c2\waflib\Context.py&quot;, line 261, in fatal</span>
<span class="go">       raise self.errors.ConfigurationError(msg,ex=ex)</span>
<span class="go">   waflib.Errors.ConfigurationError: The auto-generated file &#39;HL_sys_startup.c&#39; has changed due to a configuration change in the HALCoGen project.</span>
<span class="go">   The expected hash is b&#39;e2e61496edd65f44d7cc811b504ad1f2&#39; but the generated hash is b&#39;1something-other&#39;.</span>
<span class="go">   Compare &#39;C:\Users\vulpes\Documents\foxbms\build\bin\src\hal\source\HL_sys_startup.c&#39; with &#39;fstartup.c&#39; and see if changes need to be applied to to &#39;fstartup.c&#39;. If everything is changed as needed, updated the hash in &#39;C:\Users\vulpes\Documents\foxbms\src\hal\startup.hash&#39; and build again.</span>
<span class="go">   For more information see the documentation.</span>
</pre></div>
</div>
</div>
<p>The build aborts as the expected hash is
<code class="docutils literal notranslate"><span class="pre">b'e2e61496edd65f44d7cc811b504ad1f2'</span></code> while the actual hash is
<code class="docutils literal notranslate"><span class="pre">b'1something-other234'</span></code>.
Next, the function <code class="docutils literal notranslate"><span class="pre">_c_int00</span></code> in the two files (<code class="docutils literal notranslate"><span class="pre">fstartup.c</span></code>) and
<code class="docutils literal notranslate"><span class="pre">HL_sys_startup.c</span></code> needs to be compared by the developer and the developer
needs to update the <code class="docutils literal notranslate"><span class="pre">_c_int00</span></code> implementation in the file <code class="docutils literal notranslate"><span class="pre">fstartup.c</span></code> to
reflect the HALCoGen startup routine.
The concluding step is to update the hash value in <code class="docutils literal notranslate"><span class="pre">src/hal/startup.hash</span></code>
with <code class="docutils literal notranslate"><span class="pre">1something-other</span></code>.
Now the build toolchain knows, that the changes applied in the HALCoGen are
reflected in the dependencies and the build will not abort after the HAL
sources are generated.</p>
<p>The process is illustrated in <a class="reference internal" href="#halcogen-configuration"><span class="std std-numref">Fig. 1.1</span></a>.</p>
<blockquote>
<div><div class="figure align-center" id="halcogen-configuration">
<a class="reference internal image-reference" href="../../_images/halcogen_configuration.png"><img alt="HALCoGen configuration" src="../../_images/halcogen_configuration.png" style="width: 100%;" /></a>
<p class="caption"><span class="caption-number">Fig. 1.1 </span><span class="caption-text">HALCoGen configuration change detection process</span><a class="headerlink" href="#halcogen-configuration" title="Permalink to this image"></a></p>
</div>
</div></blockquote>
<div class="section" id="enabling-cache">
<h3><span class="section-number">1.1.1. </span>Enabling Cache<a class="headerlink" href="#enabling-cache" title="Permalink to this headline"></a></h3>
<p>The TMS570LC4357 can use cache to improve performance.</p>
<ul class="simple">
<li><p>Since foxBMS 2 v1.3.0, cache is enabled by setting the define
<code class="docutils literal notranslate"><span class="pre">OS_ENABLE_CACHE</span></code> in <code class="docutils literal notranslate"><span class="pre">src/app/task/os/os.h</span></code> to <code class="docutils literal notranslate"><span class="pre">true</span></code>.
<strong>Therefore, the configuration setting in HALCoGen is ignored</strong>.
However, as the startup code generated in <code class="docutils literal notranslate"><span class="pre">HL_sys_startup.c</span></code> by HALCoGen
does still change (the line to activate cache is added), consequently the
hash in <code class="docutils literal notranslate"><span class="pre">src/hal/startup.hash</span></code> still needs to be updated, but no further
changes need to be applied.
The process to enable cache is then as follows:</p>
<ul>
<li><p>Enable cache by setting <code class="docutils literal notranslate"><span class="pre">OS_ENABLE_CACHE</span></code> to <code class="docutils literal notranslate"><span class="pre">true</span></code> in
<code class="docutils literal notranslate"><span class="pre">src/app/task/os/os.h</span></code>.</p></li>
<li><p>Update the file hash in <code class="docutils literal notranslate"><span class="pre">src/hal/startup.hash</span></code></p></li>
</ul>
</li>
<li><p>Before foxBMS 2 v1.3.0, enabling cache relied on the HALCoGen configuration
and that this setting altered the startup code in <code class="docutils literal notranslate"><span class="pre">HL_sys_startup.c</span></code>.
The cache enable setting is found at setting <code class="docutils literal notranslate"><span class="pre">TMS570LC4357ZWT_FREERTOS</span></code>,
sub-setting <code class="docutils literal notranslate"><span class="pre">R5-MPU-PMU</span></code> and then the configuration <code class="docutils literal notranslate"><span class="pre">Cortex-R5</span></code>,
sub-configuration <code class="docutils literal notranslate"><span class="pre">General</span> <span class="pre">Configuration</span></code> : <em>Enable Cache</em>.
The process to enable cache is then as follows:</p>
<ul>
<li><p>Enable cache in HALCoGen</p></li>
<li><p>Update the startup code in <code class="docutils literal notranslate"><span class="pre">fstartup.c</span></code> with the changes from
<code class="docutils literal notranslate"><span class="pre">HL_sys_startup.c</span></code>.</p></li>
<li><p>Update the file hash in <code class="docutils literal notranslate"><span class="pre">src/hal/startup.hash</span></code></p></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="bms-application">
<span id="id3"></span><h2><span class="section-number">1.2. </span>BMS Application<a class="headerlink" href="#bms-application" title="Permalink to this headline"></a></h2>
<p>The project provides two very basic configuration options:</p>
<ol class="arabic simple">
<li><p>general options in <code class="docutils literal notranslate"><span class="pre">conf/bms/bms.json</span></code></p></li>
<li><p>compiler options in <code class="docutils literal notranslate"><span class="pre">conf/cc/cc-options.yaml</span></code> (path is an option, see
<a class="reference internal" href="../../tools/waf-tools/compiler-tool/f_ti_arm_cgt.html#f_ti_arm_cgt.options" title="f_ti_arm_cgt.options"><code class="xref py py-meth docutils literal notranslate"><span class="pre">f_ti_arm_cgt.options()</span></code></a>) and compiler
remarks and remark severity level in <code class="docutils literal notranslate"><span class="pre">conf/cc/remarks.txt</span></code></p></li>
</ol>
<p>Furthermore, the used battery cells and the general configuration of the
battery system that is built up need to be defined:</p>
<ul class="simple">
<li><p>for the used battery cell:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">src/app/application/config/battery_cell_cfg.c</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">src/app/application/config/battery_cell_cfg.h</span></code></p></li>
</ul>
</li>
<li><p>for the top level view on the battery system:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">src/app/application/config/battery_system_cfg.c</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">src/app/application/config/battery_system_cfg.h</span></code></p></li>
</ul>
</li>
</ul>
<p>However, the actual behavior of the battery system in the target application is
highly dependent on the target application and can therefore not simply be
configured through some switches.
This needs to be implemented in e.g., the
<a class="reference external" href="./../../_static/doxygen/src/html/bms_8c.html#a954a05b20669dc00663c4f0f2a729fcd">BMS_Trigger()</a>
function.
It is up to the developer to familiarize with the hardware, code and
documentation and adapt the source code to the application specific
requirements.</p>
<div class="section" id="general-options">
<h3><span class="section-number">1.2.1. </span>General Options<a class="headerlink" href="#general-options" title="Permalink to this headline"></a></h3>
<p>Some BMS configurations require compiling different sources.
That applies to the operating system and the Analog Front-End.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Only very basic configurations can be changed via these options described
here.
Again, everything not mentioned here must still be <em>configured</em> by
programming the application behavior in the source code.</p>
</div>
<div class="section" id="operating-system">
<h4><span class="section-number">1.2.1.1. </span>Operating System<a class="headerlink" href="#operating-system" title="Permalink to this headline"></a></h4>
<p>The operating system is configured in <code class="docutils literal notranslate"><span class="pre">conf/bms/bms.json</span></code>.
The value for <code class="docutils literal notranslate"><span class="pre">os</span></code> must be the name of the source directory in <code class="docutils literal notranslate"><span class="pre">src/os/</span></code>
that includes the operating system sources.
Currently only FreeRTOS is supported (option: <code class="docutils literal notranslate"><span class="pre">&quot;os&quot;:</span> <span class="pre">&quot;freertos&quot;</span></code>).</p>
</div>
<div class="section" id="analog-front-end">
<h4><span class="section-number">1.2.1.2. </span>Analog Front-End<a class="headerlink" href="#analog-front-end" title="Permalink to this headline"></a></h4>
<p>The AFE is configured in <code class="docutils literal notranslate"><span class="pre">conf/bms/bms.json</span></code>.
The joint path from the values of <code class="docutils literal notranslate"><span class="pre">manufacturer</span></code> and <code class="docutils literal notranslate"><span class="pre">ic</span></code> must be the
name of the source directory in <code class="docutils literal notranslate"><span class="pre">src/app/driver/afe/&lt;manufacturer&gt;/&lt;ic&gt;</span></code>
that includes the driver implementation.
A list of supported ICs is found in <a class="reference internal" href="../modules/driver/afe/supported-afes.html#supported-analog-front-ends"><span class="std std-numref">Section 4.30</span></a>.</p>
<p>The build process behind this configuration is documented at
<a class="reference internal" href="../build-process/build-process.html#afe-library-build"><span class="std std-ref">Building the Analog Front-End Library</span></a>.</p>
</div>
<div class="section" id="balancing-strategy">
<h4><span class="section-number">1.2.1.3. </span>Balancing Strategy<a class="headerlink" href="#balancing-strategy" title="Permalink to this headline"></a></h4>
<p>foxBMS 2 supports three different balancing strategies:</p>
<ul class="simple">
<li><p>Voltage-based balancing: Cell balancing based on voltage differences
(key-value: <code class="docutils literal notranslate"><span class="pre">voltage</span></code>). Details are found in
<a class="reference internal" href="../modules/application/bal/bal.html#balancing-module-voltage-based-balancing"><span class="std std-ref">Voltage-based Balancing</span></a></p></li>
<li><p>History-based balancing: Cell balancing based on voltage history
(key-value: <code class="docutils literal notranslate"><span class="pre">history</span></code>). Details are found in
<a class="reference internal" href="../modules/application/bal/bal.html#balancing-module-history-based-balancing"><span class="std std-ref">History-based Balancing</span></a></p></li>
<li><p>No balancing: No balancing of any cell (key-value: <code class="docutils literal notranslate"><span class="pre">none</span></code>). Details are
found in   <a class="reference internal" href="../modules/application/bal/bal.html#balancing-module-no-balancing"><span class="std std-ref">No Balancing</span></a></p></li>
</ul>
</div>
</div>
<div class="section" id="compiler-and-linker-options-and-remarks">
<h3><span class="section-number">1.2.2. </span>Compiler and Linker Options and Remarks<a class="headerlink" href="#compiler-and-linker-options-and-remarks" title="Permalink to this headline"></a></h3>
<p>All options from <code class="docutils literal notranslate"><span class="pre">conf/cc/cc-options.yaml</span></code> are passed verbatim into the
build process. Compiler options are set during configuration time, that means
changing values in <code class="docutils literal notranslate"><span class="pre">conf/cc/cc-options.yaml</span></code> needs to be followed by
<code class="docutils literal notranslate"><span class="pre">waf</span> <span class="pre">configure</span></code>.</p>
<p>See the TI compiler manual before changing the flags in
<code class="docutils literal notranslate"><span class="pre">conf/cc/cc-options.yaml</span></code>.
The details of the project compiler configuration are described in
<a class="reference internal" href="compiler/compiler-configuration.html#compiler-configuration"><span class="std std-ref">Compiler Configuration</span></a>.</p>
</div>
<div class="section" id="basic-battery-cell-and-system-configuration">
<h3><span class="section-number">1.2.3. </span>Basic Battery Cell And System Configuration<a class="headerlink" href="#basic-battery-cell-and-system-configuration" title="Permalink to this headline"></a></h3>
<div class="section" id="battery-cell-configuration">
<h4><span class="section-number">1.2.3.1. </span>Battery Cell Configuration<a class="headerlink" href="#battery-cell-configuration" title="Permalink to this headline"></a></h4>
<p>The basic parameters of the used battery cell of the battery system are defined
in:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">src/app/application/config/battery_cell_cfg.c</span></code> <a class="reference external" href="./../../_static/doxygen/src/html/battery__cell__cfg_8c.html">🔗</a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">src/app/application/config/battery_cell_cfg.h</span></code> <a class="reference external" href="./../../_static/doxygen/src/html/battery__cell__cfg_8h.html">🔗</a></p></li>
</ul>
<p>The following parameters need to be defined (the links lead to the doxygen
documentation for the explanation of the specific parameter) in
<code class="docutils literal notranslate"><span class="pre">src/app/application/config/battery_cell_cfg.h</span></code>:</p>
<table class="docutils align-default" id="id4">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Setting</p></th>
<th class="head"><p>Details (define name)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Maximum discharge temperature MSL</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BC_TEMPERATURE_MAX_DISCHARGE_MSL_ddegC</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Maximum discharge temperature RSL</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BC_TEMPERATURE_MAX_DISCHARGE_RSL_ddegC</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Maximum discharge temperature MOL</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BC_TEMPERATURE_MAX_DISCHARGE_MOL_ddegC</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Minimum discharge temperature MSL</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BC_TEMPERATURE_MIN_DISCHARGE_MSL_ddegC</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Minimum discharge temperature RSL</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BC_TEMPERATURE_MIN_DISCHARGE_RSL_ddegC</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Minimum discharge temperature MOL</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BC_TEMPERATURE_MIN_DISCHARGE_MOL_ddegC</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Maximum temperature limit during charge MSL</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BC_TEMPERATURE_MAX_CHARGE_MSL_ddegC</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Maximum temperature limit during charge RSL</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BC_TEMPERATURE_MAX_CHARGE_RSL_ddegC</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Maximum temperature limit during charge MOL</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BC_TEMPERATURE_MAX_CHARGE_MOL_ddegC</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Minimum temperature limit during discharge MSL</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BC_TEMPERATURE_MIN_CHARGE_MSL_ddegC</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Minimum temperature limit during discharge RSL</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BC_TEMPERATURE_MIN_CHARGE_RSL_ddegC</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Minimum temperature limit during discharge MOL</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BC_TEMPERATURE_MIN_CHARGE_MOL_ddegC</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Maximum cell voltage limit MSL</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BC_VOLTAGE_MAX_MSL_mV</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Maximum cell voltage limit RSL</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BC_VOLTAGE_MAX_RSL_mV</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Maximum cell voltage limit MOL</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BC_VOLTAGE_MAX_MOL_mV</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Nominal cell voltage</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BC_VOLTAGE_NOMINAL_mV</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Minimum cell voltage limit MSL</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BC_VOLTAGE_MIN_MSL_mV</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Minimum cell voltage limit RSL</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BC_VOLTAGE_MIN_RSL_mV</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Minimum cell voltage limit MOL</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BC_VOLTAGE_MIN_MOL_mV</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Deep-discharge cell voltage limit</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BC_VOLTAGE_DEEP_DISCHARGE_mV</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Maximum discharge current limit MSL</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BC_CURRENT_MAX_DISCHARGE_MSL_mA</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Maximum discharge current limit RSL</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BC_CURRENT_MAX_DISCHARGE_RSL_mA</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Maximum discharge current limit MOL</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BC_CURRENT_MAX_DISCHARGE_MOL_mA</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Maximum charge current limit MSL</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BC_CURRENT_MAX_CHARGE_MSL_mA</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Maximum charge current limit RSL</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BC_CURRENT_MAX_CHARGE_RSL_mA</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Maximum charge current limit MOL</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BC_CURRENT_MAX_CHARGE_MOL_mA</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Cell capacity used for SOC calculation</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BC_CAPACITY_mAh</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Cell energy</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BC_ENERGY_Wh</span></code></p></td>
</tr>
</tbody>
</table>
<p>The lookup tables for the state of charge <code class="docutils literal notranslate"><span class="pre">bc_stateOfChargeLookupTable</span></code>
and for the state of energy <code class="docutils literal notranslate"><span class="pre">bc_stateOfEnergyLookupTable</span></code> need to be defined
in <code class="docutils literal notranslate"><span class="pre">src/app/application/config/battery_cell_cfg.c</span></code>.</p>
</div>
<div class="section" id="battery-system-configuration">
<h4><span class="section-number">1.2.3.2. </span>Battery System Configuration<a class="headerlink" href="#battery-system-configuration" title="Permalink to this headline"></a></h4>
<p>The basic, top level view on the battery system configuration is defined at:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">src/app/application/config/battery_system_cfg.c</span></code> <a class="reference external" href="./../../_static/doxygen/src/html/battery__system__cfg_8c.html">🔗</a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">src/app/application/config/battery_system_cfg.h</span></code> <a class="reference external" href="./../../_static/doxygen/src/html/battery__system__cfg_8h.html">🔗</a></p></li>
</ul>
<table class="docutils align-default" id="id5">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Setting</p></th>
<th class="head"><p>Details (define name)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Defines whether discharge current is seen as positive or negative</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BS_POSITIVE_DISCHARGE_CURRENT</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Number of parallel strings in the battery pack</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BS_NR_OF_STRINGS</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Number of modules in a string</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BS_NR_OF_MODULES_PER_STRING</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Number of cells per module</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BS_NR_OF_CELL_BLOCKS_PER_MODULE</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Number of battery cells in a parallel cell connection per battery module</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BS_NR_OF_PARALLEL_CELLS_PER_MODULE</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Value of the balancing resistors on the slave-board</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BS_BALANCING_RESISTANCE_ohm</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Number of used GPIOs on the slave-board</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BS_NR_OF_GPIOS_PER_MODULE</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Number of temperature sensors per battery module</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BS_NR_OF_TEMP_SENSORS_PER_MODULE</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Defines whether CAN based current sensor is present or not</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BS_CURRENT_SENSOR_PRESENT</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Maximum break current of main contactors</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BS_MAIN_CONTACTORS_MAXIMUM_BREAK_CURRENT_mA</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Maximum fuse trigger duration</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BS_MAIN_FUSE_MAXIMUM_TRIGGER_DURATION_ms</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Maximum string current limit in mA that is used in the SOA module</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BS_MAXIMUM_STRING_CURRENT_mA</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Define if interlock feedback should be discarded or not</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BS_IGNORE_INTERLOCK_FEEDBACK</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Defines whether CAN timing shall be evaluated or not</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BS_CHECK_CAN_TIMING</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Defines whether balancing shall be available or not</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BS_BALANCING_DEFAULT_INACTIVE</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Number of contactors in addition to string contactors (e.g., precharge)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BS_NR_OF_CONTACTORS_OUTSIDE_STRINGS</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Current threshold for determining rest state of battery</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BS_REST_CURRENT_mA</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Wait time in 10ms before battery system is at rest</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BS_RELAXATION_PERIOD_10ms</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Current sensor threshold for 0 current in mA as the sensor has a</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BS_CS_THRESHOLD_NO_CURRENT_mA</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Maximum voltage drop over fuse</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BS_MAX_VOLTAGE_DROP_OVER_FUSE_mV</span></code></p></td>
</tr>
<tr class="row-even"><td><p>This section of the documentation is not yet complete.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BS_CHECK_FUSE_PLACED_IN_NORMAL_PATH</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>This section of the documentation is not yet complete.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BS_CHECK_FUSE_PLACED_IN_CHARGE_PATH</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Enable open-wire checks during standby</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BS_STANDBY_PERIODIC_OPEN_WIRE_CHECK</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Periodic open-wire check time in STANDBY state in ms</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BS_STANDBY_OPEN_WIRE_PERIOD_ms</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Open-wire check in normal mode (set to true or false)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BS_NORMAL_PERIODIC_OPEN_WIRE_CHECK</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Periodic open-wire check time in NORMAL state in ms</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BS_NORMAL_OPEN_WIRE_PERIOD_ms</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Open-wire check in charge mode (set to true or false)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BS_CHARGE_PERIODIC_OPEN_WIRE_CHECK</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Periodic open-wire check time in CHARGE state in ms</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BS_CHARGE_OPEN_WIRE_PERIOD_ms</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Periodic open-wire check time in ERROR state in ms</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BS_ERROR_OPEN_WIRE_PERIOD_ms</span></code></p></td>
</tr>
</tbody>
</table>
<p>The symbolic names of the individual strings needs to be adapted in
<code class="docutils literal notranslate"><span class="pre">BS_STRING_ID_e</span></code> to the actual number of strings in the battery system.</p>
<p>The configuration array <code class="docutils literal notranslate"><span class="pre">bs_stringsWithPrecharge</span></code> need to define whether a
string can used for precharging or not.
This configuration array uses of the entries in <code class="docutils literal notranslate"><span class="pre">BS_STRING_ID_e</span></code> for the
assignment.</p>
</div>
</div>
</div>
</div>


           </div>
          </div>
<a href="https://github.com/foxBMS/foxbms-2">
    <img style="position: absolute; top: 0; right: 0; border: 0;"
        src="../../_static/forkme.png" alt="Fork me on GitHub">
</a>

          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../../getting-started/first-steps-on-hardware.html" class="btn btn-neutral float-left" title="5. First Steps on Hardware" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../build/build.html" class="btn btn-neutral float-right" title="2. Building the Application" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2010 - 2023, Fraunhofer-Gesellschaft zur Foerderung der angewandten Forschung e.V. All rights reserved. See license section for further information.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>